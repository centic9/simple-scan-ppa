/* ui.c generated by valac 0.24.0, the Vala compiler
 * generated from ui.vala, do not modify */

/*
 * Copyright (C) 2009-2011 Canonical Ltd.
 * Author: Robert Ancell <robert.ancell@canonical.com>,
 *         Eduard Gotwig <g@ox.io>
 *
 * This program is free software: you can redistribute it and/or modify it under
 * the terms of the GNU General Public License as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option) any later
 * version. See http://www.gnu.org/copyleft/gpl.html the full text of the
 * license.
 */

#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <gio/gio.h>
#include <stdlib.h>
#include <string.h>
#include <glib/gi18n-lib.h>
#include <gdk/gdk.h>
#include <float.h>
#include <math.h>
#include <cairo.h>
#include <gdk-pixbuf/gdk-pixbuf.h>
#include <glib/gstdio.h>
#include <unistd.h>


#define TYPE_USER_INTERFACE (user_interface_get_type ())
#define USER_INTERFACE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_USER_INTERFACE, UserInterface))
#define USER_INTERFACE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_USER_INTERFACE, UserInterfaceClass))
#define IS_USER_INTERFACE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_USER_INTERFACE))
#define IS_USER_INTERFACE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_USER_INTERFACE))
#define USER_INTERFACE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_USER_INTERFACE, UserInterfaceClass))

typedef struct _UserInterface UserInterface;
typedef struct _UserInterfaceClass UserInterfaceClass;
typedef struct _UserInterfacePrivate UserInterfacePrivate;

#define TYPE_PROGRESS_BAR_DIALOG (progress_bar_dialog_get_type ())
#define PROGRESS_BAR_DIALOG(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_PROGRESS_BAR_DIALOG, ProgressBarDialog))
#define PROGRESS_BAR_DIALOG_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_PROGRESS_BAR_DIALOG, ProgressBarDialogClass))
#define IS_PROGRESS_BAR_DIALOG(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_PROGRESS_BAR_DIALOG))
#define IS_PROGRESS_BAR_DIALOG_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_PROGRESS_BAR_DIALOG))
#define PROGRESS_BAR_DIALOG_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_PROGRESS_BAR_DIALOG, ProgressBarDialogClass))

typedef struct _ProgressBarDialog ProgressBarDialog;
typedef struct _ProgressBarDialogClass ProgressBarDialogClass;

#define TYPE_BOOK (book_get_type ())
#define BOOK(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_BOOK, Book))
#define BOOK_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_BOOK, BookClass))
#define IS_BOOK(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_BOOK))
#define IS_BOOK_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_BOOK))
#define BOOK_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_BOOK, BookClass))

typedef struct _Book Book;
typedef struct _BookClass BookClass;

#define TYPE_AUTOSAVE_MANAGER (autosave_manager_get_type ())
#define AUTOSAVE_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_AUTOSAVE_MANAGER, AutosaveManager))
#define AUTOSAVE_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_AUTOSAVE_MANAGER, AutosaveManagerClass))
#define IS_AUTOSAVE_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_AUTOSAVE_MANAGER))
#define IS_AUTOSAVE_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_AUTOSAVE_MANAGER))
#define AUTOSAVE_MANAGER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_AUTOSAVE_MANAGER, AutosaveManagerClass))

typedef struct _AutosaveManager AutosaveManager;
typedef struct _AutosaveManagerClass AutosaveManagerClass;

#define TYPE_BOOK_VIEW (book_view_get_type ())
#define BOOK_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_BOOK_VIEW, BookView))
#define BOOK_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_BOOK_VIEW, BookViewClass))
#define IS_BOOK_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_BOOK_VIEW))
#define IS_BOOK_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_BOOK_VIEW))
#define BOOK_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_BOOK_VIEW, BookViewClass))

typedef struct _BookView BookView;
typedef struct _BookViewClass BookViewClass;

#define TYPE_SCAN_DIRECTION (scan_direction_get_type ())

#define TYPE_PAGE (page_get_type ())
#define PAGE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_PAGE, Page))
#define PAGE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_PAGE, PageClass))
#define IS_PAGE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_PAGE))
#define IS_PAGE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_PAGE))
#define PAGE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_PAGE, PageClass))

typedef struct _Page Page;
typedef struct _PageClass PageClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define _book_unref0(var) ((var == NULL) ? NULL : (var = (book_unref (var), NULL)))
#define _autosave_manager_unref0(var) ((var == NULL) ? NULL : (var = (autosave_manager_unref (var), NULL)))
#define _page_unref0(var) ((var == NULL) ? NULL : (var = (page_unref (var), NULL)))

#define TYPE_SCAN_DEVICE (scan_device_get_type ())
#define SCAN_DEVICE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_SCAN_DEVICE, ScanDevice))
#define SCAN_DEVICE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_SCAN_DEVICE, ScanDeviceClass))
#define IS_SCAN_DEVICE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_SCAN_DEVICE))
#define IS_SCAN_DEVICE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_SCAN_DEVICE))
#define SCAN_DEVICE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_SCAN_DEVICE, ScanDeviceClass))

typedef struct _ScanDevice ScanDevice;
typedef struct _ScanDeviceClass ScanDeviceClass;
typedef struct _ScanDevicePrivate ScanDevicePrivate;
#define _scan_device_unref0(var) ((var == NULL) ? NULL : (var = (scan_device_unref (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))

#define TYPE_SCAN_TYPE (scan_type_get_type ())

#define TYPE_SCAN_OPTIONS (scan_options_get_type ())
#define SCAN_OPTIONS(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_SCAN_OPTIONS, ScanOptions))
#define SCAN_OPTIONS_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_SCAN_OPTIONS, ScanOptionsClass))
#define IS_SCAN_OPTIONS(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_SCAN_OPTIONS))
#define IS_SCAN_OPTIONS_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_SCAN_OPTIONS))
#define SCAN_OPTIONS_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_SCAN_OPTIONS, ScanOptionsClass))

typedef struct _ScanOptions ScanOptions;
typedef struct _ScanOptionsClass ScanOptionsClass;

#define TYPE_SCAN_MODE (scan_mode_get_type ())
typedef struct _ScanOptionsPrivate ScanOptionsPrivate;
#define _scan_options_unref0(var) ((var == NULL) ? NULL : (var = (scan_options_unref (var), NULL)))
typedef struct _Block1Data Block1Data;

#define TYPE_PAGE_ICON (page_icon_get_type ())
#define PAGE_ICON(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_PAGE_ICON, PageIcon))
#define PAGE_ICON_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_PAGE_ICON, PageIconClass))
#define IS_PAGE_ICON(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_PAGE_ICON))
#define IS_PAGE_ICON_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_PAGE_ICON))
#define PAGE_ICON_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_PAGE_ICON, PageIconClass))

typedef struct _PageIcon PageIcon;
typedef struct _PageIconClass PageIconClass;
#define _cairo_destroy0(var) ((var == NULL) ? NULL : (var = (cairo_destroy (var), NULL)))
#define _g_key_file_unref0(var) ((var == NULL) ? NULL : (var = (g_key_file_unref (var), NULL)))
typedef struct _ProgressBarDialogPrivate ProgressBarDialogPrivate;
typedef struct _PageIconPrivate PageIconPrivate;

struct _UserInterface {
	GtkApplicationWindow parent_instance;
	UserInterfacePrivate * priv;
};

struct _UserInterfaceClass {
	GtkApplicationWindowClass parent_class;
};

typedef enum  {
	SCAN_DIRECTION_TOP_TO_BOTTOM,
	SCAN_DIRECTION_LEFT_TO_RIGHT,
	SCAN_DIRECTION_BOTTOM_TO_TOP,
	SCAN_DIRECTION_RIGHT_TO_LEFT
} ScanDirection;

struct _UserInterfacePrivate {
	GSettings* settings;
	GtkMenuBar* menubar;
	GtkToolbar* toolbar;
	GtkMenu* page_menu;
	GtkBox* main_vbox;
	GtkInfoBar* info_bar;
	GtkImage* info_bar_image;
	GtkLabel* info_bar_label;
	GtkButton* info_bar_close_button;
	GtkButton* info_bar_change_scanner_button;
	GtkRadioMenuItem* custom_crop_menuitem;
	GtkRadioMenuItem* a4_menuitem;
	GtkRadioMenuItem* a5_menuitem;
	GtkRadioMenuItem* a6_menuitem;
	GtkRadioMenuItem* letter_menuitem;
	GtkRadioMenuItem* legal_menuitem;
	GtkRadioMenuItem* four_by_six_menuitem;
	GtkRadioMenuItem* no_crop_menuitem;
	GtkMenuItem* page_move_left_menuitem;
	GtkMenuItem* page_move_right_menuitem;
	GtkMenuItem* page_delete_menuitem;
	GtkMenuItem* crop_rotate_menuitem;
	GtkMenuItem* save_menuitem;
	GtkMenuItem* save_as_menuitem;
	GtkMenuItem* copy_to_clipboard_menuitem;
	GtkButton* save_button;
	GtkToolButton* save_toolbutton;
	GtkMenuItem* stop_scan_menuitem;
	GtkToolButton* stop_toolbutton;
	GtkToggleButton* crop_button;
	GtkToggleToolButton* crop_toolbutton;
	GtkButton* stop_button;
	GtkButton* scan_button;
	GtkRadioMenuItem* text_button_menuitem;
	GtkRadioMenuItem* text_button_hb_menuitem;
	GtkRadioMenuItem* text_menuitem;
	GtkRadioMenuItem* photo_button_menuitem;
	GtkRadioMenuItem* photo_button_hb_menuitem;
	GtkRadioMenuItem* photo_menuitem;
	GtkDialog* authorize_dialog;
	GtkLabel* authorize_label;
	GtkEntry* username_entry;
	GtkEntry* password_entry;
	GtkDialog* preferences_dialog;
	GtkComboBox* device_combo;
	GtkComboBox* text_dpi_combo;
	GtkComboBox* photo_dpi_combo;
	GtkComboBox* page_side_combo;
	GtkComboBox* paper_size_combo;
	GtkScale* brightness_scale;
	GtkScale* contrast_scale;
	GtkScale* quality_scale;
	GtkListStore* device_model;
	GtkListStore* text_dpi_model;
	GtkListStore* photo_dpi_model;
	GtkListStore* page_side_model;
	GtkListStore* paper_size_model;
	GtkAdjustment* brightness_adjustment;
	GtkAdjustment* contrast_adjustment;
	GtkAdjustment* quality_adjustment;
	gboolean setting_devices;
	gboolean user_selected_device;
	GtkFileChooserDialog* save_dialog;
	ProgressBarDialog* progress_dialog;
	gboolean have_error;
	gchar* error_title;
	gchar* error_text;
	gboolean error_change_scanner_hint;
	Book* _book;
	gchar* book_uri;
	AutosaveManager* autosave_manager;
	BookView* book_view;
	gboolean updating_page_menu;
	gint default_page_width;
	gint default_page_height;
	gint default_page_dpi;
	ScanDirection default_page_scan_direction;
	gchar* document_hint;
	gchar* _default_file_name;
	gboolean scanning_;
	gint window_width;
	gint window_height;
	gboolean window_is_maximized;
	guint save_state_timeout;
};

struct _ScanDevice {
	GTypeInstance parent_instance;
	volatile int ref_count;
	ScanDevicePrivate * priv;
	gchar* name;
	gchar* label;
};

struct _ScanDeviceClass {
	GTypeClass parent_class;
	void (*finalize) (ScanDevice *self);
};

typedef enum  {
	SCAN_TYPE_SINGLE,
	SCAN_TYPE_ADF_FRONT,
	SCAN_TYPE_ADF_BACK,
	SCAN_TYPE_ADF_BOTH
} ScanType;

typedef enum  {
	SCAN_MODE_DEFAULT,
	SCAN_MODE_COLOR,
	SCAN_MODE_GRAY,
	SCAN_MODE_LINEART
} ScanMode;

struct _ScanOptions {
	GTypeInstance parent_instance;
	volatile int ref_count;
	ScanOptionsPrivate * priv;
	gint dpi;
	ScanMode scan_mode;
	gint depth;
	ScanType type;
	gint paper_width;
	gint paper_height;
	gint brightness;
	gint contrast;
};

struct _ScanOptionsClass {
	GTypeClass parent_class;
	void (*finalize) (ScanOptions *self);
};

struct _Block1Data {
	int _ref_count_;
	UserInterface* self;
	GtkWindow* dialog;
};

struct _ProgressBarDialog {
	GtkWindow parent_instance;
	ProgressBarDialogPrivate * priv;
};

struct _ProgressBarDialogClass {
	GtkWindowClass parent_class;
};

struct _ProgressBarDialogPrivate {
	GtkProgressBar* bar;
};

struct _PageIcon {
	GtkDrawingArea parent_instance;
	PageIconPrivate * priv;
};

struct _PageIconClass {
	GtkDrawingAreaClass parent_class;
};

struct _PageIconPrivate {
	gchar* text;
	gdouble r;
	gdouble g;
	gdouble b;
};


static gpointer user_interface_parent_class = NULL;
static gpointer progress_bar_dialog_parent_class = NULL;
static gpointer page_icon_parent_class = NULL;

GType user_interface_get_type (void) G_GNUC_CONST;
GType progress_bar_dialog_get_type (void) G_GNUC_CONST;
gpointer book_ref (gpointer instance);
void book_unref (gpointer instance);
GParamSpec* param_spec_book (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_book (GValue* value, gpointer v_object);
void value_take_book (GValue* value, gpointer v_object);
gpointer value_get_book (const GValue* value);
GType book_get_type (void) G_GNUC_CONST;
gpointer autosave_manager_ref (gpointer instance);
void autosave_manager_unref (gpointer instance);
GParamSpec* param_spec_autosave_manager (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_autosave_manager (GValue* value, gpointer v_object);
void value_take_autosave_manager (GValue* value, gpointer v_object);
gpointer value_get_autosave_manager (const GValue* value);
GType autosave_manager_get_type (void) G_GNUC_CONST;
GType book_view_get_type (void) G_GNUC_CONST;
GType scan_direction_get_type (void) G_GNUC_CONST;
#define USER_INTERFACE_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TYPE_USER_INTERFACE, UserInterfacePrivate))
enum  {
	USER_INTERFACE_DUMMY_PROPERTY,
	USER_INTERFACE_BOOK,
	USER_INTERFACE_SELECTED_PAGE,
	USER_INTERFACE_DEFAULT_FILE_NAME,
	USER_INTERFACE_SCANNING,
	USER_INTERFACE_BRIGHTNESS,
	USER_INTERFACE_CONTRAST,
	USER_INTERFACE_QUALITY,
	USER_INTERFACE_SELECTED_DEVICE
};
Book* user_interface_get_book (UserInterface* self);
gpointer page_ref (gpointer instance);
void page_unref (gpointer instance);
GParamSpec* param_spec_page (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_page (GValue* value, gpointer v_object);
void value_take_page (GValue* value, gpointer v_object);
gpointer value_get_page (const GValue* value);
GType page_get_type (void) G_GNUC_CONST;
static void user_interface_page_added_cb (UserInterface* self, Book* book, Page* page);
static void _user_interface_page_added_cb_book_page_added (Book* _sender, Page* page, gpointer self);
static void user_interface_reordered_cb (UserInterface* self, Book* book);
static void _user_interface_reordered_cb_book_reordered (Book* _sender, gpointer self);
static void user_interface_page_removed_cb (UserInterface* self, Book* book, Page* page);
static void _user_interface_page_removed_cb_book_page_removed (Book* _sender, Page* page, gpointer self);
#define USER_INTERFACE_DEFAULT_TEXT_DPI 150
#define USER_INTERFACE_DEFAULT_PHOTO_DPI 300
void user_interface_new_document_activate_cb (UserInterface* self);
static void _user_interface_new_document_activate_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self);
void user_interface_reorder_document_activate_cb (UserInterface* self);
static void _user_interface_reorder_document_activate_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self);
void user_interface_save_document_activate_cb (UserInterface* self);
static void _user_interface_save_document_activate_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self);
void user_interface_save_as_document_activate_cb (UserInterface* self);
static void _user_interface_save_as_document_activate_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self);
void user_interface_email_document_activate_cb (UserInterface* self);
static void _user_interface_email_document_activate_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self);
void user_interface_print_document_activate_cb (UserInterface* self);
static void _user_interface_print_document_activate_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self);
void user_interface_preferences_activate_cb (UserInterface* self);
static void _user_interface_preferences_activate_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self);
void user_interface_help_contents_activate_cb (UserInterface* self);
static void _user_interface_help_contents_activate_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self);
void user_interface_about_activate_cb (UserInterface* self);
static void _user_interface_about_activate_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self);
void user_interface_quit_activate_cb (UserInterface* self);
static void _user_interface_quit_activate_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self);
UserInterface* user_interface_new (void);
UserInterface* user_interface_construct (GType object_type);
Book* book_new (void);
Book* book_construct (GType object_type);
static void user_interface_set_book (UserInterface* self, Book* value);
static void user_interface_load (UserInterface* self);
AutosaveManager* autosave_manager_new (void);
AutosaveManager* autosave_manager_construct (GType object_type);
void autosave_manager_set_book (AutosaveManager* self, Book* value);
void autosave_manager_load (AutosaveManager* self);
guint book_get_n_pages (Book* self);
static void user_interface_add_default_page (UserInterface* self);
void book_set_needs_saving (Book* self, gboolean value);
Page* book_get_page (Book* self, gint page_number);
void book_view_set_selected_page (BookView* self, Page* value);
static void user_interface_needs_saving_cb (UserInterface* self, Book* book);
static void _user_interface_needs_saving_cb_book_needs_saving_changed (Book* _sender, gpointer self);
static gboolean user_interface_find_scan_device (UserInterface* self, const gchar* device, GtkTreeIter* iter);
static void user_interface_show_error_dialog (UserInterface* self, const gchar* error_title, const gchar* error_text);
void user_interface_authorize (UserInterface* self, const gchar* resource, gchar** username, gchar** password);
static void user_interface_device_combo_changed_cb (UserInterface* self, GtkWidget* widget);
gchar* user_interface_get_selected_device (UserInterface* self);
static void _user_interface_device_combo_changed_cb_gtk_combo_box_changed (GtkComboBox* _sender, gpointer self);
static void user_interface_update_info_bar (UserInterface* self);
gpointer scan_device_ref (gpointer instance);
void scan_device_unref (gpointer instance);
GParamSpec* param_spec_scan_device (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_scan_device (GValue* value, gpointer v_object);
void value_take_scan_device (GValue* value, gpointer v_object);
gpointer value_get_scan_device (const GValue* value);
GType scan_device_get_type (void) G_GNUC_CONST;
void user_interface_set_scan_devices (UserInterface* self, GList* devices);
Page* page_new (gint width, gint height, gint dpi, ScanDirection scan_direction);
Page* page_construct (GType object_type, gint width, gint height, gint dpi, ScanDirection scan_direction);
void book_append_page (Book* self, Page* page);
static void user_interface_on_file_type_changed (UserInterface* self, GtkTreeSelection* selection);
static gchar* user_interface_get_selected_extension (UserInterface* self, GtkTreeSelection* selection);
static gchar* user_interface_choose_file_location (UserInterface* self);
const gchar* user_interface_get_default_file_name (UserInterface* self);
static void _user_interface_on_file_type_changed_gtk_tree_selection_changed (GtkTreeSelection* _sender, gpointer self);
static gboolean user_interface_save_document (UserInterface* self, gboolean force_choose_location);
void user_interface_show_progress_dialog (UserInterface* self);
void book_save (Book* self, const gchar* type, gint quality, GFile* file, GError** error);
gint user_interface_get_quality (UserInterface* self);
void user_interface_hide_progress_dialog (UserInterface* self);
void user_interface_show_error (UserInterface* self, const gchar* error_title, const gchar* error_text, gboolean change_scanner_hint);
static gboolean user_interface_prompt_to_save (UserInterface* self, const gchar* title, const gchar* discard_label);
gboolean book_get_needs_saving (Book* self);
static void user_interface_clear_document (UserInterface* self);
void book_clear (Book* self);
static void user_interface_new_document (UserInterface* self);
gboolean user_interface_get_scanning (UserInterface* self);
static void user_interface_new_button_clicked_cb (UserInterface* self, GtkWidget* widget);
static void _user_interface_new_button_clicked_cb_gtk_button_clicked (GtkButton* _sender, gpointer self);
static void user_interface_set_document_hint (UserInterface* self, const gchar* document_hint, gboolean save);
static void user_interface_text_menuitem_toggled_cb (UserInterface* self, GtkCheckMenuItem* widget);
static void _user_interface_text_menuitem_toggled_cb_gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self);
static void user_interface_photo_menuitem_toggled_cb (UserInterface* self, GtkCheckMenuItem* widget);
static void _user_interface_photo_menuitem_toggled_cb_gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self);
GType scan_type_get_type (void) G_GNUC_CONST;
static void user_interface_set_page_side (UserInterface* self, ScanType page_side);
static void user_interface_set_paper_size (UserInterface* self, gint width, gint height);
static gint user_interface_get_text_dpi (UserInterface* self);
static gint user_interface_get_photo_dpi (UserInterface* self);
static ScanType user_interface_get_page_side (UserInterface* self);
static gboolean user_interface_get_paper_size (UserInterface* self, gint* width, gint* height);
gpointer scan_options_ref (gpointer instance);
void scan_options_unref (gpointer instance);
GParamSpec* param_spec_scan_options (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_scan_options (GValue* value, gpointer v_object);
void value_take_scan_options (GValue* value, gpointer v_object);
gpointer value_get_scan_options (const GValue* value);
GType scan_options_get_type (void) G_GNUC_CONST;
static ScanOptions* user_interface_make_scan_options (UserInterface* self);
ScanOptions* scan_options_new (void);
ScanOptions* scan_options_construct (GType object_type);
GType scan_mode_get_type (void) G_GNUC_CONST;
gint user_interface_get_brightness (UserInterface* self);
gint user_interface_get_contrast (UserInterface* self);
static void user_interface_scan_button_clicked_cb (UserInterface* self, GtkWidget* widget);
static void _user_interface_scan_button_clicked_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void user_interface_stop_scan_button_clicked_cb (UserInterface* self, GtkWidget* widget);
static void _user_interface_stop_scan_button_clicked_cb_gtk_button_clicked (GtkButton* _sender, gpointer self);
static void user_interface_continuous_scan_button_clicked_cb (UserInterface* self, GtkWidget* widget);
static void _user_interface_continuous_scan_button_clicked_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void user_interface_preferences_button_clicked_cb (UserInterface* self, GtkWidget* widget);
static void _user_interface_preferences_button_clicked_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static gboolean user_interface_preferences_dialog_delete_event_cb (UserInterface* self, GtkWidget* widget, GdkEventAny* event);
static gboolean _user_interface_preferences_dialog_delete_event_cb_gtk_widget_delete_event (GtkWidget* _sender, GdkEventAny* event, gpointer self);
static void user_interface_preferences_dialog_response_cb (UserInterface* self, GtkWidget* widget, gint response_id);
static void _user_interface_preferences_dialog_response_cb_gtk_dialog_response (GtkDialog* _sender, gint response_id, gpointer self);
static void user_interface_update_page_menu (UserInterface* self);
Page* book_view_get_selected_page (BookView* self);
guint book_get_page_index (Book* self, Page* page);
static void user_interface_page_selected_cb (UserInterface* self, BookView* view, Page* page);
gboolean page_get_has_crop (Page* self);
const gchar* page_get_crop_name (Page* self);
static void user_interface_show_page_cb (UserInterface* self, BookView* view, Page* page);
gchar* get_temporary_filename (const gchar* prefix, const gchar* extension);
void page_save (Page* self, const gchar* type, gint quality, GFile* file, GError** error);
static void user_interface_show_page_menu_cb (UserInterface* self, BookView* view);
static void user_interface_rotate_left_button_clicked_cb (UserInterface* self, GtkWidget* widget);
void page_rotate_left (Page* self);
static void _user_interface_rotate_left_button_clicked_cb_gtk_button_clicked (GtkButton* _sender, gpointer self);
static void user_interface_rotate_right_button_clicked_cb (UserInterface* self, GtkWidget* widget);
void page_rotate_right (Page* self);
static void _user_interface_rotate_right_button_clicked_cb_gtk_button_clicked (GtkButton* _sender, gpointer self);
static void user_interface_set_crop (UserInterface* self, const gchar* crop_name);
void page_set_no_crop (Page* self);
gint page_get_width (Page* self);
gint page_get_height (Page* self);
void page_set_custom_crop (Page* self, gint width, gint height);
void page_move_crop (Page* self, gint x, gint y);
void page_set_named_crop (Page* self, const gchar* name);
static void user_interface_no_crop_menuitem_toggled_cb (UserInterface* self, GtkCheckMenuItem* widget);
static void _user_interface_no_crop_menuitem_toggled_cb_gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self);
static void user_interface_custom_crop_menuitem_toggled_cb (UserInterface* self, GtkCheckMenuItem* widget);
static void _user_interface_custom_crop_menuitem_toggled_cb_gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self);
static void user_interface_crop_button_toggled_cb (UserInterface* self, GtkToggleButton* widget);
static void _user_interface_crop_button_toggled_cb_gtk_toggle_button_toggled (GtkToggleButton* _sender, gpointer self);
static void user_interface_crop_toolbutton_toggled_cb (UserInterface* self, GtkToggleToolButton* widget);
static void _user_interface_crop_toolbutton_toggled_cb_gtk_toggle_tool_button_toggled (GtkToggleToolButton* _sender, gpointer self);
static void user_interface_four_by_six_menuitem_toggled_cb (UserInterface* self, GtkCheckMenuItem* widget);
static void _user_interface_four_by_six_menuitem_toggled_cb_gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self);
static void user_interface_legal_menuitem_toggled_cb (UserInterface* self, GtkCheckMenuItem* widget);
static void _user_interface_legal_menuitem_toggled_cb_gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self);
static void user_interface_letter_menuitem_toggled_cb (UserInterface* self, GtkCheckMenuItem* widget);
static void _user_interface_letter_menuitem_toggled_cb_gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self);
static void user_interface_a6_menuitem_toggled_cb (UserInterface* self, GtkCheckMenuItem* widget);
static void _user_interface_a6_menuitem_toggled_cb_gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self);
static void user_interface_a5_menuitem_toggled_cb (UserInterface* self, GtkCheckMenuItem* widget);
static void _user_interface_a5_menuitem_toggled_cb_gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self);
static void user_interface_a4_menuitem_toggled_cb (UserInterface* self, GtkCheckMenuItem* widget);
static void _user_interface_a4_menuitem_toggled_cb_gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self);
static void user_interface_crop_rotate_menuitem_activate_cb (UserInterface* self, GtkWidget* widget);
void page_rotate_crop (Page* self);
static void _user_interface_crop_rotate_menuitem_activate_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void user_interface_page_move_left_menuitem_activate_cb (UserInterface* self, GtkWidget* widget);
void book_move_page (Book* self, Page* page, guint location);
static void _user_interface_page_move_left_menuitem_activate_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void user_interface_page_move_right_menuitem_activate_cb (UserInterface* self, GtkWidget* widget);
static void _user_interface_page_move_right_menuitem_activate_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void user_interface_page_delete_menuitem_activate_cb (UserInterface* self, GtkWidget* widget);
Book* book_view_get_book (BookView* self);
void book_delete_page (Book* self, Page* page);
static void _user_interface_page_delete_menuitem_activate_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void user_interface_reorder_document (UserInterface* self);
static Block1Data* block1_data_ref (Block1Data* _data1_);
static void block1_data_unref (void * _userdata_);
static gboolean __lambda4_ (Block1Data* _data1_, GdkEventKey* e);
static gboolean ___lambda4__gtk_widget_key_press_event (GtkWidget* _sender, GdkEventKey* event, gpointer self);
static GtkButton* user_interface_make_reorder_button (UserInterface* self, const gchar* text, const gchar* items);
static void __lambda5_ (Block1Data* _data1_);
void book_combine_sides (Book* self);
static void ___lambda5__gtk_button_clicked (GtkButton* _sender, gpointer self);
static void __lambda6_ (Block1Data* _data1_);
void book_combine_sides_reverse (Book* self);
static void ___lambda6__gtk_button_clicked (GtkButton* _sender, gpointer self);
static void __lambda7_ (Block1Data* _data1_);
void book_reverse (Book* self);
static void ___lambda7__gtk_button_clicked (GtkButton* _sender, gpointer self);
static void __lambda8_ (Block1Data* _data1_);
static void ___lambda8__gtk_button_clicked (GtkButton* _sender, gpointer self);
static void user_interface_reorder_menuitem_activate_cb (UserInterface* self, GtkWidget* widget);
static void _user_interface_reorder_menuitem_activate_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static GtkBox* user_interface_make_reorder_box (UserInterface* self, const gchar* items);
GType page_icon_get_type (void) G_GNUC_CONST;
PageIcon* page_icon_new (const gchar* text, gdouble r, gdouble g, gdouble b);
PageIcon* page_icon_construct (GType object_type, const gchar* text, gdouble r, gdouble g, gdouble b);
static void user_interface_save_file_button_clicked_cb (UserInterface* self, GtkWidget* widget);
static void _user_interface_save_file_button_clicked_cb_gtk_button_clicked (GtkButton* _sender, gpointer self);
static void user_interface_copy_to_clipboard_button_clicked_cb (UserInterface* self, GtkWidget* widget);
void page_copy_to_clipboard (Page* self, GtkWindow* window);
static void _user_interface_copy_to_clipboard_button_clicked_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void user_interface_save_as_file_button_clicked_cb (UserInterface* self, GtkWidget* widget);
static void _user_interface_save_as_file_button_clicked_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void user_interface_draw_page (UserInterface* self, GtkPrintOperation* operation, GtkPrintContext* print_context, gint page_number);
gboolean page_get_is_landscape (Page* self);
gint page_get_dpi (Page* self);
GdkPixbuf* page_get_image (Page* self, gboolean apply_crop);
static void user_interface_email_button_clicked_cb (UserInterface* self, GtkWidget* widget);
static void _user_interface_email_button_clicked_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void user_interface_print_document (UserInterface* self);
static void _user_interface_draw_page_gtk_print_operation_draw_page (GtkPrintOperation* _sender, GtkPrintContext* context, gint page_nr, gpointer self);
static void user_interface_print_button_clicked_cb (UserInterface* self, GtkWidget* widget);
static void _user_interface_print_button_clicked_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void user_interface_launch_help (UserInterface* self);
static void user_interface_help_contents_menuitem_activate_cb (UserInterface* self, GtkWidget* widget);
static void _user_interface_help_contents_menuitem_activate_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void user_interface_show_about (UserInterface* self);
static void user_interface_about_menuitem_activate_cb (UserInterface* self, GtkWidget* widget);
static void _user_interface_about_menuitem_activate_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static gboolean user_interface_on_quit (UserInterface* self);
static void user_interface_save_state (UserInterface* self, gboolean force);
void autosave_manager_cleanup (AutosaveManager* self);
static void user_interface_quit_menuitem_activate_cb (UserInterface* self, GtkWidget* widget);
static void _user_interface_quit_menuitem_activate_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static gboolean user_interface_simple_scan_window_configure_event_cb (UserInterface* self, GtkWidget* widget, GdkEventConfigure* event);
static gboolean _user_interface_simple_scan_window_configure_event_cb_gtk_widget_configure_event (GtkWidget* _sender, GdkEventConfigure* event, gpointer self);
static void user_interface_info_bar_response_cb (UserInterface* self, GtkInfoBar* widget, gint response_id);
static gboolean user_interface_simple_scan_window_window_state_event_cb (UserInterface* self, GtkWidget* widget, GdkEventWindowState* event);
static gboolean _user_interface_simple_scan_window_window_state_event_cb_gtk_widget_window_state_event (GtkWidget* _sender, GdkEventWindowState* event, gpointer self);
static gboolean user_interface_window_delete_event_cb (UserInterface* self, GtkWidget* widget, GdkEventAny* event);
static gboolean _user_interface_window_delete_event_cb_gtk_widget_delete_event (GtkWidget* _sender, GdkEventAny* event, gpointer self);
static void user_interface_page_size_changed_cb (UserInterface* self, Page* page);
static void user_interface_page_scan_direction_changed_cb (UserInterface* self, Page* page);
ScanDirection page_get_scan_direction (Page* self);
static void _user_interface_page_size_changed_cb_page_size_changed (Page* _sender, gpointer self);
static void _user_interface_page_scan_direction_changed_cb_page_scan_direction_changed (Page* _sender, gpointer self);
static void user_interface_set_dpi_combo (UserInterface* self, GtkComboBox* combo, gint default_dpi, gint current_dpi);
static gboolean user_interface_get_shell_shows_menubar (UserInterface* self);
static void _user_interface_info_bar_response_cb_gtk_info_bar_response (GtkInfoBar* _sender, gint response_id, gpointer self);
static void __lambda10_ (UserInterface* self);
static void ___lambda10__gtk_combo_box_changed (GtkComboBox* _sender, gpointer self);
static void __lambda11_ (UserInterface* self);
static void ___lambda11__gtk_combo_box_changed (GtkComboBox* _sender, gpointer self);
static void __lambda12_ (UserInterface* self);
static void ___lambda12__gtk_combo_box_changed (GtkComboBox* _sender, gpointer self);
static void __lambda13_ (UserInterface* self);
static void ___lambda13__gtk_combo_box_changed (GtkComboBox* _sender, gpointer self);
void user_interface_set_brightness (UserInterface* self, gint value);
static void __lambda14_ (UserInterface* self);
static void ___lambda14__gtk_adjustment_value_changed (GtkAdjustment* _sender, gpointer self);
void user_interface_set_contrast (UserInterface* self, gint value);
static void __lambda15_ (UserInterface* self);
static void ___lambda15__gtk_adjustment_value_changed (GtkAdjustment* _sender, gpointer self);
void user_interface_set_quality (UserInterface* self, gint value);
static void __lambda16_ (UserInterface* self);
static void ___lambda16__gtk_adjustment_value_changed (GtkAdjustment* _sender, gpointer self);
BookView* book_view_new (Book* book);
BookView* book_view_construct (GType object_type, Book* book);
static void _user_interface_page_selected_cb_book_view_page_selected (BookView* _sender, Page* page, gpointer self);
static void _user_interface_show_page_cb_book_view_show_page (BookView* _sender, Page* page, gpointer self);
static void _user_interface_show_page_menu_cb_book_view_show_menu (BookView* _sender, gpointer self);
static void user_interface_load_state (UserInterface* self);
ProgressBarDialog* progress_bar_dialog_new (GtkApplicationWindow* parent, const gchar* title);
ProgressBarDialog* progress_bar_dialog_construct (GType object_type, GtkApplicationWindow* parent, const gchar* title);
static void user_interface_book_saving_cb (UserInterface* self, gint page_number);
static void _user_interface_book_saving_cb_book_saving (Book* _sender, gint i, gpointer self);
static gchar* user_interface_get_state_filename (UserInterface* self);
static gint user_interface_state_get_integer (UserInterface* self, GKeyFile* f, const gchar* group_name, const gchar* key, gint _default_);
static gboolean user_interface_state_get_boolean (UserInterface* self, GKeyFile* f, const gchar* group_name, const gchar* key, gboolean _default_);
static gchar* user_interface_state_get_string (UserInterface* self, GKeyFile* f, const gchar* group_name, const gchar* key, const gchar* _default_);
static gboolean ___lambda9_ (UserInterface* self);
static gboolean ____lambda9__gsource_func (gpointer self);
static gboolean ___lambda17_ (UserInterface* self);
static gboolean ____lambda17__gsource_func (gpointer self);
void progress_bar_dialog_set_fraction (ProgressBarDialog* self, gdouble value);
void progress_bar_dialog_set_message (ProgressBarDialog* self, const gchar* value);
void user_interface_start (UserInterface* self);
Page* user_interface_get_selected_page (UserInterface* self);
void user_interface_set_selected_page (UserInterface* self, Page* value);
void user_interface_set_default_file_name (UserInterface* self, const gchar* value);
void user_interface_set_scanning (UserInterface* self, gboolean value);
void user_interface_set_selected_device (UserInterface* self, const gchar* value);
static void g_cclosure_user_marshal_VOID__STRING_SCAN_OPTIONS (GClosure * closure, GValue * return_value, guint n_param_values, const GValue * param_values, gpointer invocation_hint, gpointer marshal_data);
static void g_cclosure_user_marshal_VOID__STRING_INT (GClosure * closure, GValue * return_value, guint n_param_values, const GValue * param_values, gpointer invocation_hint, gpointer marshal_data);
static void user_interface_finalize (GObject* obj);
static void _vala_user_interface_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_user_interface_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);
#define PROGRESS_BAR_DIALOG_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TYPE_PROGRESS_BAR_DIALOG, ProgressBarDialogPrivate))
enum  {
	PROGRESS_BAR_DIALOG_DUMMY_PROPERTY,
	PROGRESS_BAR_DIALOG_FRACTION,
	PROGRESS_BAR_DIALOG_MESSAGE
};
gdouble progress_bar_dialog_get_fraction (ProgressBarDialog* self);
const gchar* progress_bar_dialog_get_message (ProgressBarDialog* self);
static void progress_bar_dialog_finalize (GObject* obj);
static void _vala_progress_bar_dialog_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_progress_bar_dialog_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);
#define PAGE_ICON_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TYPE_PAGE_ICON, PageIconPrivate))
enum  {
	PAGE_ICON_DUMMY_PROPERTY
};
#define PAGE_ICON_MINIMUM_WIDTH 20
static void page_icon_real_get_preferred_width (GtkWidget* base, gint* minimum_width, gint* natural_width);
static void page_icon_real_get_preferred_height (GtkWidget* base, gint* minimum_height, gint* natural_height);
static void page_icon_real_get_preferred_height_for_width (GtkWidget* base, gint width, gint* minimum_height, gint* natural_height);
static void page_icon_real_get_preferred_width_for_height (GtkWidget* base, gint height, gint* minimum_width, gint* natural_width);
static gboolean page_icon_real_draw (GtkWidget* base, cairo_t* c);
static void page_icon_finalize (GObject* obj);
static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func);

static const GActionEntry USER_INTERFACE_action_entries[10] = {{"new_document", _user_interface_new_document_activate_cb_gsimple_action_activate_callback}, {"reorder", _user_interface_reorder_document_activate_cb_gsimple_action_activate_callback}, {"save", _user_interface_save_document_activate_cb_gsimple_action_activate_callback}, {"save_as", _user_interface_save_as_document_activate_cb_gsimple_action_activate_callback}, {"email", _user_interface_email_document_activate_cb_gsimple_action_activate_callback}, {"print", _user_interface_print_document_activate_cb_gsimple_action_activate_callback}, {"preferences", _user_interface_preferences_activate_cb_gsimple_action_activate_callback}, {"help", _user_interface_help_contents_activate_cb_gsimple_action_activate_callback}, {"about", _user_interface_about_activate_cb_gsimple_action_activate_callback}, {"quit", _user_interface_quit_activate_cb_gsimple_action_activate_callback}};

static void _user_interface_page_added_cb_book_page_added (Book* _sender, Page* page, gpointer self) {
#line 286 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_page_added_cb ((UserInterface*) self, _sender, page);
#line 690 "ui.c"
}


static void _user_interface_reordered_cb_book_reordered (Book* _sender, gpointer self) {
#line 287 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_reordered_cb ((UserInterface*) self, _sender);
#line 697 "ui.c"
}


static void _user_interface_page_removed_cb_book_page_removed (Book* _sender, Page* page, gpointer self) {
#line 288 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_page_removed_cb ((UserInterface*) self, _sender, page);
#line 704 "ui.c"
}


static void _user_interface_new_document_activate_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self) {
#line 19 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_new_document_activate_cb ((UserInterface*) self);
#line 711 "ui.c"
}


static void _user_interface_reorder_document_activate_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self) {
#line 19 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_reorder_document_activate_cb ((UserInterface*) self);
#line 718 "ui.c"
}


static void _user_interface_save_document_activate_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self) {
#line 19 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_save_document_activate_cb ((UserInterface*) self);
#line 725 "ui.c"
}


static void _user_interface_save_as_document_activate_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self) {
#line 19 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_save_as_document_activate_cb ((UserInterface*) self);
#line 732 "ui.c"
}


static void _user_interface_email_document_activate_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self) {
#line 19 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_email_document_activate_cb ((UserInterface*) self);
#line 739 "ui.c"
}


static void _user_interface_print_document_activate_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self) {
#line 19 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_print_document_activate_cb ((UserInterface*) self);
#line 746 "ui.c"
}


static void _user_interface_preferences_activate_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self) {
#line 19 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_preferences_activate_cb ((UserInterface*) self);
#line 753 "ui.c"
}


static void _user_interface_help_contents_activate_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self) {
#line 19 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_help_contents_activate_cb ((UserInterface*) self);
#line 760 "ui.c"
}


static void _user_interface_about_activate_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self) {
#line 19 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_about_activate_cb ((UserInterface*) self);
#line 767 "ui.c"
}


static void _user_interface_quit_activate_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self) {
#line 19 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_quit_activate_cb ((UserInterface*) self);
#line 774 "ui.c"
}


static void _user_interface_needs_saving_cb_book_needs_saving_changed (Book* _sender, gpointer self) {
#line 281 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_needs_saving_cb ((UserInterface*) self, _sender);
#line 781 "ui.c"
}


UserInterface* user_interface_construct (GType object_type) {
	UserInterface * self = NULL;
	GSettings* _tmp0_ = NULL;
	Book* _tmp1_ = NULL;
	Book* _tmp2_ = NULL;
	Book* _tmp3_ = NULL;
	Book* _tmp4_ = NULL;
	Book* _tmp5_ = NULL;
	AutosaveManager* _tmp6_ = NULL;
	AutosaveManager* _tmp7_ = NULL;
	Book* _tmp8_ = NULL;
	AutosaveManager* _tmp9_ = NULL;
	Book* _tmp10_ = NULL;
	guint _tmp11_ = 0U;
	guint _tmp12_ = 0U;
	Book* _tmp18_ = NULL;
#line 259 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self = (UserInterface*) g_object_new (object_type, NULL);
#line 261 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = g_settings_new ("org.gnome.SimpleScan");
#line 261 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->settings);
#line 261 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->settings = _tmp0_;
#line 263 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = book_new ();
#line 263 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 263 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_set_book (self, _tmp2_);
#line 263 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_book_unref0 (_tmp2_);
#line 264 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = self->priv->_book;
#line 264 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_object (_tmp3_, "page-added", (GCallback) _user_interface_page_added_cb_book_page_added, self, 0);
#line 265 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = self->priv->_book;
#line 265 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_object (_tmp4_, "reordered", (GCallback) _user_interface_reordered_cb_book_reordered, self, 0);
#line 266 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = self->priv->_book;
#line 266 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_object (_tmp5_, "page-removed", (GCallback) _user_interface_page_removed_cb_book_page_removed, self, 0);
#line 268 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_load (self);
#line 270 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp6_ = autosave_manager_new ();
#line 270 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_autosave_manager_unref0 (self->priv->autosave_manager);
#line 270 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->autosave_manager = _tmp6_;
#line 271 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp7_ = self->priv->autosave_manager;
#line 271 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp8_ = self->priv->_book;
#line 271 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	autosave_manager_set_book (_tmp7_, _tmp8_);
#line 272 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp9_ = self->priv->autosave_manager;
#line 272 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	autosave_manager_load (_tmp9_);
#line 274 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp10_ = self->priv->_book;
#line 274 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp11_ = book_get_n_pages (_tmp10_);
#line 274 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp12_ = _tmp11_;
#line 274 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp12_ == ((guint) 0)) {
#line 855 "ui.c"
		Book* _tmp13_ = NULL;
#line 276 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_add_default_page (self);
#line 277 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp13_ = self->priv->_book;
#line 277 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		book_set_needs_saving (_tmp13_, FALSE);
#line 863 "ui.c"
	} else {
		BookView* _tmp14_ = NULL;
		Book* _tmp15_ = NULL;
		Page* _tmp16_ = NULL;
		Page* _tmp17_ = NULL;
#line 280 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp14_ = self->priv->book_view;
#line 280 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp15_ = self->priv->_book;
#line 280 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp16_ = book_get_page (_tmp15_, 0);
#line 280 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp17_ = _tmp16_;
#line 280 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		book_view_set_selected_page (_tmp14_, _tmp17_);
#line 280 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_page_unref0 (_tmp17_);
#line 881 "ui.c"
	}
#line 281 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp18_ = self->priv->_book;
#line 281 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_object (_tmp18_, "needs-saving-changed", (GCallback) _user_interface_needs_saving_cb_book_needs_saving_changed, self, 0);
#line 259 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return self;
#line 889 "ui.c"
}


UserInterface* user_interface_new (void) {
#line 259 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return user_interface_construct (TYPE_USER_INTERFACE);
#line 896 "ui.c"
}


static gboolean user_interface_find_scan_device (UserInterface* self, const gchar* device, GtkTreeIter* iter) {
	GtkTreeIter _vala_iter = {0};
	gboolean result = FALSE;
	gboolean have_iter = FALSE;
	GtkListStore* _tmp0_ = NULL;
	GtkTreeIter _tmp1_ = {0};
	gboolean _tmp2_ = FALSE;
#line 291 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 291 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (device != NULL, FALSE);
#line 293 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	have_iter = FALSE;
#line 295 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->device_model;
#line 295 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = gtk_tree_model_get_iter_first ((GtkTreeModel*) _tmp0_, &_tmp1_);
#line 295 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_vala_iter = _tmp1_;
#line 295 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp2_) {
#line 921 "ui.c"
		{
			gboolean _tmp3_ = FALSE;
#line 297 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp3_ = TRUE;
#line 297 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			while (TRUE) {
#line 928 "ui.c"
				gchar* d = NULL;
				GtkListStore* _tmp8_ = NULL;
				GtkTreeIter _tmp9_ = {0};
				const gchar* _tmp10_ = NULL;
				const gchar* _tmp11_ = NULL;
#line 297 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				if (!_tmp3_) {
#line 936 "ui.c"
					gboolean _tmp4_ = FALSE;
					gboolean _tmp5_ = FALSE;
#line 303 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp5_ = have_iter;
#line 303 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					if (!_tmp5_) {
#line 943 "ui.c"
						GtkListStore* _tmp6_ = NULL;
						gboolean _tmp7_ = FALSE;
#line 303 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						_tmp6_ = self->priv->device_model;
#line 303 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						_tmp7_ = gtk_tree_model_iter_next ((GtkTreeModel*) _tmp6_, &_vala_iter);
#line 303 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						_tmp4_ = _tmp7_;
#line 952 "ui.c"
					} else {
#line 303 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						_tmp4_ = FALSE;
#line 956 "ui.c"
					}
#line 303 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					if (!_tmp4_) {
#line 303 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						break;
#line 962 "ui.c"
					}
				}
#line 297 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp3_ = FALSE;
#line 300 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp8_ = self->priv->device_model;
#line 300 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp9_ = _vala_iter;
#line 300 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				gtk_tree_model_get ((GtkTreeModel*) _tmp8_, &_tmp9_, 0, &d, -1, -1);
#line 301 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp10_ = d;
#line 301 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp11_ = device;
#line 301 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				if (g_strcmp0 (_tmp10_, _tmp11_) == 0) {
#line 302 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					have_iter = TRUE;
#line 981 "ui.c"
				}
#line 297 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_g_free0 (d);
#line 985 "ui.c"
			}
		}
	}
#line 306 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = have_iter;
#line 306 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (iter) {
#line 306 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		*iter = _vala_iter;
#line 995 "ui.c"
	}
#line 306 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 999 "ui.c"
}


static void user_interface_show_error_dialog (UserInterface* self, const gchar* error_title, const gchar* error_text) {
	GtkMessageDialog* dialog = NULL;
	const gchar* _tmp0_ = NULL;
	GtkMessageDialog* _tmp1_ = NULL;
	const gchar* _tmp2_ = NULL;
	const gchar* _tmp3_ = NULL;
#line 309 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 309 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (error_title != NULL);
#line 309 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (error_text != NULL);
#line 311 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = error_title;
#line 311 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = (GtkMessageDialog*) gtk_message_dialog_new ((GtkWindow*) self, GTK_DIALOG_MODAL, GTK_MESSAGE_WARNING, GTK_BUTTONS_NONE, "%s", _tmp0_);
#line 311 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp1_);
#line 311 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	dialog = _tmp1_;
#line 316 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _ ("_Close");
#line 316 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_dialog_add_button ((GtkDialog*) dialog, _tmp2_, 0);
#line 317 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = error_text;
#line 317 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_message_dialog_format_secondary_text (dialog, "%s", _tmp3_);
#line 318 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_destroy ((GtkWidget*) dialog);
#line 309 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (dialog);
#line 1035 "ui.c"
}


void user_interface_authorize (UserInterface* self, const gchar* resource, gchar** username, gchar** password) {
	gchar* _vala_username = NULL;
	gchar* _vala_password = NULL;
	gchar* description = NULL;
	const gchar* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
	GtkEntry* _tmp3_ = NULL;
	GtkEntry* _tmp4_ = NULL;
	GtkLabel* _tmp5_ = NULL;
	GtkDialog* _tmp6_ = NULL;
	GtkDialog* _tmp7_ = NULL;
	GtkDialog* _tmp8_ = NULL;
	GtkEntry* _tmp9_ = NULL;
	const gchar* _tmp10_ = NULL;
	const gchar* _tmp11_ = NULL;
	gchar* _tmp12_ = NULL;
	GtkEntry* _tmp13_ = NULL;
	const gchar* _tmp14_ = NULL;
	const gchar* _tmp15_ = NULL;
	gchar* _tmp16_ = NULL;
#line 321 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 321 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (resource != NULL);
#line 324 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = _ ("Username and password required to access '%s'");
#line 324 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = resource;
#line 324 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = g_strdup_printf (_tmp0_, _tmp1_);
#line 324 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	description = _tmp2_;
#line 326 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = self->priv->username_entry;
#line 326 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_entry_set_text (_tmp3_, "");
#line 327 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = self->priv->password_entry;
#line 327 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_entry_set_text (_tmp4_, "");
#line 328 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = self->priv->authorize_label;
#line 328 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_label_set_text (_tmp5_, description);
#line 330 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp6_ = self->priv->authorize_dialog;
#line 330 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp6_, TRUE);
#line 331 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp7_ = self->priv->authorize_dialog;
#line 331 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_dialog_run (_tmp7_);
#line 332 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp8_ = self->priv->authorize_dialog;
#line 332 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp8_, FALSE);
#line 334 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp9_ = self->priv->username_entry;
#line 334 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp10_ = gtk_entry_get_text (_tmp9_);
#line 334 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp11_ = _tmp10_;
#line 334 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp12_ = g_strdup (_tmp11_);
#line 334 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (_vala_username);
#line 334 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_vala_username = _tmp12_;
#line 335 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp13_ = self->priv->password_entry;
#line 335 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp14_ = gtk_entry_get_text (_tmp13_);
#line 335 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp15_ = _tmp14_;
#line 335 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp16_ = g_strdup (_tmp15_);
#line 335 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (_vala_password);
#line 335 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_vala_password = _tmp16_;
#line 321 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (description);
#line 321 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (username) {
#line 321 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		*username = _vala_username;
#line 1126 "ui.c"
	} else {
#line 321 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (_vala_username);
#line 1130 "ui.c"
	}
#line 321 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (password) {
#line 321 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		*password = _vala_password;
#line 1136 "ui.c"
	} else {
#line 321 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (_vala_password);
#line 1140 "ui.c"
	}
}


static void user_interface_device_combo_changed_cb (UserInterface* self, GtkWidget* widget) {
	gboolean _tmp0_ = FALSE;
	gchar* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
	gchar* _tmp3_ = NULL;
	gboolean _tmp4_ = FALSE;
#line 339 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 339 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 341 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->setting_devices;
#line 341 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp0_) {
#line 342 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return;
#line 1161 "ui.c"
	}
#line 343 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->user_selected_device = TRUE;
#line 344 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = user_interface_get_selected_device (self);
#line 344 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 344 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = _tmp2_;
#line 344 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = _tmp3_ != NULL;
#line 344 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (_tmp3_);
#line 344 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp4_) {
#line 1177 "ui.c"
		GSettings* _tmp5_ = NULL;
		gchar* _tmp6_ = NULL;
		gchar* _tmp7_ = NULL;
		gchar* _tmp8_ = NULL;
#line 345 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp5_ = self->priv->settings;
#line 345 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp6_ = user_interface_get_selected_device (self);
#line 345 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp7_ = _tmp6_;
#line 345 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp8_ = _tmp7_;
#line 345 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_settings_set_string (_tmp5_, "selected-device", _tmp8_);
#line 345 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (_tmp8_);
#line 1194 "ui.c"
	}
}


static void _user_interface_device_combo_changed_cb_gtk_combo_box_changed (GtkComboBox* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_device_combo_changed_cb ((UserInterface*) self, _sender);
#line 1202 "ui.c"
}


static void user_interface_update_info_bar (UserInterface* self) {
	GtkMessageType type = 0;
	gchar* title = NULL;
	gchar* text = NULL;
	gchar* image_id = NULL;
	gboolean show_close_button = FALSE;
	gboolean show_change_scanner_button = FALSE;
	gboolean _tmp0_ = FALSE;
	GtkInfoBar* _tmp15_ = NULL;
	GtkMessageType _tmp16_ = 0;
	GtkImage* _tmp17_ = NULL;
	const gchar* _tmp18_ = NULL;
	gchar* message = NULL;
	const gchar* _tmp19_ = NULL;
	const gchar* _tmp20_ = NULL;
	gchar* _tmp21_ = NULL;
	GtkLabel* _tmp22_ = NULL;
	const gchar* _tmp23_ = NULL;
	GtkButton* _tmp24_ = NULL;
	gboolean _tmp25_ = FALSE;
	GtkButton* _tmp26_ = NULL;
	gboolean _tmp27_ = FALSE;
	GtkInfoBar* _tmp28_ = NULL;
#line 348 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 352 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	show_close_button = FALSE;
#line 353 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	show_change_scanner_button = FALSE;
#line 355 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->have_error;
#line 355 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp0_) {
#line 1239 "ui.c"
		gchar* _tmp1_ = NULL;
		const gchar* _tmp2_ = NULL;
		gchar* _tmp3_ = NULL;
		const gchar* _tmp4_ = NULL;
		gchar* _tmp5_ = NULL;
		gboolean _tmp6_ = FALSE;
#line 357 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		type = GTK_MESSAGE_ERROR;
#line 358 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp1_ = g_strdup ("dialog-error");
#line 358 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (image_id);
#line 358 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		image_id = _tmp1_;
#line 359 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp2_ = self->priv->error_title;
#line 359 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp3_ = g_strdup (_tmp2_);
#line 359 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (title);
#line 359 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		title = _tmp3_;
#line 360 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp4_ = self->priv->error_text;
#line 360 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp5_ = g_strdup (_tmp4_);
#line 360 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (text);
#line 360 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		text = _tmp5_;
#line 361 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		show_close_button = TRUE;
#line 362 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp6_ = self->priv->error_change_scanner_hint;
#line 362 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		show_change_scanner_button = _tmp6_;
#line 1276 "ui.c"
	} else {
		GtkListStore* _tmp7_ = NULL;
		gint _tmp8_ = 0;
#line 364 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp7_ = self->priv->device_model;
#line 364 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp8_ = gtk_tree_model_iter_n_children ((GtkTreeModel*) _tmp7_, NULL);
#line 364 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (_tmp8_ == 0) {
#line 1286 "ui.c"
			gchar* _tmp9_ = NULL;
			const gchar* _tmp10_ = NULL;
			gchar* _tmp11_ = NULL;
			const gchar* _tmp12_ = NULL;
			gchar* _tmp13_ = NULL;
#line 366 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			type = GTK_MESSAGE_WARNING;
#line 367 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp9_ = g_strdup ("dialog-warning");
#line 367 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_g_free0 (image_id);
#line 367 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			image_id = _tmp9_;
#line 369 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp10_ = _ ("No scanners detected");
#line 369 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp11_ = g_strdup (_tmp10_);
#line 369 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_g_free0 (title);
#line 369 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			title = _tmp11_;
#line 371 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp12_ = _ ("Please check your scanner is connected and powered on");
#line 371 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp13_ = g_strdup (_tmp12_);
#line 371 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_g_free0 (text);
#line 371 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			text = _tmp13_;
#line 1316 "ui.c"
		} else {
			GtkInfoBar* _tmp14_ = NULL;
#line 375 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp14_ = self->priv->info_bar;
#line 375 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			gtk_widget_set_visible ((GtkWidget*) _tmp14_, FALSE);
#line 376 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_g_free0 (image_id);
#line 376 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_g_free0 (text);
#line 376 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_g_free0 (title);
#line 376 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			return;
#line 1331 "ui.c"
		}
	}
#line 379 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp15_ = self->priv->info_bar;
#line 379 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp16_ = type;
#line 379 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_info_bar_set_message_type (_tmp15_, _tmp16_);
#line 380 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp17_ = self->priv->info_bar_image;
#line 380 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp18_ = image_id;
#line 380 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_image_set_from_icon_name (_tmp17_, _tmp18_, GTK_ICON_SIZE_DIALOG);
#line 381 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp19_ = title;
#line 381 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp20_ = text;
#line 381 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp21_ = g_strdup_printf ("<big><b>%s</b></big>\n\n%s", _tmp19_, _tmp20_);
#line 381 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	message = _tmp21_;
#line 382 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp22_ = self->priv->info_bar_label;
#line 382 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp23_ = message;
#line 382 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_label_set_markup (_tmp22_, _tmp23_);
#line 383 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp24_ = self->priv->info_bar_close_button;
#line 383 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp25_ = show_close_button;
#line 383 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp24_, _tmp25_);
#line 384 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp26_ = self->priv->info_bar_change_scanner_button;
#line 384 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp27_ = show_change_scanner_button;
#line 384 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp26_, _tmp27_);
#line 385 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp28_ = self->priv->info_bar;
#line 385 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp28_, TRUE);
#line 348 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (message);
#line 348 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (image_id);
#line 348 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (text);
#line 348 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (title);
#line 1384 "ui.c"
}


static gpointer _scan_device_ref0 (gpointer self) {
#line 402 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return self ? scan_device_ref (self) : NULL;
#line 1391 "ui.c"
}


void user_interface_set_scan_devices (UserInterface* self, GList* devices) {
	gboolean have_selection = FALSE;
	gint index = 0;
	GtkTreeIter iter = {0};
	gboolean _tmp0_ = FALSE;
	GList* _tmp4_ = NULL;
	gboolean _tmp51_ = FALSE;
	gboolean _tmp52_ = FALSE;
#line 388 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 390 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	have_selection = FALSE;
#line 394 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->setting_devices = TRUE;
#line 397 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->user_selected_device;
#line 397 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp0_) {
#line 1413 "ui.c"
		GtkComboBox* _tmp1_ = NULL;
		gint _tmp2_ = 0;
		gint _tmp3_ = 0;
#line 398 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp1_ = self->priv->device_combo;
#line 398 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp2_ = gtk_combo_box_get_active (_tmp1_);
#line 398 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp3_ = _tmp2_;
#line 398 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		have_selection = _tmp3_ >= 0;
#line 1425 "ui.c"
	}
#line 401 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	index = 0;
#line 402 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = devices;
#line 1431 "ui.c"
	{
		GList* device_collection = NULL;
		GList* device_it = NULL;
#line 402 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		device_collection = _tmp4_;
#line 402 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		for (device_it = device_collection; device_it != NULL; device_it = device_it->next) {
#line 1439 "ui.c"
			ScanDevice* _tmp5_ = NULL;
			ScanDevice* device = NULL;
#line 402 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp5_ = _scan_device_ref0 ((ScanDevice*) device_it->data);
#line 402 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			device = _tmp5_;
#line 1446 "ui.c"
			{
				gint n_delete = 0;
				GtkListStore* _tmp6_ = NULL;
				gint _tmp7_ = 0;
				GtkTreeIter _tmp8_ = {0};
				gboolean _tmp9_ = FALSE;
				gint _tmp21_ = 0;
				gint _tmp44_ = 0;
#line 404 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				n_delete = -1;
#line 407 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp6_ = self->priv->device_model;
#line 407 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp7_ = index;
#line 407 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp9_ = gtk_tree_model_iter_nth_child ((GtkTreeModel*) _tmp6_, &_tmp8_, NULL, _tmp7_);
#line 407 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				iter = _tmp8_;
#line 407 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				if (_tmp9_) {
#line 1467 "ui.c"
					gint i = 0;
#line 409 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					i = 0;
#line 1471 "ui.c"
					{
						gboolean _tmp10_ = FALSE;
#line 410 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						_tmp10_ = TRUE;
#line 410 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						while (TRUE) {
#line 1478 "ui.c"
							gchar* name = NULL;
							gboolean matched = FALSE;
							GtkListStore* _tmp13_ = NULL;
							GtkTreeIter _tmp14_ = {0};
							const gchar* _tmp15_ = NULL;
							ScanDevice* _tmp16_ = NULL;
							const gchar* _tmp17_ = NULL;
							gboolean _tmp18_ = FALSE;
							gint _tmp20_ = 0;
#line 410 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							if (!_tmp10_) {
#line 1490 "ui.c"
								GtkListStore* _tmp11_ = NULL;
								gboolean _tmp12_ = FALSE;
#line 424 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
								_tmp11_ = self->priv->device_model;
#line 424 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
								_tmp12_ = gtk_tree_model_iter_next ((GtkTreeModel*) _tmp11_, &iter);
#line 424 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
								if (!_tmp12_) {
#line 424 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
									break;
#line 1501 "ui.c"
								}
							}
#line 410 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp10_ = FALSE;
#line 415 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp13_ = self->priv->device_model;
#line 415 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp14_ = iter;
#line 415 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							gtk_tree_model_get ((GtkTreeModel*) _tmp13_, &_tmp14_, 0, &name, -1, -1);
#line 416 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp15_ = name;
#line 416 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp16_ = device;
#line 416 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp17_ = _tmp16_->name;
#line 416 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							matched = g_strcmp0 (_tmp15_, _tmp17_) == 0;
#line 418 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp18_ = matched;
#line 418 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							if (_tmp18_) {
#line 1524 "ui.c"
								gint _tmp19_ = 0;
#line 420 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
								_tmp19_ = i;
#line 420 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
								n_delete = _tmp19_;
#line 421 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
								_g_free0 (name);
#line 421 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
								break;
#line 1534 "ui.c"
							}
#line 423 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp20_ = i;
#line 423 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							i = _tmp20_ + 1;
#line 410 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_g_free0 (name);
#line 1542 "ui.c"
						}
					}
				}
#line 428 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp21_ = n_delete;
#line 428 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				if (_tmp21_ >= 0) {
#line 1550 "ui.c"
					gint i = 0;
					GtkListStore* _tmp22_ = NULL;
					GtkTreeIter _tmp23_ = {0};
					ScanDevice* _tmp24_ = NULL;
					const gchar* _tmp25_ = NULL;
#line 433 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp22_ = self->priv->device_model;
#line 433 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp23_ = iter;
#line 433 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp24_ = device;
#line 433 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp25_ = _tmp24_->label;
#line 433 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					gtk_list_store_set (_tmp22_, &_tmp23_, 1, _tmp25_, -1, -1);
#line 1566 "ui.c"
					{
						gboolean _tmp26_ = FALSE;
#line 435 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						i = 0;
#line 435 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						_tmp26_ = TRUE;
#line 435 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						while (TRUE) {
#line 1575 "ui.c"
							gint _tmp28_ = 0;
							gint _tmp29_ = 0;
							GtkListStore* _tmp30_ = NULL;
							gint _tmp31_ = 0;
							GtkTreeIter _tmp32_ = {0};
							GtkListStore* _tmp33_ = NULL;
							GtkTreeIter _tmp34_ = {0};
#line 435 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							if (!_tmp26_) {
#line 1585 "ui.c"
								gint _tmp27_ = 0;
#line 435 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
								_tmp27_ = i;
#line 435 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
								i = _tmp27_ + 1;
#line 1591 "ui.c"
							}
#line 435 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp26_ = FALSE;
#line 435 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp28_ = i;
#line 435 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp29_ = n_delete;
#line 435 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							if (!(_tmp28_ < _tmp29_)) {
#line 435 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
								break;
#line 1603 "ui.c"
							}
#line 437 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp30_ = self->priv->device_model;
#line 437 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp31_ = index;
#line 437 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							gtk_tree_model_iter_nth_child ((GtkTreeModel*) _tmp30_, &_tmp32_, NULL, _tmp31_);
#line 437 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							iter = _tmp32_;
#line 438 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp33_ = self->priv->device_model;
#line 438 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp34_ = iter;
#line 438 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							gtk_list_store_remove (_tmp33_, &_tmp34_);
#line 1619 "ui.c"
						}
					}
				} else {
					GtkListStore* _tmp35_ = NULL;
					gint _tmp36_ = 0;
					GtkTreeIter _tmp37_ = {0};
					GtkListStore* _tmp38_ = NULL;
					GtkTreeIter _tmp39_ = {0};
					ScanDevice* _tmp40_ = NULL;
					const gchar* _tmp41_ = NULL;
					ScanDevice* _tmp42_ = NULL;
					const gchar* _tmp43_ = NULL;
#line 443 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp35_ = self->priv->device_model;
#line 443 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp36_ = index;
#line 443 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					gtk_list_store_insert (_tmp35_, &_tmp37_, _tmp36_);
#line 443 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					iter = _tmp37_;
#line 444 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp38_ = self->priv->device_model;
#line 444 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp39_ = iter;
#line 444 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp40_ = device;
#line 444 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp41_ = _tmp40_->name;
#line 444 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp42_ = device;
#line 444 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp43_ = _tmp42_->label;
#line 444 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					gtk_list_store_set (_tmp38_, &_tmp39_, 0, _tmp41_, 1, _tmp43_, -1, -1);
#line 1654 "ui.c"
				}
#line 446 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp44_ = index;
#line 446 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				index = _tmp44_ + 1;
#line 402 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_scan_device_unref0 (device);
#line 1662 "ui.c"
			}
		}
	}
#line 450 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	while (TRUE) {
#line 1668 "ui.c"
		GtkListStore* _tmp45_ = NULL;
		gint _tmp46_ = 0;
		GtkTreeIter _tmp47_ = {0};
		gboolean _tmp48_ = FALSE;
		GtkListStore* _tmp49_ = NULL;
		GtkTreeIter _tmp50_ = {0};
#line 450 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp45_ = self->priv->device_model;
#line 450 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp46_ = index;
#line 450 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp48_ = gtk_tree_model_iter_nth_child ((GtkTreeModel*) _tmp45_, &_tmp47_, NULL, _tmp46_);
#line 450 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		iter = _tmp47_;
#line 450 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (!_tmp48_) {
#line 450 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			break;
#line 1687 "ui.c"
		}
#line 451 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp49_ = self->priv->device_model;
#line 451 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp50_ = iter;
#line 451 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_list_store_remove (_tmp49_, &_tmp50_);
#line 1695 "ui.c"
	}
#line 454 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp52_ = have_selection;
#line 454 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (!_tmp52_) {
#line 1701 "ui.c"
		GList* _tmp53_ = NULL;
#line 454 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp53_ = devices;
#line 454 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp51_ = _tmp53_ != NULL;
#line 1707 "ui.c"
	} else {
#line 454 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp51_ = FALSE;
#line 1711 "ui.c"
	}
#line 454 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp51_) {
#line 1715 "ui.c"
		GtkComboBox* _tmp54_ = NULL;
#line 455 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp54_ = self->priv->device_combo;
#line 455 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_combo_box_set_active (_tmp54_, 0);
#line 1721 "ui.c"
	}
#line 457 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->setting_devices = FALSE;
#line 459 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_update_info_bar (self);
#line 1727 "ui.c"
}


static void user_interface_add_default_page (UserInterface* self) {
	Page* page = NULL;
	gint _tmp0_ = 0;
	gint _tmp1_ = 0;
	gint _tmp2_ = 0;
	ScanDirection _tmp3_ = 0;
	Page* _tmp4_ = NULL;
	Book* _tmp5_ = NULL;
	BookView* _tmp6_ = NULL;
#line 462 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 464 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->default_page_width;
#line 464 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = self->priv->default_page_height;
#line 464 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = self->priv->default_page_dpi;
#line 464 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = self->priv->default_page_scan_direction;
#line 464 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = page_new (_tmp0_, _tmp1_, _tmp2_, _tmp3_);
#line 464 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	page = _tmp4_;
#line 468 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = self->priv->_book;
#line 468 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	book_append_page (_tmp5_, page);
#line 469 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp6_ = self->priv->book_view;
#line 469 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	book_view_set_selected_page (_tmp6_, page);
#line 462 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_page_unref0 (page);
#line 1764 "ui.c"
}


static gint string_last_index_of_char (const gchar* self, gunichar c, gint start_index) {
	gint result = 0;
	gchar* _result_ = NULL;
	gint _tmp0_ = 0;
	gunichar _tmp1_ = 0U;
	gchar* _tmp2_ = NULL;
	gchar* _tmp3_ = NULL;
#line 930 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, 0);
#line 931 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp0_ = start_index;
#line 931 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp1_ = c;
#line 931 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp2_ = g_utf8_strrchr (((gchar*) self) + _tmp0_, (gssize) (-1), _tmp1_);
#line 931 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_result_ = _tmp2_;
#line 933 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp3_ = _result_;
#line 933 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	if (_tmp3_ != NULL) {
#line 1789 "ui.c"
		gchar* _tmp4_ = NULL;
#line 934 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp4_ = _result_;
#line 934 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		result = (gint) (_tmp4_ - ((gchar*) self));
#line 934 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		return result;
#line 1797 "ui.c"
	} else {
#line 936 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		result = -1;
#line 936 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		return result;
#line 1803 "ui.c"
	}
}


static gchar* string_slice (const gchar* self, glong start, glong end) {
	gchar* result = NULL;
	glong string_length = 0L;
	gint _tmp0_ = 0;
	gint _tmp1_ = 0;
	glong _tmp2_ = 0L;
	glong _tmp5_ = 0L;
	gboolean _tmp8_ = FALSE;
	glong _tmp9_ = 0L;
	gboolean _tmp12_ = FALSE;
	glong _tmp13_ = 0L;
	glong _tmp16_ = 0L;
	glong _tmp17_ = 0L;
	glong _tmp18_ = 0L;
	glong _tmp19_ = 0L;
	glong _tmp20_ = 0L;
	gchar* _tmp21_ = NULL;
#line 1226 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, NULL);
#line 1227 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp0_ = strlen (self);
#line 1227 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp1_ = _tmp0_;
#line 1227 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	string_length = (glong) _tmp1_;
#line 1228 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp2_ = start;
#line 1228 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	if (_tmp2_ < ((glong) 0)) {
#line 1837 "ui.c"
		glong _tmp3_ = 0L;
		glong _tmp4_ = 0L;
#line 1229 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp3_ = string_length;
#line 1229 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp4_ = start;
#line 1229 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		start = _tmp3_ + _tmp4_;
#line 1846 "ui.c"
	}
#line 1231 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp5_ = end;
#line 1231 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	if (_tmp5_ < ((glong) 0)) {
#line 1852 "ui.c"
		glong _tmp6_ = 0L;
		glong _tmp7_ = 0L;
#line 1232 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp6_ = string_length;
#line 1232 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp7_ = end;
#line 1232 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		end = _tmp6_ + _tmp7_;
#line 1861 "ui.c"
	}
#line 1234 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp9_ = start;
#line 1234 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	if (_tmp9_ >= ((glong) 0)) {
#line 1867 "ui.c"
		glong _tmp10_ = 0L;
		glong _tmp11_ = 0L;
#line 1234 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp10_ = start;
#line 1234 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp11_ = string_length;
#line 1234 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp8_ = _tmp10_ <= _tmp11_;
#line 1876 "ui.c"
	} else {
#line 1234 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp8_ = FALSE;
#line 1880 "ui.c"
	}
#line 1234 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	g_return_val_if_fail (_tmp8_, NULL);
#line 1235 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp13_ = end;
#line 1235 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	if (_tmp13_ >= ((glong) 0)) {
#line 1888 "ui.c"
		glong _tmp14_ = 0L;
		glong _tmp15_ = 0L;
#line 1235 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp14_ = end;
#line 1235 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp15_ = string_length;
#line 1235 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp12_ = _tmp14_ <= _tmp15_;
#line 1897 "ui.c"
	} else {
#line 1235 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp12_ = FALSE;
#line 1901 "ui.c"
	}
#line 1235 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	g_return_val_if_fail (_tmp12_, NULL);
#line 1236 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp16_ = start;
#line 1236 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp17_ = end;
#line 1236 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	g_return_val_if_fail (_tmp16_ <= _tmp17_, NULL);
#line 1237 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp18_ = start;
#line 1237 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp19_ = end;
#line 1237 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp20_ = start;
#line 1237 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp21_ = g_strndup (((gchar*) self) + _tmp18_, (gsize) (_tmp19_ - _tmp20_));
#line 1237 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	result = _tmp21_;
#line 1237 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	return result;
#line 1923 "ui.c"
}


static void user_interface_on_file_type_changed (UserInterface* self, GtkTreeSelection* selection) {
	gchar* extension = NULL;
	GtkTreeSelection* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	gchar* path = NULL;
	GtkFileChooserDialog* _tmp2_ = NULL;
	gchar* _tmp3_ = NULL;
	gchar* filename = NULL;
	const gchar* _tmp4_ = NULL;
	gchar* _tmp5_ = NULL;
	gint extension_index = 0;
	const gchar* _tmp6_ = NULL;
	gint _tmp7_ = 0;
	gint _tmp8_ = 0;
	const gchar* _tmp12_ = NULL;
	const gchar* _tmp13_ = NULL;
	gchar* _tmp14_ = NULL;
	GtkFileChooserDialog* _tmp15_ = NULL;
	const gchar* _tmp16_ = NULL;
#line 472 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 472 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (selection != NULL);
#line 474 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = selection;
#line 474 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = user_interface_get_selected_extension (self, _tmp0_);
#line 474 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	extension = _tmp1_;
#line 475 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = self->priv->save_dialog;
#line 475 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = gtk_file_chooser_get_filename ((GtkFileChooser*) _tmp2_);
#line 475 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	path = _tmp3_;
#line 476 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = path;
#line 476 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = g_path_get_basename (_tmp4_);
#line 476 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	filename = _tmp5_;
#line 479 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp6_ = filename;
#line 479 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp7_ = string_last_index_of_char (_tmp6_, (gunichar) '.', 0);
#line 479 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	extension_index = _tmp7_;
#line 480 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp8_ = extension_index;
#line 480 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp8_ >= 0) {
#line 1978 "ui.c"
		const gchar* _tmp9_ = NULL;
		gint _tmp10_ = 0;
		gchar* _tmp11_ = NULL;
#line 481 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp9_ = filename;
#line 481 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp10_ = extension_index;
#line 481 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp11_ = string_slice (_tmp9_, (glong) 0, (glong) _tmp10_);
#line 481 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (filename);
#line 481 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		filename = _tmp11_;
#line 1992 "ui.c"
	}
#line 482 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp12_ = filename;
#line 482 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp13_ = extension;
#line 482 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp14_ = g_strconcat (_tmp12_, _tmp13_, NULL);
#line 482 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (filename);
#line 482 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	filename = _tmp14_;
#line 483 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp15_ = self->priv->save_dialog;
#line 483 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp16_ = filename;
#line 483 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_file_chooser_set_current_name ((GtkFileChooser*) _tmp15_, _tmp16_);
#line 472 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (filename);
#line 472 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (path);
#line 472 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (extension);
#line 2016 "ui.c"
}


static gpointer _g_object_ref0 (gpointer self) {
#line 492 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return self ? g_object_ref (self) : NULL;
#line 2023 "ui.c"
}


static gchar* user_interface_get_selected_extension (UserInterface* self, GtkTreeSelection* selection) {
	gchar* result = NULL;
	GtkTreeModel* model = NULL;
	GtkTreeIter iter = {0};
	gchar* extension = NULL;
	gchar* _tmp0_ = NULL;
	GtkTreeSelection* _tmp1_ = NULL;
	GtkTreeModel* _tmp2_ = NULL;
	GtkTreeIter _tmp3_ = {0};
	gboolean _tmp4_ = FALSE;
	GtkTreeModel* _tmp5_ = NULL;
#line 486 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 486 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (selection != NULL, NULL);
#line 490 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = g_strdup ("");
#line 490 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	extension = _tmp0_;
#line 492 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = selection;
#line 492 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = gtk_tree_selection_get_selected (_tmp1_, &_tmp2_, &_tmp3_);
#line 492 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (model);
#line 492 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = _g_object_ref0 (_tmp2_);
#line 492 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	model = _tmp5_;
#line 492 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	iter = _tmp3_;
#line 492 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp4_) {
#line 2060 "ui.c"
		GtkTreeModel* _tmp6_ = NULL;
		GtkTreeIter _tmp7_ = {0};
#line 493 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp6_ = model;
#line 493 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp7_ = iter;
#line 493 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_tree_model_get (_tmp6_, &_tmp7_, 1, &extension, -1, -1);
#line 2069 "ui.c"
	}
#line 494 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = extension;
#line 494 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (model);
#line 494 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 2077 "ui.c"
}


static glong string_strnlen (gchar* str, glong maxlen) {
	glong result = 0L;
	gchar* end = NULL;
	gchar* _tmp0_ = NULL;
	glong _tmp1_ = 0L;
	gchar* _tmp2_ = NULL;
	gchar* _tmp3_ = NULL;
#line 1193 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp0_ = str;
#line 1193 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp1_ = maxlen;
#line 1193 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp2_ = memchr (_tmp0_, 0, (gsize) _tmp1_);
#line 1193 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	end = _tmp2_;
#line 1194 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp3_ = end;
#line 1194 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	if (_tmp3_ == NULL) {
#line 2100 "ui.c"
		glong _tmp4_ = 0L;
#line 1195 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp4_ = maxlen;
#line 1195 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		result = _tmp4_;
#line 1195 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		return result;
#line 2108 "ui.c"
	} else {
		gchar* _tmp5_ = NULL;
		gchar* _tmp6_ = NULL;
#line 1197 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp5_ = end;
#line 1197 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp6_ = str;
#line 1197 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		result = (glong) (_tmp5_ - _tmp6_);
#line 1197 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		return result;
#line 2120 "ui.c"
	}
}


static gchar* string_substring (const gchar* self, glong offset, glong len) {
	gchar* result = NULL;
	glong string_length = 0L;
	gboolean _tmp0_ = FALSE;
	glong _tmp1_ = 0L;
	glong _tmp8_ = 0L;
	glong _tmp14_ = 0L;
	glong _tmp17_ = 0L;
	glong _tmp18_ = 0L;
	glong _tmp19_ = 0L;
	glong _tmp20_ = 0L;
	glong _tmp21_ = 0L;
	gchar* _tmp22_ = NULL;
#line 1204 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, NULL);
#line 1206 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp1_ = offset;
#line 1206 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	if (_tmp1_ >= ((glong) 0)) {
#line 2144 "ui.c"
		glong _tmp2_ = 0L;
#line 1206 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp2_ = len;
#line 1206 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp0_ = _tmp2_ >= ((glong) 0);
#line 2150 "ui.c"
	} else {
#line 1206 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp0_ = FALSE;
#line 2154 "ui.c"
	}
#line 1206 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	if (_tmp0_) {
#line 2158 "ui.c"
		glong _tmp3_ = 0L;
		glong _tmp4_ = 0L;
		glong _tmp5_ = 0L;
#line 1208 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp3_ = offset;
#line 1208 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp4_ = len;
#line 1208 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp5_ = string_strnlen ((gchar*) self, _tmp3_ + _tmp4_);
#line 1208 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		string_length = _tmp5_;
#line 2170 "ui.c"
	} else {
		gint _tmp6_ = 0;
		gint _tmp7_ = 0;
#line 1210 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp6_ = strlen (self);
#line 1210 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp7_ = _tmp6_;
#line 1210 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		string_length = (glong) _tmp7_;
#line 2180 "ui.c"
	}
#line 1213 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp8_ = offset;
#line 1213 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	if (_tmp8_ < ((glong) 0)) {
#line 2186 "ui.c"
		glong _tmp9_ = 0L;
		glong _tmp10_ = 0L;
		glong _tmp11_ = 0L;
#line 1214 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp9_ = string_length;
#line 1214 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp10_ = offset;
#line 1214 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		offset = _tmp9_ + _tmp10_;
#line 1215 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp11_ = offset;
#line 1215 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		g_return_val_if_fail (_tmp11_ >= ((glong) 0), NULL);
#line 2200 "ui.c"
	} else {
		glong _tmp12_ = 0L;
		glong _tmp13_ = 0L;
#line 1217 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp12_ = offset;
#line 1217 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp13_ = string_length;
#line 1217 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		g_return_val_if_fail (_tmp12_ <= _tmp13_, NULL);
#line 2210 "ui.c"
	}
#line 1219 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp14_ = len;
#line 1219 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	if (_tmp14_ < ((glong) 0)) {
#line 2216 "ui.c"
		glong _tmp15_ = 0L;
		glong _tmp16_ = 0L;
#line 1220 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp15_ = string_length;
#line 1220 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		_tmp16_ = offset;
#line 1220 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
		len = _tmp15_ - _tmp16_;
#line 2225 "ui.c"
	}
#line 1222 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp17_ = offset;
#line 1222 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp18_ = len;
#line 1222 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp19_ = string_length;
#line 1222 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	g_return_val_if_fail ((_tmp17_ + _tmp18_) <= _tmp19_, NULL);
#line 1223 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp20_ = offset;
#line 1223 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp21_ = len;
#line 1223 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp22_ = g_strndup (((gchar*) self) + _tmp20_, (gsize) _tmp21_);
#line 1223 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	result = _tmp22_;
#line 1223 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	return result;
#line 2245 "ui.c"
}


static void _user_interface_on_file_type_changed_gtk_tree_selection_changed (GtkTreeSelection* _sender, gpointer self) {
#line 581 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_on_file_type_changed ((UserInterface*) self, _sender);
#line 2252 "ui.c"
}


static gchar* user_interface_choose_file_location (UserInterface* self) {
	gchar* result = NULL;
	gchar* directory = NULL;
	GSettings* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	gboolean _tmp2_ = FALSE;
	const gchar* _tmp3_ = NULL;
	const gchar* _tmp7_ = NULL;
	const gchar* _tmp8_ = NULL;
	const gchar* _tmp9_ = NULL;
	GtkFileChooserDialog* _tmp10_ = NULL;
	GtkFileChooserDialog* _tmp11_ = NULL;
	GtkFileChooserDialog* _tmp12_ = NULL;
	GtkFileChooserDialog* _tmp13_ = NULL;
	const gchar* _tmp14_ = NULL;
	GtkFileChooserDialog* _tmp15_ = NULL;
	const gchar* _tmp16_ = NULL;
	GtkFileFilter* filter = NULL;
	GtkFileFilter* _tmp17_ = NULL;
	GtkFileFilter* _tmp18_ = NULL;
	const gchar* _tmp19_ = NULL;
	GtkFileFilter* _tmp20_ = NULL;
	GtkFileFilter* _tmp21_ = NULL;
	GtkFileChooserDialog* _tmp22_ = NULL;
	GtkFileFilter* _tmp23_ = NULL;
	GtkFileFilter* _tmp24_ = NULL;
	GtkFileFilter* _tmp25_ = NULL;
	GtkFileFilter* _tmp26_ = NULL;
	const gchar* _tmp27_ = NULL;
	GtkFileFilter* _tmp28_ = NULL;
	GtkFileChooserDialog* _tmp29_ = NULL;
	GtkFileFilter* _tmp30_ = NULL;
	GtkFileFilter* _tmp31_ = NULL;
	GtkExpander* expander = NULL;
	const gchar* _tmp32_ = NULL;
	GtkExpander* _tmp33_ = NULL;
	GtkExpander* _tmp34_ = NULL;
	GtkFileChooserDialog* _tmp35_ = NULL;
	GtkExpander* _tmp36_ = NULL;
	gchar* default_extension = NULL;
	gchar* _tmp37_ = NULL;
	gint index = 0;
	const gchar* _tmp38_ = NULL;
	gint _tmp39_ = 0;
	gint _tmp40_ = 0;
	GtkListStore* file_type_store = NULL;
	GtkListStore* _tmp44_ = NULL;
	GtkTreeIter iter = {0};
	GtkListStore* _tmp45_ = NULL;
	GtkTreeIter _tmp46_ = {0};
	GtkListStore* _tmp47_ = NULL;
	GtkTreeIter _tmp48_ = {0};
	const gchar* _tmp49_ = NULL;
	GtkListStore* _tmp50_ = NULL;
	GtkTreeIter _tmp51_ = {0};
	GtkListStore* _tmp52_ = NULL;
	GtkTreeIter _tmp53_ = {0};
	const gchar* _tmp54_ = NULL;
	GtkListStore* _tmp55_ = NULL;
	GtkTreeIter _tmp56_ = {0};
	GtkListStore* _tmp57_ = NULL;
	GtkTreeIter _tmp58_ = {0};
	const gchar* _tmp59_ = NULL;
	GtkTreeView* file_type_view = NULL;
	GtkListStore* _tmp60_ = NULL;
	GtkTreeView* _tmp61_ = NULL;
	GtkTreeView* _tmp62_ = NULL;
	GtkTreeView* _tmp63_ = NULL;
	GtkTreeViewColumn* column = NULL;
	GtkCellRendererText* _tmp64_ = NULL;
	GtkCellRendererText* _tmp65_ = NULL;
	GtkTreeViewColumn* _tmp66_ = NULL;
	GtkTreeViewColumn* _tmp67_ = NULL;
	GtkTreeView* _tmp68_ = NULL;
	GtkTreeViewColumn* _tmp69_ = NULL;
	GtkExpander* _tmp70_ = NULL;
	GtkTreeView* _tmp71_ = NULL;
	GtkListStore* _tmp72_ = NULL;
	GtkTreeIter _tmp73_ = {0};
	gboolean _tmp74_ = FALSE;
	GtkTreeView* _tmp85_ = NULL;
	GtkTreeSelection* _tmp86_ = NULL;
	GtkExpander* _tmp87_ = NULL;
	gint response = 0;
	GtkFileChooserDialog* _tmp88_ = NULL;
	gint _tmp89_ = 0;
	gchar* uri = NULL;
	gint _tmp90_ = 0;
	GSettings* _tmp110_ = NULL;
	GtkFileChooserDialog* _tmp111_ = NULL;
	gchar* _tmp112_ = NULL;
	gchar* _tmp113_ = NULL;
	GtkTreeView* _tmp114_ = NULL;
	GtkTreeSelection* _tmp115_ = NULL;
	guint _tmp116_ = 0U;
	GtkFileChooserDialog* _tmp117_ = NULL;
#line 497 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 500 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	directory = NULL;
#line 501 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->settings;
#line 501 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = g_settings_get_string (_tmp0_, "save-directory");
#line 501 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (directory);
#line 501 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	directory = _tmp1_;
#line 503 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = directory;
#line 503 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp3_ == NULL) {
#line 503 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp2_ = TRUE;
#line 2370 "ui.c"
	} else {
		const gchar* _tmp4_ = NULL;
#line 503 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp4_ = directory;
#line 503 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp2_ = g_strcmp0 (_tmp4_, "") == 0;
#line 2377 "ui.c"
	}
#line 503 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp2_) {
#line 2381 "ui.c"
		const gchar* _tmp5_ = NULL;
		gchar* _tmp6_ = NULL;
#line 504 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp5_ = g_get_user_special_dir (G_USER_DIRECTORY_DOCUMENTS);
#line 504 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp6_ = g_strdup (_tmp5_);
#line 504 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (directory);
#line 504 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		directory = _tmp6_;
#line 2392 "ui.c"
	}
#line 506 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp7_ = _ ("Save As...");
#line 506 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp8_ = _ ("_Cancel");
#line 506 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp9_ = _ ("_Save");
#line 506 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp10_ = (GtkFileChooserDialog*) gtk_file_chooser_dialog_new (_tmp7_, (GtkWindow*) self, GTK_FILE_CHOOSER_ACTION_SAVE, _tmp8_, GTK_RESPONSE_CANCEL, _tmp9_, GTK_RESPONSE_ACCEPT, NULL, NULL);
#line 506 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp10_);
#line 506 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->save_dialog);
#line 506 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->save_dialog = _tmp10_;
#line 513 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp11_ = self->priv->save_dialog;
#line 513 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_file_chooser_set_do_overwrite_confirmation ((GtkFileChooser*) _tmp11_, TRUE);
#line 514 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp12_ = self->priv->save_dialog;
#line 514 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_file_chooser_set_local_only ((GtkFileChooser*) _tmp12_, FALSE);
#line 515 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp13_ = self->priv->save_dialog;
#line 515 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp14_ = directory;
#line 515 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_file_chooser_set_current_folder ((GtkFileChooser*) _tmp13_, _tmp14_);
#line 516 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp15_ = self->priv->save_dialog;
#line 516 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp16_ = self->priv->_default_file_name;
#line 516 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_file_chooser_set_current_name ((GtkFileChooser*) _tmp15_, _tmp16_);
#line 519 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp17_ = gtk_file_filter_new ();
#line 519 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp17_);
#line 519 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	filter = _tmp17_;
#line 520 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp18_ = filter;
#line 520 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp19_ = _ ("Image Files");
#line 520 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_file_filter_set_name (_tmp18_, _tmp19_);
#line 522 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp20_ = filter;
#line 522 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_file_filter_add_pixbuf_formats (_tmp20_);
#line 523 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp21_ = filter;
#line 523 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_file_filter_add_mime_type (_tmp21_, "application/pdf");
#line 524 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp22_ = self->priv->save_dialog;
#line 524 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp23_ = filter;
#line 524 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp24_ = _g_object_ref0 (_tmp23_);
#line 524 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_file_chooser_add_filter ((GtkFileChooser*) _tmp22_, _tmp24_);
#line 525 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp25_ = gtk_file_filter_new ();
#line 525 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp25_);
#line 525 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (filter);
#line 525 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	filter = _tmp25_;
#line 526 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp26_ = filter;
#line 526 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp27_ = _ ("All Files");
#line 526 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_file_filter_set_name (_tmp26_, _tmp27_);
#line 528 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp28_ = filter;
#line 528 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_file_filter_add_pattern (_tmp28_, "*");
#line 529 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp29_ = self->priv->save_dialog;
#line 529 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp30_ = filter;
#line 529 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp31_ = _g_object_ref0 (_tmp30_);
#line 529 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_file_chooser_add_filter ((GtkFileChooser*) _tmp29_, _tmp31_);
#line 531 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp32_ = _ ("Select File _Type");
#line 531 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp33_ = (GtkExpander*) gtk_expander_new_with_mnemonic (_tmp32_);
#line 531 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp33_);
#line 531 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	expander = _tmp33_;
#line 533 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp34_ = expander;
#line 533 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_expander_set_spacing (_tmp34_, 5);
#line 534 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp35_ = self->priv->save_dialog;
#line 534 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp36_ = expander;
#line 534 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_file_chooser_set_extra_widget ((GtkFileChooser*) _tmp35_, (GtkWidget*) _tmp36_);
#line 536 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp37_ = g_strdup ("");
#line 536 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	default_extension = _tmp37_;
#line 537 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp38_ = self->priv->_default_file_name;
#line 537 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp39_ = string_last_index_of_char (_tmp38_, (gunichar) '.', 0);
#line 537 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	index = _tmp39_;
#line 538 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp40_ = index;
#line 538 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp40_ >= 0) {
#line 2514 "ui.c"
		const gchar* _tmp41_ = NULL;
		gint _tmp42_ = 0;
		gchar* _tmp43_ = NULL;
#line 539 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp41_ = self->priv->_default_file_name;
#line 539 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp42_ = index;
#line 539 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp43_ = string_substring (_tmp41_, (glong) _tmp42_, (glong) (-1));
#line 539 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (default_extension);
#line 539 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		default_extension = _tmp43_;
#line 2528 "ui.c"
	}
#line 541 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp44_ = gtk_list_store_new (2, G_TYPE_STRING, G_TYPE_STRING);
#line 541 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	file_type_store = _tmp44_;
#line 543 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp45_ = file_type_store;
#line 543 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_list_store_append (_tmp45_, &_tmp46_);
#line 543 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	iter = _tmp46_;
#line 544 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp47_ = file_type_store;
#line 544 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp48_ = iter;
#line 544 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp49_ = _ ("PDF (multi-page document)");
#line 544 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_list_store_set (_tmp47_, &_tmp48_, 0, _tmp49_, 1, ".pdf", -1, -1);
#line 549 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp50_ = file_type_store;
#line 549 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_list_store_append (_tmp50_, &_tmp51_);
#line 549 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	iter = _tmp51_;
#line 550 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp52_ = file_type_store;
#line 550 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp53_ = iter;
#line 550 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp54_ = _ ("JPEG (compressed)");
#line 550 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_list_store_set (_tmp52_, &_tmp53_, 0, _tmp54_, 1, ".jpg", -1, -1);
#line 555 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp55_ = file_type_store;
#line 555 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_list_store_append (_tmp55_, &_tmp56_);
#line 555 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	iter = _tmp56_;
#line 556 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp57_ = file_type_store;
#line 556 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp58_ = iter;
#line 556 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp59_ = _ ("PNG (lossless)");
#line 556 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_list_store_set (_tmp57_, &_tmp58_, 0, _tmp59_, 1, ".png", -1, -1);
#line 562 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp60_ = file_type_store;
#line 562 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp61_ = (GtkTreeView*) gtk_tree_view_new_with_model ((GtkTreeModel*) _tmp60_);
#line 562 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp61_);
#line 562 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	file_type_view = _tmp61_;
#line 563 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp62_ = file_type_view;
#line 563 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_tree_view_set_headers_visible (_tmp62_, FALSE);
#line 564 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp63_ = file_type_view;
#line 564 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_tree_view_set_rules_hint (_tmp63_, TRUE);
#line 565 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp64_ = (GtkCellRendererText*) gtk_cell_renderer_text_new ();
#line 565 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp64_);
#line 565 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp65_ = _tmp64_;
#line 565 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp66_ = gtk_tree_view_column_new_with_attributes ("", (GtkCellRenderer*) _tmp65_, "text", 0, NULL, NULL);
#line 565 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp66_);
#line 565 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp67_ = _tmp66_;
#line 565 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (_tmp65_);
#line 565 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	column = _tmp67_;
#line 568 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp68_ = file_type_view;
#line 568 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp69_ = column;
#line 568 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_tree_view_append_column (_tmp68_, _tmp69_);
#line 569 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp70_ = expander;
#line 569 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp71_ = file_type_view;
#line 569 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_container_add ((GtkContainer*) _tmp70_, (GtkWidget*) _tmp71_);
#line 571 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp72_ = file_type_store;
#line 571 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp74_ = gtk_tree_model_get_iter_first ((GtkTreeModel*) _tmp72_, &_tmp73_);
#line 571 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	iter = _tmp73_;
#line 571 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp74_) {
#line 2628 "ui.c"
		{
			gboolean _tmp75_ = FALSE;
#line 573 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp75_ = TRUE;
#line 573 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			while (TRUE) {
#line 2635 "ui.c"
				gchar* e = NULL;
				GtkListStore* _tmp78_ = NULL;
				GtkTreeIter _tmp79_ = {0};
				const gchar* _tmp80_ = NULL;
				const gchar* _tmp81_ = NULL;
#line 573 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				if (!_tmp75_) {
#line 2643 "ui.c"
					GtkListStore* _tmp76_ = NULL;
					gboolean _tmp77_ = FALSE;
#line 579 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp76_ = file_type_store;
#line 579 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp77_ = gtk_tree_model_iter_next ((GtkTreeModel*) _tmp76_, &iter);
#line 579 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					if (!_tmp77_) {
#line 579 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						break;
#line 2654 "ui.c"
					}
				}
#line 573 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp75_ = FALSE;
#line 576 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp78_ = file_type_store;
#line 576 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp79_ = iter;
#line 576 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				gtk_tree_model_get ((GtkTreeModel*) _tmp78_, &_tmp79_, 1, &e, -1, -1);
#line 577 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp80_ = default_extension;
#line 577 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp81_ = e;
#line 577 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				if (g_strcmp0 (_tmp80_, _tmp81_) == 0) {
#line 2671 "ui.c"
					GtkTreeView* _tmp82_ = NULL;
					GtkTreeSelection* _tmp83_ = NULL;
					GtkTreeIter _tmp84_ = {0};
#line 578 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp82_ = file_type_view;
#line 578 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp83_ = gtk_tree_view_get_selection (_tmp82_);
#line 578 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp84_ = iter;
#line 578 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					gtk_tree_selection_select_iter (_tmp83_, &_tmp84_);
#line 2683 "ui.c"
				}
#line 573 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_g_free0 (e);
#line 2687 "ui.c"
			}
		}
	}
#line 581 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp85_ = file_type_view;
#line 581 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp86_ = gtk_tree_view_get_selection (_tmp85_);
#line 581 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_object (_tmp86_, "changed", (GCallback) _user_interface_on_file_type_changed_gtk_tree_selection_changed, self, 0);
#line 583 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp87_ = expander;
#line 583 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_show_all ((GtkWidget*) _tmp87_);
#line 585 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp88_ = self->priv->save_dialog;
#line 585 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp89_ = gtk_dialog_run ((GtkDialog*) _tmp88_);
#line 585 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	response = _tmp89_;
#line 587 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	uri = NULL;
#line 588 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp90_ = response;
#line 588 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp90_ == ((gint) GTK_RESPONSE_ACCEPT)) {
#line 2713 "ui.c"
		GtkTreeSelection* selection = NULL;
		GtkTreeView* _tmp91_ = NULL;
		GtkTreeSelection* _tmp92_ = NULL;
		GtkTreeSelection* _tmp93_ = NULL;
		gchar* extension = NULL;
		GtkTreeSelection* _tmp94_ = NULL;
		gchar* _tmp95_ = NULL;
		gchar* path = NULL;
		GtkFileChooserDialog* _tmp96_ = NULL;
		gchar* _tmp97_ = NULL;
		gchar* filename = NULL;
		const gchar* _tmp98_ = NULL;
		gchar* _tmp99_ = NULL;
		gint extension_index = 0;
		const gchar* _tmp100_ = NULL;
		gint _tmp101_ = 0;
		gint _tmp102_ = 0;
		const gchar* _tmp106_ = NULL;
		GFile* _tmp107_ = NULL;
		GFile* _tmp108_ = NULL;
		gchar* _tmp109_ = NULL;
#line 590 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp91_ = file_type_view;
#line 590 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp92_ = gtk_tree_view_get_selection (_tmp91_);
#line 590 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp93_ = _g_object_ref0 (_tmp92_);
#line 590 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		selection = _tmp93_;
#line 591 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp94_ = selection;
#line 591 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp95_ = user_interface_get_selected_extension (self, _tmp94_);
#line 591 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		extension = _tmp95_;
#line 593 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp96_ = self->priv->save_dialog;
#line 593 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp97_ = gtk_file_chooser_get_filename ((GtkFileChooser*) _tmp96_);
#line 593 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		path = _tmp97_;
#line 594 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp98_ = path;
#line 594 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp99_ = g_path_get_basename (_tmp98_);
#line 594 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		filename = _tmp99_;
#line 596 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp100_ = filename;
#line 596 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp101_ = string_last_index_of_char (_tmp100_, (gunichar) '.', 0);
#line 596 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		extension_index = _tmp101_;
#line 597 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp102_ = extension_index;
#line 597 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (_tmp102_ < 0) {
#line 2771 "ui.c"
			const gchar* _tmp103_ = NULL;
			const gchar* _tmp104_ = NULL;
			gchar* _tmp105_ = NULL;
#line 598 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp103_ = path;
#line 598 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp104_ = extension;
#line 598 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp105_ = g_strconcat (_tmp103_, _tmp104_, NULL);
#line 598 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_g_free0 (path);
#line 598 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			path = _tmp105_;
#line 2785 "ui.c"
		}
#line 600 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp106_ = path;
#line 600 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp107_ = g_file_new_for_path (_tmp106_);
#line 600 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp108_ = _tmp107_;
#line 600 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp109_ = g_file_get_uri (_tmp108_);
#line 600 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (uri);
#line 600 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		uri = _tmp109_;
#line 600 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_object_unref0 (_tmp108_);
#line 588 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (filename);
#line 588 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (path);
#line 588 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (extension);
#line 588 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_object_unref0 (selection);
#line 2809 "ui.c"
	}
#line 603 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp110_ = self->priv->settings;
#line 603 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp111_ = self->priv->save_dialog;
#line 603 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp112_ = gtk_file_chooser_get_current_folder ((GtkFileChooser*) _tmp111_);
#line 603 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp113_ = _tmp112_;
#line 603 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_settings_set_string (_tmp110_, "save-directory", _tmp113_);
#line 603 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (_tmp113_);
#line 605 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp114_ = file_type_view;
#line 605 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp115_ = gtk_tree_view_get_selection (_tmp114_);
#line 605 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_parse_name ("changed", GTK_TYPE_TREE_SELECTION, &_tmp116_, NULL, FALSE);
#line 605 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_handlers_disconnect_matched (_tmp115_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp116_, 0, NULL, (GCallback) _user_interface_on_file_type_changed_gtk_tree_selection_changed, self);
#line 606 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp117_ = self->priv->save_dialog;
#line 606 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_destroy ((GtkWidget*) _tmp117_);
#line 607 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->save_dialog);
#line 607 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->save_dialog = NULL;
#line 609 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = uri;
#line 609 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (column);
#line 609 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (file_type_view);
#line 609 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (file_type_store);
#line 609 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (default_extension);
#line 609 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (expander);
#line 609 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (filter);
#line 609 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (directory);
#line 609 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 2857 "ui.c"
}


static gboolean user_interface_save_document (UserInterface* self, gboolean force_choose_location) {
	gboolean result = FALSE;
	gchar* uri = NULL;
	gboolean _tmp0_ = FALSE;
	const gchar* _tmp1_ = NULL;
	const gchar* _tmp6_ = NULL;
	GFile* file = NULL;
	const gchar* _tmp7_ = NULL;
	GFile* _tmp8_ = NULL;
	const gchar* _tmp9_ = NULL;
	gchar* uri_lower = NULL;
	const gchar* _tmp10_ = NULL;
	gchar* _tmp11_ = NULL;
	gchar* format = NULL;
	gchar* _tmp12_ = NULL;
	const gchar* _tmp13_ = NULL;
	gboolean _tmp14_ = FALSE;
	const gchar* _tmp38_ = NULL;
	gchar* _tmp39_ = NULL;
	Book* _tmp40_ = NULL;
	GError * _inner_error_ = NULL;
#line 612 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 615 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = self->priv->book_uri;
#line 615 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp1_ != NULL) {
#line 2888 "ui.c"
		gboolean _tmp2_ = FALSE;
#line 615 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp2_ = force_choose_location;
#line 615 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp0_ = !_tmp2_;
#line 2894 "ui.c"
	} else {
#line 615 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp0_ = FALSE;
#line 2898 "ui.c"
	}
#line 615 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp0_) {
#line 2902 "ui.c"
		const gchar* _tmp3_ = NULL;
		gchar* _tmp4_ = NULL;
#line 616 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp3_ = self->priv->book_uri;
#line 616 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp4_ = g_strdup (_tmp3_);
#line 616 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (uri);
#line 616 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		uri = _tmp4_;
#line 2913 "ui.c"
	} else {
		gchar* _tmp5_ = NULL;
#line 618 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp5_ = user_interface_choose_file_location (self);
#line 618 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (uri);
#line 618 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		uri = _tmp5_;
#line 2922 "ui.c"
	}
#line 619 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp6_ = uri;
#line 619 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp6_ == NULL) {
#line 620 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		result = FALSE;
#line 620 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (uri);
#line 620 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return result;
#line 2934 "ui.c"
	}
#line 622 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp7_ = uri;
#line 622 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp8_ = g_file_new_for_uri (_tmp7_);
#line 622 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	file = _tmp8_;
#line 624 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp9_ = uri;
#line 624 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_debug ("ui.vala:624: Saving to '%s'", _tmp9_);
#line 626 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp10_ = uri;
#line 626 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp11_ = g_utf8_strdown (_tmp10_, (gssize) (-1));
#line 626 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	uri_lower = _tmp11_;
#line 627 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp12_ = g_strdup ("jpeg");
#line 627 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	format = _tmp12_;
#line 628 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp13_ = uri_lower;
#line 628 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp14_ = g_str_has_suffix (_tmp13_, ".pdf");
#line 628 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp14_) {
#line 2962 "ui.c"
		gchar* _tmp15_ = NULL;
#line 629 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp15_ = g_strdup ("pdf");
#line 629 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (format);
#line 629 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		format = _tmp15_;
#line 2970 "ui.c"
	} else {
		const gchar* _tmp16_ = NULL;
		gboolean _tmp17_ = FALSE;
#line 630 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp16_ = uri_lower;
#line 630 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp17_ = g_str_has_suffix (_tmp16_, ".ps");
#line 630 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (_tmp17_) {
#line 2980 "ui.c"
			gchar* _tmp18_ = NULL;
#line 631 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp18_ = g_strdup ("ps");
#line 631 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_g_free0 (format);
#line 631 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			format = _tmp18_;
#line 2988 "ui.c"
		} else {
			const gchar* _tmp19_ = NULL;
			gboolean _tmp20_ = FALSE;
#line 632 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp19_ = uri_lower;
#line 632 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp20_ = g_str_has_suffix (_tmp19_, ".png");
#line 632 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			if (_tmp20_) {
#line 2998 "ui.c"
				gchar* _tmp21_ = NULL;
#line 633 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp21_ = g_strdup ("png");
#line 633 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_g_free0 (format);
#line 633 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				format = _tmp21_;
#line 3006 "ui.c"
			} else {
				gboolean _tmp22_ = FALSE;
				const gchar* _tmp23_ = NULL;
				gboolean _tmp24_ = FALSE;
#line 634 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp23_ = uri_lower;
#line 634 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp24_ = g_str_has_suffix (_tmp23_, ".tif");
#line 634 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				if (_tmp24_) {
#line 634 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp22_ = TRUE;
#line 3019 "ui.c"
				} else {
					const gchar* _tmp25_ = NULL;
					gboolean _tmp26_ = FALSE;
#line 634 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp25_ = uri_lower;
#line 634 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp26_ = g_str_has_suffix (_tmp25_, ".tiff");
#line 634 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp22_ = _tmp26_;
#line 3029 "ui.c"
				}
#line 634 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				if (_tmp22_) {
#line 3033 "ui.c"
					gchar* _tmp27_ = NULL;
#line 635 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp27_ = g_strdup ("tiff");
#line 635 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_g_free0 (format);
#line 635 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					format = _tmp27_;
#line 3041 "ui.c"
				}
			}
		}
	}
#line 637 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_show_progress_dialog (self);
#line 3048 "ui.c"
	{
		Book* _tmp28_ = NULL;
		const gchar* _tmp29_ = NULL;
		gint _tmp30_ = 0;
		gint _tmp31_ = 0;
		GFile* _tmp32_ = NULL;
#line 640 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp28_ = self->priv->_book;
#line 640 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp29_ = format;
#line 640 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp30_ = user_interface_get_quality (self);
#line 640 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp31_ = _tmp30_;
#line 640 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp32_ = file;
#line 640 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		book_save (_tmp28_, _tmp29_, _tmp31_, _tmp32_, &_inner_error_);
#line 640 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (_inner_error_ != NULL) {
#line 3069 "ui.c"
			goto __catch16_g_error;
		}
	}
	goto __finally16;
	__catch16_g_error:
	{
		GError* e = NULL;
		GError* _tmp33_ = NULL;
		const gchar* _tmp34_ = NULL;
		const gchar* _tmp35_ = NULL;
		GError* _tmp36_ = NULL;
		const gchar* _tmp37_ = NULL;
#line 638 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		e = _inner_error_;
#line 638 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_inner_error_ = NULL;
#line 644 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_hide_progress_dialog (self);
#line 645 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp33_ = e;
#line 645 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp34_ = _tmp33_->message;
#line 645 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_warning ("ui.vala:645: Error saving file: %s", _tmp34_);
#line 646 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp35_ = _ ("Failed to save file");
#line 646 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp36_ = e;
#line 646 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp37_ = _tmp36_->message;
#line 646 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_show_error (self, _tmp35_, _tmp37_, FALSE);
#line 650 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		result = FALSE;
#line 650 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_error_free0 (e);
#line 650 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (format);
#line 650 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (uri_lower);
#line 650 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_object_unref0 (file);
#line 650 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (uri);
#line 650 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return result;
#line 3116 "ui.c"
	}
	__finally16:
#line 638 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_inner_error_ != NULL) {
#line 638 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (format);
#line 638 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (uri_lower);
#line 638 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_object_unref0 (file);
#line 638 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (uri);
#line 638 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 638 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_clear_error (&_inner_error_);
#line 638 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return FALSE;
#line 3135 "ui.c"
	}
#line 653 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp38_ = uri;
#line 653 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp39_ = g_strdup (_tmp38_);
#line 653 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (self->priv->book_uri);
#line 653 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->book_uri = _tmp39_;
#line 654 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp40_ = self->priv->_book;
#line 654 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	book_set_needs_saving (_tmp40_, FALSE);
#line 655 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = TRUE;
#line 655 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (format);
#line 655 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (uri_lower);
#line 655 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (file);
#line 655 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (uri);
#line 655 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 3161 "ui.c"
}


static gboolean user_interface_prompt_to_save (UserInterface* self, const gchar* title, const gchar* discard_label) {
	gboolean result = FALSE;
	Book* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	GtkMessageDialog* dialog = NULL;
	const gchar* _tmp3_ = NULL;
	GtkMessageDialog* _tmp4_ = NULL;
	GtkMessageDialog* _tmp5_ = NULL;
	const gchar* _tmp6_ = NULL;
	GtkMessageDialog* _tmp7_ = NULL;
	const gchar* _tmp8_ = NULL;
	GtkMessageDialog* _tmp9_ = NULL;
	const gchar* _tmp10_ = NULL;
	GtkMessageDialog* _tmp11_ = NULL;
	const gchar* _tmp12_ = NULL;
	gint response = 0;
	GtkMessageDialog* _tmp13_ = NULL;
	gint _tmp14_ = 0;
	GtkMessageDialog* _tmp15_ = NULL;
	gint _tmp16_ = 0;
#line 658 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 658 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (title != NULL, FALSE);
#line 658 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (discard_label != NULL, FALSE);
#line 660 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->_book;
#line 660 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = book_get_needs_saving (_tmp0_);
#line 660 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 660 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (!_tmp2_) {
#line 661 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		result = TRUE;
#line 661 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return result;
#line 3204 "ui.c"
	}
#line 663 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = title;
#line 663 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = (GtkMessageDialog*) gtk_message_dialog_new ((GtkWindow*) self, GTK_DIALOG_MODAL, GTK_MESSAGE_WARNING, GTK_BUTTONS_NONE, "%s", _tmp3_);
#line 663 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp4_);
#line 663 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	dialog = _tmp4_;
#line 668 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = dialog;
#line 668 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp6_ = _ ("If you don't save, changes will be permanently lost.");
#line 668 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_message_dialog_format_secondary_text (_tmp5_, "%s", _tmp6_);
#line 671 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp7_ = dialog;
#line 671 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp8_ = discard_label;
#line 671 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_dialog_add_button ((GtkDialog*) _tmp7_, _tmp8_, (gint) GTK_RESPONSE_NO);
#line 672 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp9_ = dialog;
#line 672 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp10_ = _ ("_Cancel");
#line 672 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_dialog_add_button ((GtkDialog*) _tmp9_, _tmp10_, (gint) GTK_RESPONSE_CANCEL);
#line 673 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp11_ = dialog;
#line 673 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp12_ = _ ("_Save");
#line 673 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_dialog_add_button ((GtkDialog*) _tmp11_, _tmp12_, (gint) GTK_RESPONSE_YES);
#line 675 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp13_ = dialog;
#line 675 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp14_ = gtk_dialog_run ((GtkDialog*) _tmp13_);
#line 675 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	response = _tmp14_;
#line 676 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp15_ = dialog;
#line 676 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_destroy ((GtkWidget*) _tmp15_);
#line 678 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp16_ = response;
#line 678 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	switch (_tmp16_) {
#line 678 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case GTK_RESPONSE_YES:
#line 3254 "ui.c"
		{
			gboolean _tmp17_ = FALSE;
#line 681 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp17_ = user_interface_save_document (self, FALSE);
#line 681 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			if (_tmp17_) {
#line 682 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				result = TRUE;
#line 682 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_g_object_unref0 (dialog);
#line 682 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				return result;
#line 3267 "ui.c"
			} else {
#line 684 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				result = FALSE;
#line 684 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_g_object_unref0 (dialog);
#line 684 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				return result;
#line 3275 "ui.c"
			}
		}
#line 678 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case GTK_RESPONSE_CANCEL:
#line 3280 "ui.c"
		{
#line 686 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			result = FALSE;
#line 686 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_g_object_unref0 (dialog);
#line 686 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			return result;
#line 3288 "ui.c"
		}
		default:
#line 678 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case GTK_RESPONSE_NO:
#line 3293 "ui.c"
		{
#line 689 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			result = TRUE;
#line 689 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_g_object_unref0 (dialog);
#line 689 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			return result;
#line 3301 "ui.c"
		}
	}
#line 658 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (dialog);
#line 3306 "ui.c"
}


static void user_interface_clear_document (UserInterface* self) {
	Book* _tmp0_ = NULL;
	Book* _tmp1_ = NULL;
	GtkMenuItem* _tmp2_ = NULL;
	GtkMenuItem* _tmp3_ = NULL;
#line 693 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 695 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->_book;
#line 695 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	book_clear (_tmp0_);
#line 696 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_add_default_page (self);
#line 697 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (self->priv->book_uri);
#line 697 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->book_uri = NULL;
#line 698 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = self->priv->_book;
#line 698 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	book_set_needs_saving (_tmp1_, FALSE);
#line 699 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = self->priv->save_as_menuitem;
#line 699 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_sensitive ((GtkWidget*) _tmp2_, FALSE);
#line 700 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = self->priv->copy_to_clipboard_menuitem;
#line 700 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_sensitive ((GtkWidget*) _tmp3_, FALSE);
#line 3339 "ui.c"
}


static void user_interface_new_document (UserInterface* self) {
	const gchar* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	gboolean _tmp4_ = FALSE;
#line 703 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 705 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = _ ("Save current document?");
#line 705 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = _ ("Discard Changes");
#line 705 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = user_interface_prompt_to_save (self, _tmp0_, _tmp1_);
#line 705 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (!_tmp2_) {
#line 709 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return;
#line 3361 "ui.c"
	}
#line 711 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = user_interface_get_scanning (self);
#line 711 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = _tmp3_;
#line 711 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp4_) {
#line 712 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_signal_emit_by_name (self, "stop-scan");
#line 3371 "ui.c"
	}
#line 713 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_clear_document (self);
#line 3375 "ui.c"
}


static void user_interface_new_button_clicked_cb (UserInterface* self, GtkWidget* widget) {
#line 717 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 717 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 719 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_new_document (self);
#line 3386 "ui.c"
}


static void _user_interface_new_button_clicked_cb_gtk_button_clicked (GtkButton* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_new_button_clicked_cb ((UserInterface*) self, _sender);
#line 3393 "ui.c"
}


void user_interface_new_document_activate_cb (UserInterface* self) {
#line 722 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 724 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_new_document (self);
#line 3402 "ui.c"
}


static void user_interface_set_document_hint (UserInterface* self, const gchar* document_hint, gboolean save) {
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	const gchar* _tmp2_ = NULL;
	gboolean _tmp10_ = FALSE;
#line 727 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 727 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (document_hint != NULL);
#line 729 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = document_hint;
#line 729 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = g_strdup (_tmp0_);
#line 729 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (self->priv->document_hint);
#line 729 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->document_hint = _tmp1_;
#line 731 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = document_hint;
#line 731 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (g_strcmp0 (_tmp2_, "text") == 0) {
#line 3427 "ui.c"
		GtkRadioMenuItem* _tmp3_ = NULL;
		GtkRadioMenuItem* _tmp4_ = NULL;
		GtkRadioMenuItem* _tmp5_ = NULL;
#line 733 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp3_ = self->priv->text_button_menuitem;
#line 733 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_check_menu_item_set_active ((GtkCheckMenuItem*) _tmp3_, TRUE);
#line 734 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp4_ = self->priv->text_button_hb_menuitem;
#line 734 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_check_menu_item_set_active ((GtkCheckMenuItem*) _tmp4_, TRUE);
#line 735 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp5_ = self->priv->text_menuitem;
#line 735 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_check_menu_item_set_active ((GtkCheckMenuItem*) _tmp5_, TRUE);
#line 3443 "ui.c"
	} else {
		const gchar* _tmp6_ = NULL;
#line 737 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp6_ = document_hint;
#line 737 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (g_strcmp0 (_tmp6_, "photo") == 0) {
#line 3450 "ui.c"
			GtkRadioMenuItem* _tmp7_ = NULL;
			GtkRadioMenuItem* _tmp8_ = NULL;
			GtkRadioMenuItem* _tmp9_ = NULL;
#line 739 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp7_ = self->priv->photo_button_menuitem;
#line 739 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			gtk_check_menu_item_set_active ((GtkCheckMenuItem*) _tmp7_, TRUE);
#line 740 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp8_ = self->priv->photo_button_hb_menuitem;
#line 740 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			gtk_check_menu_item_set_active ((GtkCheckMenuItem*) _tmp8_, TRUE);
#line 741 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp9_ = self->priv->photo_menuitem;
#line 741 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			gtk_check_menu_item_set_active ((GtkCheckMenuItem*) _tmp9_, TRUE);
#line 3466 "ui.c"
		}
	}
#line 744 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp10_ = save;
#line 744 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp10_) {
#line 3473 "ui.c"
		GSettings* _tmp11_ = NULL;
		const gchar* _tmp12_ = NULL;
#line 745 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp11_ = self->priv->settings;
#line 745 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp12_ = document_hint;
#line 745 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_settings_set_string (_tmp11_, "document-type", _tmp12_);
#line 3482 "ui.c"
	}
}


static void user_interface_text_menuitem_toggled_cb (UserInterface* self, GtkCheckMenuItem* widget) {
	GtkCheckMenuItem* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
#line 749 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 749 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 751 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = widget;
#line 751 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = gtk_check_menu_item_get_active (_tmp0_);
#line 751 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 751 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp2_) {
#line 752 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_set_document_hint (self, "text", TRUE);
#line 3505 "ui.c"
	}
}


static void _user_interface_text_menuitem_toggled_cb_gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_text_menuitem_toggled_cb ((UserInterface*) self, _sender);
#line 3513 "ui.c"
}


static void user_interface_photo_menuitem_toggled_cb (UserInterface* self, GtkCheckMenuItem* widget) {
	GtkCheckMenuItem* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
#line 756 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 756 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 758 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = widget;
#line 758 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = gtk_check_menu_item_get_active (_tmp0_);
#line 758 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 758 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp2_) {
#line 759 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_set_document_hint (self, "photo", TRUE);
#line 3535 "ui.c"
	}
}


static void _user_interface_photo_menuitem_toggled_cb_gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_photo_menuitem_toggled_cb ((UserInterface*) self, _sender);
#line 3543 "ui.c"
}


static void user_interface_set_page_side (UserInterface* self, ScanType page_side) {
	GtkTreeIter iter = {0};
	GtkListStore* _tmp0_ = NULL;
	GtkTreeIter _tmp1_ = {0};
	gboolean _tmp2_ = FALSE;
#line 762 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 766 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->page_side_model;
#line 766 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = gtk_tree_model_get_iter_first ((GtkTreeModel*) _tmp0_, &_tmp1_);
#line 766 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	iter = _tmp1_;
#line 766 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp2_) {
#line 3562 "ui.c"
		{
			gboolean _tmp3_ = FALSE;
#line 768 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp3_ = TRUE;
#line 768 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			while (TRUE) {
#line 3569 "ui.c"
				gint s = 0;
				GtkListStore* _tmp6_ = NULL;
				GtkTreeIter _tmp7_ = {0};
				gint _tmp8_ = 0;
				ScanType _tmp9_ = 0;
#line 768 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				if (!_tmp3_) {
#line 3577 "ui.c"
					GtkListStore* _tmp4_ = NULL;
					gboolean _tmp5_ = FALSE;
#line 777 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp4_ = self->priv->page_side_model;
#line 777 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp5_ = gtk_tree_model_iter_next ((GtkTreeModel*) _tmp4_, &iter);
#line 777 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					if (!_tmp5_) {
#line 777 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						break;
#line 3588 "ui.c"
					}
				}
#line 768 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp3_ = FALSE;
#line 771 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp6_ = self->priv->page_side_model;
#line 771 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp7_ = iter;
#line 771 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				gtk_tree_model_get ((GtkTreeModel*) _tmp6_, &_tmp7_, 0, &s, -1, -1);
#line 772 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp8_ = s;
#line 772 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp9_ = page_side;
#line 772 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				if (_tmp8_ == ((gint) _tmp9_)) {
#line 3605 "ui.c"
					GtkComboBox* _tmp10_ = NULL;
					GtkTreeIter _tmp11_ = {0};
#line 774 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp10_ = self->priv->page_side_combo;
#line 774 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp11_ = iter;
#line 774 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					gtk_combo_box_set_active_iter (_tmp10_, &_tmp11_);
#line 775 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					return;
#line 3616 "ui.c"
				}
			}
		}
	}
}


static void user_interface_set_paper_size (UserInterface* self, gint width, gint height) {
	GtkTreeIter iter = {0};
	gboolean have_iter = FALSE;
	gboolean _tmp14_ = FALSE;
	gboolean _tmp18_ = FALSE;
#line 781 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 3631 "ui.c"
	{
		GtkListStore* _tmp0_ = NULL;
		GtkTreeIter _tmp1_ = {0};
		gboolean _tmp2_ = FALSE;
		gboolean _tmp3_ = FALSE;
#line 786 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp0_ = self->priv->paper_size_model;
#line 786 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp2_ = gtk_tree_model_get_iter_first ((GtkTreeModel*) _tmp0_, &_tmp1_);
#line 786 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		iter = _tmp1_;
#line 786 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		have_iter = _tmp2_;
#line 786 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp3_ = TRUE;
#line 786 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		while (TRUE) {
#line 3649 "ui.c"
			gboolean _tmp6_ = FALSE;
			gint w = 0;
			gint h = 0;
			GtkListStore* _tmp7_ = NULL;
			GtkTreeIter _tmp8_ = {0};
			gboolean _tmp9_ = FALSE;
			gint _tmp10_ = 0;
			gint _tmp11_ = 0;
#line 786 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			if (!_tmp3_) {
#line 3660 "ui.c"
				GtkListStore* _tmp4_ = NULL;
				gboolean _tmp5_ = FALSE;
#line 788 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp4_ = self->priv->paper_size_model;
#line 788 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp5_ = gtk_tree_model_iter_next ((GtkTreeModel*) _tmp4_, &iter);
#line 788 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				have_iter = _tmp5_;
#line 3669 "ui.c"
			}
#line 786 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp3_ = FALSE;
#line 787 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp6_ = have_iter;
#line 787 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			if (!_tmp6_) {
#line 787 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				break;
#line 3679 "ui.c"
			}
#line 791 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp7_ = self->priv->paper_size_model;
#line 791 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp8_ = iter;
#line 791 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			gtk_tree_model_get ((GtkTreeModel*) _tmp7_, &_tmp8_, 0, &w, 1, &h, -1, -1);
#line 792 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp10_ = w;
#line 792 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp11_ = width;
#line 792 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			if (_tmp10_ == _tmp11_) {
#line 3693 "ui.c"
				gint _tmp12_ = 0;
				gint _tmp13_ = 0;
#line 792 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp12_ = h;
#line 792 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp13_ = height;
#line 792 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp9_ = _tmp12_ == _tmp13_;
#line 3702 "ui.c"
			} else {
#line 792 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp9_ = FALSE;
#line 3706 "ui.c"
			}
#line 792 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			if (_tmp9_) {
#line 793 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				break;
#line 3712 "ui.c"
			}
		}
	}
#line 796 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp14_ = have_iter;
#line 796 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (!_tmp14_) {
#line 3720 "ui.c"
		GtkListStore* _tmp15_ = NULL;
		GtkTreeIter _tmp16_ = {0};
		gboolean _tmp17_ = FALSE;
#line 797 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp15_ = self->priv->paper_size_model;
#line 797 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp17_ = gtk_tree_model_get_iter_first ((GtkTreeModel*) _tmp15_, &_tmp16_);
#line 797 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		iter = _tmp16_;
#line 797 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		have_iter = _tmp17_;
#line 3732 "ui.c"
	}
#line 798 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp18_ = have_iter;
#line 798 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp18_) {
#line 3738 "ui.c"
		GtkComboBox* _tmp19_ = NULL;
		GtkTreeIter _tmp20_ = {0};
#line 799 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp19_ = self->priv->paper_size_combo;
#line 799 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp20_ = iter;
#line 799 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_combo_box_set_active_iter (_tmp19_, &_tmp20_);
#line 3747 "ui.c"
	}
}


static gint user_interface_get_text_dpi (UserInterface* self) {
	gint result = 0;
	GtkTreeIter iter = {0};
	gint dpi = 0;
	GtkComboBox* _tmp0_ = NULL;
	GtkTreeIter _tmp1_ = {0};
	gboolean _tmp2_ = FALSE;
#line 802 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, 0);
#line 805 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	dpi = USER_INTERFACE_DEFAULT_TEXT_DPI;
#line 807 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->text_dpi_combo;
#line 807 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = gtk_combo_box_get_active_iter (_tmp0_, &_tmp1_);
#line 807 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	iter = _tmp1_;
#line 807 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp2_) {
#line 3771 "ui.c"
		GtkListStore* _tmp3_ = NULL;
		GtkTreeIter _tmp4_ = {0};
#line 808 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp3_ = self->priv->text_dpi_model;
#line 808 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp4_ = iter;
#line 808 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_tree_model_get ((GtkTreeModel*) _tmp3_, &_tmp4_, 0, &dpi, -1, -1);
#line 3780 "ui.c"
	}
#line 810 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = dpi;
#line 810 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 3786 "ui.c"
}


static gint user_interface_get_photo_dpi (UserInterface* self) {
	gint result = 0;
	GtkTreeIter iter = {0};
	gint dpi = 0;
	GtkComboBox* _tmp0_ = NULL;
	GtkTreeIter _tmp1_ = {0};
	gboolean _tmp2_ = FALSE;
#line 813 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, 0);
#line 816 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	dpi = USER_INTERFACE_DEFAULT_PHOTO_DPI;
#line 818 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->photo_dpi_combo;
#line 818 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = gtk_combo_box_get_active_iter (_tmp0_, &_tmp1_);
#line 818 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	iter = _tmp1_;
#line 818 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp2_) {
#line 3809 "ui.c"
		GtkListStore* _tmp3_ = NULL;
		GtkTreeIter _tmp4_ = {0};
#line 819 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp3_ = self->priv->photo_dpi_model;
#line 819 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp4_ = iter;
#line 819 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_tree_model_get ((GtkTreeModel*) _tmp3_, &_tmp4_, 0, &dpi, -1, -1);
#line 3818 "ui.c"
	}
#line 821 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = dpi;
#line 821 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 3824 "ui.c"
}


static ScanType user_interface_get_page_side (UserInterface* self) {
	ScanType result = 0;
	GtkTreeIter iter = {0};
	gint page_side = 0;
	GtkComboBox* _tmp0_ = NULL;
	GtkTreeIter _tmp1_ = {0};
	gboolean _tmp2_ = FALSE;
	gint _tmp5_ = 0;
#line 824 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, 0);
#line 827 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	page_side = (gint) SCAN_TYPE_ADF_BOTH;
#line 829 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->page_side_combo;
#line 829 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = gtk_combo_box_get_active_iter (_tmp0_, &_tmp1_);
#line 829 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	iter = _tmp1_;
#line 829 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp2_) {
#line 3848 "ui.c"
		GtkListStore* _tmp3_ = NULL;
		GtkTreeIter _tmp4_ = {0};
#line 830 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp3_ = self->priv->page_side_model;
#line 830 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp4_ = iter;
#line 830 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_tree_model_get ((GtkTreeModel*) _tmp3_, &_tmp4_, 0, &page_side, -1, -1);
#line 3857 "ui.c"
	}
#line 832 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = page_side;
#line 832 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = (ScanType) _tmp5_;
#line 832 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 3865 "ui.c"
}


static gboolean user_interface_get_paper_size (UserInterface* self, gint* width, gint* height) {
	gint _vala_width = 0;
	gint _vala_height = 0;
	gboolean result = FALSE;
	GtkTreeIter iter = {0};
	gint _tmp0_ = 0;
	GtkComboBox* _tmp1_ = NULL;
	GtkTreeIter _tmp2_ = {0};
	gboolean _tmp3_ = FALSE;
#line 835 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 839 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_vala_height = 0;
#line 839 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = _vala_height;
#line 839 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_vala_width = _tmp0_;
#line 840 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = self->priv->paper_size_combo;
#line 840 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = gtk_combo_box_get_active_iter (_tmp1_, &_tmp2_);
#line 840 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	iter = _tmp2_;
#line 840 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp3_) {
#line 3894 "ui.c"
		GtkListStore* _tmp4_ = NULL;
		GtkTreeIter _tmp5_ = {0};
#line 842 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp4_ = self->priv->paper_size_model;
#line 842 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp5_ = iter;
#line 842 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_tree_model_get ((GtkTreeModel*) _tmp4_, &_tmp5_, 0, &_vala_width, 1, &_vala_height, -1, -1);
#line 843 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		result = TRUE;
#line 843 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (width) {
#line 843 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			*width = _vala_width;
#line 3909 "ui.c"
		}
#line 843 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (height) {
#line 843 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			*height = _vala_height;
#line 3915 "ui.c"
		}
#line 843 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return result;
#line 3919 "ui.c"
	}
#line 846 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = FALSE;
#line 846 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (width) {
#line 846 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		*width = _vala_width;
#line 3927 "ui.c"
	}
#line 846 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (height) {
#line 846 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		*height = _vala_height;
#line 3933 "ui.c"
	}
#line 846 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 3937 "ui.c"
}


static ScanOptions* user_interface_make_scan_options (UserInterface* self) {
	ScanOptions* result = NULL;
	ScanOptions* options = NULL;
	ScanOptions* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	ScanOptions* _tmp10_ = NULL;
	ScanOptions* _tmp11_ = NULL;
	gint _tmp12_ = 0;
	gint _tmp13_ = 0;
	ScanOptions* _tmp14_ = NULL;
	gint _tmp15_ = 0;
	gint _tmp16_ = 0;
	ScanOptions* _tmp17_ = NULL;
	gint _tmp18_ = 0;
	gint _tmp19_ = 0;
#line 849 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 851 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = scan_options_new ();
#line 851 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	options = _tmp0_;
#line 852 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = self->priv->document_hint;
#line 852 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (g_strcmp0 (_tmp1_, "text") == 0) {
#line 3966 "ui.c"
		ScanOptions* _tmp2_ = NULL;
		ScanOptions* _tmp3_ = NULL;
		gint _tmp4_ = 0;
		ScanOptions* _tmp5_ = NULL;
#line 854 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp2_ = options;
#line 854 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp2_->scan_mode = SCAN_MODE_GRAY;
#line 855 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp3_ = options;
#line 855 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp4_ = user_interface_get_text_dpi (self);
#line 855 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp3_->dpi = _tmp4_;
#line 856 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp5_ = options;
#line 856 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp5_->depth = 2;
#line 3985 "ui.c"
	} else {
		ScanOptions* _tmp6_ = NULL;
		ScanOptions* _tmp7_ = NULL;
		gint _tmp8_ = 0;
		ScanOptions* _tmp9_ = NULL;
#line 860 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp6_ = options;
#line 860 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp6_->scan_mode = SCAN_MODE_COLOR;
#line 861 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp7_ = options;
#line 861 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp8_ = user_interface_get_photo_dpi (self);
#line 861 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp7_->dpi = _tmp8_;
#line 862 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp9_ = options;
#line 862 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp9_->depth = 8;
#line 4005 "ui.c"
	}
#line 864 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp10_ = options;
#line 864 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp11_ = options;
#line 864 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_get_paper_size (self, &_tmp12_, &_tmp13_);
#line 864 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp10_->paper_width = _tmp12_;
#line 864 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp11_->paper_height = _tmp13_;
#line 865 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp14_ = options;
#line 865 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp15_ = user_interface_get_brightness (self);
#line 865 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp16_ = _tmp15_;
#line 865 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp14_->brightness = _tmp16_;
#line 866 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp17_ = options;
#line 866 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp18_ = user_interface_get_contrast (self);
#line 866 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp19_ = _tmp18_;
#line 866 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp17_->contrast = _tmp19_;
#line 868 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = options;
#line 868 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 4037 "ui.c"
}


static void user_interface_scan_button_clicked_cb (UserInterface* self, GtkWidget* widget) {
	ScanOptions* options = NULL;
	ScanOptions* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
	gchar* _tmp3_ = NULL;
#line 872 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 872 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 874 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = user_interface_make_scan_options (self);
#line 874 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	options = _tmp0_;
#line 875 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	options->type = SCAN_TYPE_SINGLE;
#line 876 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = user_interface_get_selected_device (self);
#line 876 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 876 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = _tmp2_;
#line 876 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_emit_by_name (self, "start-scan", _tmp3_, options);
#line 876 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (_tmp3_);
#line 872 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_scan_options_unref0 (options);
#line 4069 "ui.c"
}


static void _user_interface_scan_button_clicked_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_scan_button_clicked_cb ((UserInterface*) self, _sender);
#line 4076 "ui.c"
}


static void user_interface_stop_scan_button_clicked_cb (UserInterface* self, GtkWidget* widget) {
#line 880 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 880 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 882 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_emit_by_name (self, "stop-scan");
#line 4087 "ui.c"
}


static void _user_interface_stop_scan_button_clicked_cb_gtk_button_clicked (GtkButton* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_stop_scan_button_clicked_cb ((UserInterface*) self, _sender);
#line 4094 "ui.c"
}


static void user_interface_continuous_scan_button_clicked_cb (UserInterface* self, GtkWidget* widget) {
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
#line 886 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 886 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 888 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = user_interface_get_scanning (self);
#line 888 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = _tmp0_;
#line 888 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp1_) {
#line 889 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_signal_emit_by_name (self, "stop-scan");
#line 4113 "ui.c"
	} else {
		ScanOptions* options = NULL;
		ScanOptions* _tmp2_ = NULL;
		ScanOptions* _tmp3_ = NULL;
		ScanType _tmp4_ = 0;
		gchar* _tmp5_ = NULL;
		gchar* _tmp6_ = NULL;
		gchar* _tmp7_ = NULL;
		ScanOptions* _tmp8_ = NULL;
#line 892 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp2_ = user_interface_make_scan_options (self);
#line 892 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		options = _tmp2_;
#line 893 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp3_ = options;
#line 893 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp4_ = user_interface_get_page_side (self);
#line 893 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp3_->type = _tmp4_;
#line 894 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp5_ = user_interface_get_selected_device (self);
#line 894 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp6_ = _tmp5_;
#line 894 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp7_ = _tmp6_;
#line 894 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp8_ = options;
#line 894 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_signal_emit_by_name (self, "start-scan", _tmp7_, _tmp8_);
#line 894 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (_tmp7_);
#line 888 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_scan_options_unref0 (options);
#line 4147 "ui.c"
	}
}


static void _user_interface_continuous_scan_button_clicked_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_continuous_scan_button_clicked_cb ((UserInterface*) self, _sender);
#line 4155 "ui.c"
}


static void user_interface_preferences_button_clicked_cb (UserInterface* self, GtkWidget* widget) {
	GtkDialog* _tmp0_ = NULL;
#line 899 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 899 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 901 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->preferences_dialog;
#line 901 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_window_present ((GtkWindow*) _tmp0_);
#line 4169 "ui.c"
}


static void _user_interface_preferences_button_clicked_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_preferences_button_clicked_cb ((UserInterface*) self, _sender);
#line 4176 "ui.c"
}


void user_interface_preferences_activate_cb (UserInterface* self) {
	GtkDialog* _tmp0_ = NULL;
#line 904 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 906 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->preferences_dialog;
#line 906 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_window_present ((GtkWindow*) _tmp0_);
#line 4188 "ui.c"
}


static gboolean user_interface_preferences_dialog_delete_event_cb (UserInterface* self, GtkWidget* widget, GdkEventAny* event) {
	gboolean result = FALSE;
#line 910 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 910 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (widget != NULL, FALSE);
#line 910 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 912 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = TRUE;
#line 912 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 4204 "ui.c"
}


static gboolean _user_interface_preferences_dialog_delete_event_cb_gtk_widget_delete_event (GtkWidget* _sender, GdkEventAny* event, gpointer self) {
	gboolean result;
	result = user_interface_preferences_dialog_delete_event_cb ((UserInterface*) self, _sender, event);
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 4213 "ui.c"
}


static void user_interface_preferences_dialog_response_cb (UserInterface* self, GtkWidget* widget, gint response_id) {
	GtkDialog* _tmp0_ = NULL;
#line 916 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 916 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 918 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->preferences_dialog;
#line 918 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp0_, FALSE);
#line 4227 "ui.c"
}


static void _user_interface_preferences_dialog_response_cb_gtk_dialog_response (GtkDialog* _sender, gint response_id, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_preferences_dialog_response_cb ((UserInterface*) self, _sender, response_id);
#line 4234 "ui.c"
}


static gpointer _page_ref0 (gpointer self) {
#line 923 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return self ? page_ref (self) : NULL;
#line 4241 "ui.c"
}


static void user_interface_update_page_menu (UserInterface* self) {
	Page* page = NULL;
	BookView* _tmp0_ = NULL;
	Page* _tmp1_ = NULL;
	Page* _tmp2_ = NULL;
	Page* _tmp3_ = NULL;
	Page* _tmp4_ = NULL;
#line 921 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 923 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->book_view;
#line 923 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = book_view_get_selected_page (_tmp0_);
#line 923 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 923 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = _page_ref0 (_tmp2_);
#line 923 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	page = _tmp3_;
#line 924 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = page;
#line 924 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp4_ == NULL) {
#line 4268 "ui.c"
		GtkMenuItem* _tmp5_ = NULL;
		GtkMenuItem* _tmp6_ = NULL;
#line 926 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp5_ = self->priv->page_move_left_menuitem;
#line 926 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_widget_set_sensitive ((GtkWidget*) _tmp5_, FALSE);
#line 927 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp6_ = self->priv->page_move_right_menuitem;
#line 927 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_widget_set_sensitive ((GtkWidget*) _tmp6_, FALSE);
#line 4279 "ui.c"
	} else {
		guint index = 0U;
		Book* _tmp7_ = NULL;
		Page* _tmp8_ = NULL;
		guint _tmp9_ = 0U;
		GtkMenuItem* _tmp10_ = NULL;
		guint _tmp11_ = 0U;
		GtkMenuItem* _tmp12_ = NULL;
		guint _tmp13_ = 0U;
		Book* _tmp14_ = NULL;
		guint _tmp15_ = 0U;
		guint _tmp16_ = 0U;
#line 931 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp7_ = self->priv->_book;
#line 931 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp8_ = page;
#line 931 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp9_ = book_get_page_index (_tmp7_, _tmp8_);
#line 931 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		index = _tmp9_;
#line 932 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp10_ = self->priv->page_move_left_menuitem;
#line 932 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp11_ = index;
#line 932 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_widget_set_sensitive ((GtkWidget*) _tmp10_, _tmp11_ > ((guint) 0));
#line 933 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp12_ = self->priv->page_move_right_menuitem;
#line 933 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp13_ = index;
#line 933 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp14_ = self->priv->_book;
#line 933 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp15_ = book_get_n_pages (_tmp14_);
#line 933 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp16_ = _tmp15_;
#line 933 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_widget_set_sensitive ((GtkWidget*) _tmp12_, _tmp13_ < (_tmp16_ - 1));
#line 4318 "ui.c"
	}
#line 921 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_page_unref0 (page);
#line 4322 "ui.c"
}


static void user_interface_page_selected_cb (UserInterface* self, BookView* view, Page* page) {
	Page* _tmp0_ = NULL;
	GtkRadioMenuItem* menuitem = NULL;
	GtkRadioMenuItem* _tmp1_ = NULL;
	GtkRadioMenuItem* _tmp2_ = NULL;
	Page* _tmp3_ = NULL;
	gboolean _tmp4_ = FALSE;
	gboolean _tmp5_ = FALSE;
	GtkRadioMenuItem* _tmp31_ = NULL;
	GtkToggleButton* _tmp32_ = NULL;
	Page* _tmp33_ = NULL;
	gboolean _tmp34_ = FALSE;
	gboolean _tmp35_ = FALSE;
	GtkToggleToolButton* _tmp36_ = NULL;
	Page* _tmp37_ = NULL;
	gboolean _tmp38_ = FALSE;
	gboolean _tmp39_ = FALSE;
#line 937 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 937 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (view != NULL);
#line 939 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = page;
#line 939 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp0_ == NULL) {
#line 940 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return;
#line 4353 "ui.c"
	}
#line 942 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->updating_page_menu = TRUE;
#line 944 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_update_page_menu (self);
#line 946 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = self->priv->no_crop_menuitem;
#line 946 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _g_object_ref0 (_tmp1_);
#line 946 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	menuitem = _tmp2_;
#line 947 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = page;
#line 947 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = page_get_has_crop (_tmp3_);
#line 947 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = _tmp4_;
#line 947 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp5_) {
#line 4373 "ui.c"
		gchar* crop_name = NULL;
		Page* _tmp6_ = NULL;
		const gchar* _tmp7_ = NULL;
		const gchar* _tmp8_ = NULL;
		gchar* _tmp9_ = NULL;
		const gchar* _tmp10_ = NULL;
#line 949 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp6_ = page;
#line 949 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp7_ = page_get_crop_name (_tmp6_);
#line 949 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp8_ = _tmp7_;
#line 949 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp9_ = g_strdup (_tmp8_);
#line 949 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		crop_name = _tmp9_;
#line 950 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp10_ = crop_name;
#line 950 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (_tmp10_ != NULL) {
#line 4394 "ui.c"
			const gchar* _tmp11_ = NULL;
#line 952 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp11_ = crop_name;
#line 952 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			if (g_strcmp0 (_tmp11_, "A4") == 0) {
#line 4400 "ui.c"
				GtkRadioMenuItem* _tmp12_ = NULL;
				GtkRadioMenuItem* _tmp13_ = NULL;
#line 953 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp12_ = self->priv->a4_menuitem;
#line 953 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp13_ = _g_object_ref0 (_tmp12_);
#line 953 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_g_object_unref0 (menuitem);
#line 953 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				menuitem = _tmp13_;
#line 4411 "ui.c"
			} else {
				const gchar* _tmp14_ = NULL;
#line 954 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp14_ = crop_name;
#line 954 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				if (g_strcmp0 (_tmp14_, "A5") == 0) {
#line 4418 "ui.c"
					GtkRadioMenuItem* _tmp15_ = NULL;
					GtkRadioMenuItem* _tmp16_ = NULL;
#line 955 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp15_ = self->priv->a5_menuitem;
#line 955 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp16_ = _g_object_ref0 (_tmp15_);
#line 955 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_g_object_unref0 (menuitem);
#line 955 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					menuitem = _tmp16_;
#line 4429 "ui.c"
				} else {
					const gchar* _tmp17_ = NULL;
#line 956 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp17_ = crop_name;
#line 956 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					if (g_strcmp0 (_tmp17_, "A6") == 0) {
#line 4436 "ui.c"
						GtkRadioMenuItem* _tmp18_ = NULL;
						GtkRadioMenuItem* _tmp19_ = NULL;
#line 957 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						_tmp18_ = self->priv->a6_menuitem;
#line 957 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						_tmp19_ = _g_object_ref0 (_tmp18_);
#line 957 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						_g_object_unref0 (menuitem);
#line 957 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						menuitem = _tmp19_;
#line 4447 "ui.c"
					} else {
						const gchar* _tmp20_ = NULL;
#line 958 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						_tmp20_ = crop_name;
#line 958 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						if (g_strcmp0 (_tmp20_, "letter") == 0) {
#line 4454 "ui.c"
							GtkRadioMenuItem* _tmp21_ = NULL;
							GtkRadioMenuItem* _tmp22_ = NULL;
#line 959 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp21_ = self->priv->letter_menuitem;
#line 959 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp22_ = _g_object_ref0 (_tmp21_);
#line 959 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_g_object_unref0 (menuitem);
#line 959 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							menuitem = _tmp22_;
#line 4465 "ui.c"
						} else {
							const gchar* _tmp23_ = NULL;
#line 960 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp23_ = crop_name;
#line 960 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							if (g_strcmp0 (_tmp23_, "legal") == 0) {
#line 4472 "ui.c"
								GtkRadioMenuItem* _tmp24_ = NULL;
								GtkRadioMenuItem* _tmp25_ = NULL;
#line 961 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
								_tmp24_ = self->priv->legal_menuitem;
#line 961 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
								_tmp25_ = _g_object_ref0 (_tmp24_);
#line 961 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
								_g_object_unref0 (menuitem);
#line 961 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
								menuitem = _tmp25_;
#line 4483 "ui.c"
							} else {
								const gchar* _tmp26_ = NULL;
#line 962 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
								_tmp26_ = crop_name;
#line 962 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
								if (g_strcmp0 (_tmp26_, "4x6") == 0) {
#line 4490 "ui.c"
									GtkRadioMenuItem* _tmp27_ = NULL;
									GtkRadioMenuItem* _tmp28_ = NULL;
#line 963 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
									_tmp27_ = self->priv->four_by_six_menuitem;
#line 963 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
									_tmp28_ = _g_object_ref0 (_tmp27_);
#line 963 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
									_g_object_unref0 (menuitem);
#line 963 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
									menuitem = _tmp28_;
#line 4501 "ui.c"
								}
							}
						}
					}
				}
			}
		} else {
			GtkRadioMenuItem* _tmp29_ = NULL;
			GtkRadioMenuItem* _tmp30_ = NULL;
#line 966 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp29_ = self->priv->custom_crop_menuitem;
#line 966 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp30_ = _g_object_ref0 (_tmp29_);
#line 966 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_g_object_unref0 (menuitem);
#line 966 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			menuitem = _tmp30_;
#line 4519 "ui.c"
		}
#line 947 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (crop_name);
#line 4523 "ui.c"
	}
#line 969 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp31_ = menuitem;
#line 969 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_check_menu_item_set_active ((GtkCheckMenuItem*) _tmp31_, TRUE);
#line 970 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp32_ = self->priv->crop_button;
#line 970 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp33_ = page;
#line 970 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp34_ = page_get_has_crop (_tmp33_);
#line 970 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp35_ = _tmp34_;
#line 970 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_toggle_button_set_active (_tmp32_, _tmp35_);
#line 971 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp36_ = self->priv->crop_toolbutton;
#line 971 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp37_ = page;
#line 971 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp38_ = page_get_has_crop (_tmp37_);
#line 971 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp39_ = _tmp38_;
#line 971 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_toggle_tool_button_set_active (_tmp36_, _tmp39_);
#line 973 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->updating_page_menu = FALSE;
#line 937 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (menuitem);
#line 4553 "ui.c"
}


static void user_interface_show_page_cb (UserInterface* self, BookView* view, Page* page) {
	gchar* path = NULL;
	gchar* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	GFile* file = NULL;
	const gchar* _tmp2_ = NULL;
	GFile* _tmp3_ = NULL;
	GError * _inner_error_ = NULL;
#line 976 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 976 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (view != NULL);
#line 976 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (page != NULL);
#line 978 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = get_temporary_filename ("scanned-page", "tiff");
#line 978 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	path = _tmp0_;
#line 979 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = path;
#line 979 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp1_ == NULL) {
#line 980 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (path);
#line 980 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return;
#line 4583 "ui.c"
	}
#line 981 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = path;
#line 981 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = g_file_new_for_path (_tmp2_);
#line 981 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	file = _tmp3_;
#line 4591 "ui.c"
	{
		Page* _tmp4_ = NULL;
		gint _tmp5_ = 0;
		gint _tmp6_ = 0;
		GFile* _tmp7_ = NULL;
#line 985 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp4_ = page;
#line 985 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp5_ = user_interface_get_quality (self);
#line 985 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp6_ = _tmp5_;
#line 985 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp7_ = file;
#line 985 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		page_save (_tmp4_, "tiff", _tmp6_, _tmp7_, &_inner_error_);
#line 985 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (_inner_error_ != NULL) {
#line 4609 "ui.c"
			goto __catch17_g_error;
		}
	}
	goto __finally17;
	__catch17_g_error:
	{
		GError* e = NULL;
		const gchar* _tmp8_ = NULL;
		GError* _tmp9_ = NULL;
		const gchar* _tmp10_ = NULL;
#line 983 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		e = _inner_error_;
#line 983 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_inner_error_ = NULL;
#line 989 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp8_ = _ ("Unable to save image for preview");
#line 989 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp9_ = e;
#line 989 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp10_ = _tmp9_->message;
#line 989 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_show_error_dialog (self, _tmp8_, _tmp10_);
#line 992 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_error_free0 (e);
#line 992 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_object_unref0 (file);
#line 992 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (path);
#line 992 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return;
#line 4640 "ui.c"
	}
	__finally17:
#line 983 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_inner_error_ != NULL) {
#line 983 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_object_unref0 (file);
#line 983 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (path);
#line 983 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 983 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_clear_error (&_inner_error_);
#line 983 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return;
#line 4655 "ui.c"
	}
	{
		GdkScreen* _tmp11_ = NULL;
		GdkScreen* _tmp12_ = NULL;
		GFile* _tmp13_ = NULL;
		gchar* _tmp14_ = NULL;
		gchar* _tmp15_ = NULL;
		guint32 _tmp16_ = 0U;
#line 997 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp11_ = gtk_window_get_screen ((GtkWindow*) self);
#line 997 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp12_ = _tmp11_;
#line 997 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp13_ = file;
#line 997 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp14_ = g_file_get_uri (_tmp13_);
#line 997 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp15_ = _tmp14_;
#line 997 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp16_ = gtk_get_current_event_time ();
#line 997 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_show_uri (_tmp12_, _tmp15_, _tmp16_, &_inner_error_);
#line 997 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (_tmp15_);
#line 997 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (_inner_error_ != NULL) {
#line 4682 "ui.c"
			goto __catch18_g_error;
		}
	}
	goto __finally18;
	__catch18_g_error:
	{
		GError* e = NULL;
		const gchar* _tmp17_ = NULL;
		GError* _tmp18_ = NULL;
		const gchar* _tmp19_ = NULL;
#line 995 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		e = _inner_error_;
#line 995 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_inner_error_ = NULL;
#line 1001 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp17_ = _ ("Unable to open image preview application");
#line 1001 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp18_ = e;
#line 1001 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp19_ = _tmp18_->message;
#line 1001 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_show_error_dialog (self, _tmp17_, _tmp19_);
#line 995 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_error_free0 (e);
#line 4707 "ui.c"
	}
	__finally18:
#line 995 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_inner_error_ != NULL) {
#line 995 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_object_unref0 (file);
#line 995 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (path);
#line 995 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 995 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_clear_error (&_inner_error_);
#line 995 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return;
#line 4722 "ui.c"
	}
#line 976 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (file);
#line 976 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (path);
#line 4728 "ui.c"
}


static void user_interface_show_page_menu_cb (UserInterface* self, BookView* view) {
	GtkMenu* _tmp0_ = NULL;
	guint32 _tmp1_ = 0U;
#line 1007 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1007 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (view != NULL);
#line 1009 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->page_menu;
#line 1009 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = gtk_get_current_event_time ();
#line 1009 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_menu_popup (_tmp0_, NULL, NULL, NULL, NULL, (guint) 3, _tmp1_);
#line 4745 "ui.c"
}


static void user_interface_rotate_left_button_clicked_cb (UserInterface* self, GtkWidget* widget) {
	gboolean _tmp0_ = FALSE;
	Page* page = NULL;
	BookView* _tmp1_ = NULL;
	Page* _tmp2_ = NULL;
	Page* _tmp3_ = NULL;
	Page* _tmp4_ = NULL;
	Page* _tmp5_ = NULL;
#line 1013 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1013 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1015 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->updating_page_menu;
#line 1015 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp0_) {
#line 1016 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return;
#line 4767 "ui.c"
	}
#line 1017 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = self->priv->book_view;
#line 1017 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = book_view_get_selected_page (_tmp1_);
#line 1017 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = _tmp2_;
#line 1017 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = _page_ref0 (_tmp3_);
#line 1017 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	page = _tmp4_;
#line 1018 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = page;
#line 1018 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp5_ != NULL) {
#line 4783 "ui.c"
		Page* _tmp6_ = NULL;
#line 1019 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp6_ = page;
#line 1019 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		page_rotate_left (_tmp6_);
#line 4789 "ui.c"
	}
#line 1013 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_page_unref0 (page);
#line 4793 "ui.c"
}


static void _user_interface_rotate_left_button_clicked_cb_gtk_button_clicked (GtkButton* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_rotate_left_button_clicked_cb ((UserInterface*) self, _sender);
#line 4800 "ui.c"
}


static void user_interface_rotate_right_button_clicked_cb (UserInterface* self, GtkWidget* widget) {
	gboolean _tmp0_ = FALSE;
	Page* page = NULL;
	BookView* _tmp1_ = NULL;
	Page* _tmp2_ = NULL;
	Page* _tmp3_ = NULL;
	Page* _tmp4_ = NULL;
	Page* _tmp5_ = NULL;
#line 1023 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1023 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1025 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->updating_page_menu;
#line 1025 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp0_) {
#line 1026 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return;
#line 4822 "ui.c"
	}
#line 1027 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = self->priv->book_view;
#line 1027 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = book_view_get_selected_page (_tmp1_);
#line 1027 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = _tmp2_;
#line 1027 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = _page_ref0 (_tmp3_);
#line 1027 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	page = _tmp4_;
#line 1028 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = page;
#line 1028 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp5_ != NULL) {
#line 4838 "ui.c"
		Page* _tmp6_ = NULL;
#line 1029 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp6_ = page;
#line 1029 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		page_rotate_right (_tmp6_);
#line 4844 "ui.c"
	}
#line 1023 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_page_unref0 (page);
#line 4848 "ui.c"
}


static void _user_interface_rotate_right_button_clicked_cb_gtk_button_clicked (GtkButton* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_rotate_right_button_clicked_cb ((UserInterface*) self, _sender);
#line 4855 "ui.c"
}


static void user_interface_set_crop (UserInterface* self, const gchar* crop_name) {
	GtkMenuItem* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	gboolean _tmp2_ = FALSE;
	Page* page = NULL;
	BookView* _tmp3_ = NULL;
	Page* _tmp4_ = NULL;
	Page* _tmp5_ = NULL;
	Page* _tmp6_ = NULL;
	Page* _tmp7_ = NULL;
	const gchar* _tmp8_ = NULL;
#line 1032 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1034 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->crop_rotate_menuitem;
#line 1034 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = crop_name;
#line 1034 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_sensitive ((GtkWidget*) _tmp0_, _tmp1_ != NULL);
#line 1036 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = self->priv->updating_page_menu;
#line 1036 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp2_) {
#line 1037 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return;
#line 4884 "ui.c"
	}
#line 1039 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = self->priv->book_view;
#line 1039 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = book_view_get_selected_page (_tmp3_);
#line 1039 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = _tmp4_;
#line 1039 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp6_ = _page_ref0 (_tmp5_);
#line 1039 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	page = _tmp6_;
#line 1040 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp7_ = page;
#line 1040 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp7_ == NULL) {
#line 1042 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_warning ("ui.vala:1042: Trying to set crop but no selected page");
#line 1043 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_page_unref0 (page);
#line 1043 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return;
#line 4906 "ui.c"
	}
#line 1046 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp8_ = crop_name;
#line 1046 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp8_ == NULL) {
#line 4912 "ui.c"
		Page* _tmp9_ = NULL;
#line 1047 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp9_ = page;
#line 1047 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		page_set_no_crop (_tmp9_);
#line 4918 "ui.c"
	} else {
		const gchar* _tmp10_ = NULL;
#line 1048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp10_ = crop_name;
#line 1048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (g_strcmp0 (_tmp10_, "custom") == 0) {
#line 4925 "ui.c"
			gint width = 0;
			Page* _tmp11_ = NULL;
			gint _tmp12_ = 0;
			gint _tmp13_ = 0;
			gint height = 0;
			Page* _tmp14_ = NULL;
			gint _tmp15_ = 0;
			gint _tmp16_ = 0;
			gint crop_width = 0;
			gint _tmp17_ = 0;
			gint crop_height = 0;
			gint _tmp18_ = 0;
			Page* _tmp19_ = NULL;
			gint _tmp20_ = 0;
			gint _tmp21_ = 0;
			Page* _tmp22_ = NULL;
			gint _tmp23_ = 0;
			gint _tmp24_ = 0;
			gint _tmp25_ = 0;
			gint _tmp26_ = 0;
#line 1050 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp11_ = page;
#line 1050 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp12_ = page_get_width (_tmp11_);
#line 1050 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp13_ = _tmp12_;
#line 1050 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			width = _tmp13_;
#line 1051 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp14_ = page;
#line 1051 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp15_ = page_get_height (_tmp14_);
#line 1051 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp16_ = _tmp15_;
#line 1051 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			height = _tmp16_;
#line 1052 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp17_ = width;
#line 1052 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			crop_width = (gint) ((_tmp17_ * 0.8) + 0.5);
#line 1053 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp18_ = height;
#line 1053 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			crop_height = (gint) ((_tmp18_ * 0.8) + 0.5);
#line 1054 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp19_ = page;
#line 1054 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp20_ = crop_width;
#line 1054 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp21_ = crop_height;
#line 1054 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			page_set_custom_crop (_tmp19_, _tmp20_, _tmp21_);
#line 1055 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp22_ = page;
#line 1055 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp23_ = width;
#line 1055 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp24_ = crop_width;
#line 1055 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp25_ = height;
#line 1055 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp26_ = crop_height;
#line 1055 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			page_move_crop (_tmp22_, (_tmp23_ - _tmp24_) / 2, (_tmp25_ - _tmp26_) / 2);
#line 4990 "ui.c"
		} else {
			Page* _tmp27_ = NULL;
			const gchar* _tmp28_ = NULL;
#line 1058 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp27_ = page;
#line 1058 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp28_ = crop_name;
#line 1058 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			page_set_named_crop (_tmp27_, _tmp28_);
#line 5000 "ui.c"
		}
	}
#line 1032 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_page_unref0 (page);
#line 5005 "ui.c"
}


static void user_interface_no_crop_menuitem_toggled_cb (UserInterface* self, GtkCheckMenuItem* widget) {
	GtkCheckMenuItem* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
#line 1062 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1062 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1064 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = widget;
#line 1064 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = gtk_check_menu_item_get_active (_tmp0_);
#line 1064 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 1064 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp2_) {
#line 1065 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_set_crop (self, NULL);
#line 5027 "ui.c"
	}
}


static void _user_interface_no_crop_menuitem_toggled_cb_gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_no_crop_menuitem_toggled_cb ((UserInterface*) self, _sender);
#line 5035 "ui.c"
}


static void user_interface_custom_crop_menuitem_toggled_cb (UserInterface* self, GtkCheckMenuItem* widget) {
	GtkCheckMenuItem* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
#line 1069 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1069 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1071 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = widget;
#line 1071 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = gtk_check_menu_item_get_active (_tmp0_);
#line 1071 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 1071 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp2_) {
#line 1072 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_set_crop (self, "custom");
#line 5057 "ui.c"
	}
}


static void _user_interface_custom_crop_menuitem_toggled_cb_gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_custom_crop_menuitem_toggled_cb ((UserInterface*) self, _sender);
#line 5065 "ui.c"
}


static void user_interface_crop_button_toggled_cb (UserInterface* self, GtkToggleButton* widget) {
	gboolean _tmp0_ = FALSE;
	GtkToggleButton* _tmp1_ = NULL;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
#line 1076 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1076 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1078 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->updating_page_menu;
#line 1078 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp0_) {
#line 1079 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return;
#line 5084 "ui.c"
	}
#line 1081 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = widget;
#line 1081 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = gtk_toggle_button_get_active (_tmp1_);
#line 1081 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = _tmp2_;
#line 1081 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp3_) {
#line 5094 "ui.c"
		GtkRadioMenuItem* _tmp4_ = NULL;
#line 1082 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp4_ = self->priv->custom_crop_menuitem;
#line 1082 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_check_menu_item_set_active ((GtkCheckMenuItem*) _tmp4_, TRUE);
#line 5100 "ui.c"
	} else {
		GtkRadioMenuItem* _tmp5_ = NULL;
#line 1084 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp5_ = self->priv->no_crop_menuitem;
#line 1084 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_check_menu_item_set_active ((GtkCheckMenuItem*) _tmp5_, TRUE);
#line 5107 "ui.c"
	}
}


static void _user_interface_crop_button_toggled_cb_gtk_toggle_button_toggled (GtkToggleButton* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_crop_button_toggled_cb ((UserInterface*) self, _sender);
#line 5115 "ui.c"
}


static void user_interface_crop_toolbutton_toggled_cb (UserInterface* self, GtkToggleToolButton* widget) {
	gboolean _tmp0_ = FALSE;
	GtkToggleToolButton* _tmp1_ = NULL;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
#line 1088 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1088 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1090 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->updating_page_menu;
#line 1090 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp0_) {
#line 1091 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return;
#line 5134 "ui.c"
	}
#line 1093 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = widget;
#line 1093 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = gtk_toggle_tool_button_get_active (_tmp1_);
#line 1093 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = _tmp2_;
#line 1093 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp3_) {
#line 5144 "ui.c"
		GtkRadioMenuItem* _tmp4_ = NULL;
#line 1094 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp4_ = self->priv->custom_crop_menuitem;
#line 1094 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_check_menu_item_set_active ((GtkCheckMenuItem*) _tmp4_, TRUE);
#line 5150 "ui.c"
	} else {
		GtkRadioMenuItem* _tmp5_ = NULL;
#line 1096 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp5_ = self->priv->no_crop_menuitem;
#line 1096 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_check_menu_item_set_active ((GtkCheckMenuItem*) _tmp5_, TRUE);
#line 5157 "ui.c"
	}
}


static void _user_interface_crop_toolbutton_toggled_cb_gtk_toggle_tool_button_toggled (GtkToggleToolButton* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_crop_toolbutton_toggled_cb ((UserInterface*) self, _sender);
#line 5165 "ui.c"
}


static void user_interface_four_by_six_menuitem_toggled_cb (UserInterface* self, GtkCheckMenuItem* widget) {
	GtkCheckMenuItem* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
#line 1100 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1100 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1102 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = widget;
#line 1102 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = gtk_check_menu_item_get_active (_tmp0_);
#line 1102 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 1102 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp2_) {
#line 1103 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_set_crop (self, "4x6");
#line 5187 "ui.c"
	}
}


static void _user_interface_four_by_six_menuitem_toggled_cb_gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_four_by_six_menuitem_toggled_cb ((UserInterface*) self, _sender);
#line 5195 "ui.c"
}


static void user_interface_legal_menuitem_toggled_cb (UserInterface* self, GtkCheckMenuItem* widget) {
	GtkCheckMenuItem* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
#line 1107 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1107 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1109 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = widget;
#line 1109 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = gtk_check_menu_item_get_active (_tmp0_);
#line 1109 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 1109 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp2_) {
#line 1110 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_set_crop (self, "legal");
#line 5217 "ui.c"
	}
}


static void _user_interface_legal_menuitem_toggled_cb_gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_legal_menuitem_toggled_cb ((UserInterface*) self, _sender);
#line 5225 "ui.c"
}


static void user_interface_letter_menuitem_toggled_cb (UserInterface* self, GtkCheckMenuItem* widget) {
	GtkCheckMenuItem* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
#line 1114 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1114 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1116 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = widget;
#line 1116 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = gtk_check_menu_item_get_active (_tmp0_);
#line 1116 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 1116 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp2_) {
#line 1117 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_set_crop (self, "letter");
#line 5247 "ui.c"
	}
}


static void _user_interface_letter_menuitem_toggled_cb_gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_letter_menuitem_toggled_cb ((UserInterface*) self, _sender);
#line 5255 "ui.c"
}


static void user_interface_a6_menuitem_toggled_cb (UserInterface* self, GtkCheckMenuItem* widget) {
	GtkCheckMenuItem* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
#line 1121 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1121 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1123 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = widget;
#line 1123 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = gtk_check_menu_item_get_active (_tmp0_);
#line 1123 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 1123 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp2_) {
#line 1124 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_set_crop (self, "A6");
#line 5277 "ui.c"
	}
}


static void _user_interface_a6_menuitem_toggled_cb_gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_a6_menuitem_toggled_cb ((UserInterface*) self, _sender);
#line 5285 "ui.c"
}


static void user_interface_a5_menuitem_toggled_cb (UserInterface* self, GtkCheckMenuItem* widget) {
	GtkCheckMenuItem* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
#line 1128 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1128 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1130 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = widget;
#line 1130 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = gtk_check_menu_item_get_active (_tmp0_);
#line 1130 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 1130 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp2_) {
#line 1131 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_set_crop (self, "A5");
#line 5307 "ui.c"
	}
}


static void _user_interface_a5_menuitem_toggled_cb_gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_a5_menuitem_toggled_cb ((UserInterface*) self, _sender);
#line 5315 "ui.c"
}


static void user_interface_a4_menuitem_toggled_cb (UserInterface* self, GtkCheckMenuItem* widget) {
	GtkCheckMenuItem* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
#line 1135 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1135 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1137 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = widget;
#line 1137 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = gtk_check_menu_item_get_active (_tmp0_);
#line 1137 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 1137 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp2_) {
#line 1138 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_set_crop (self, "A4");
#line 5337 "ui.c"
	}
}


static void _user_interface_a4_menuitem_toggled_cb_gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_a4_menuitem_toggled_cb ((UserInterface*) self, _sender);
#line 5345 "ui.c"
}


static void user_interface_crop_rotate_menuitem_activate_cb (UserInterface* self, GtkWidget* widget) {
	Page* page = NULL;
	BookView* _tmp0_ = NULL;
	Page* _tmp1_ = NULL;
	Page* _tmp2_ = NULL;
	Page* _tmp3_ = NULL;
	Page* _tmp4_ = NULL;
	Page* _tmp5_ = NULL;
#line 1142 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1142 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1144 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->book_view;
#line 1144 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = book_view_get_selected_page (_tmp0_);
#line 1144 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 1144 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = _page_ref0 (_tmp2_);
#line 1144 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	page = _tmp3_;
#line 1145 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = page;
#line 1145 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp4_ == NULL) {
#line 1146 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_page_unref0 (page);
#line 1146 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return;
#line 5379 "ui.c"
	}
#line 1147 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = page;
#line 1147 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	page_rotate_crop (_tmp5_);
#line 1142 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_page_unref0 (page);
#line 5387 "ui.c"
}


static void _user_interface_crop_rotate_menuitem_activate_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_crop_rotate_menuitem_activate_cb ((UserInterface*) self, _sender);
#line 5394 "ui.c"
}


static void user_interface_page_move_left_menuitem_activate_cb (UserInterface* self, GtkWidget* widget) {
	Page* page = NULL;
	BookView* _tmp0_ = NULL;
	Page* _tmp1_ = NULL;
	Page* _tmp2_ = NULL;
	Page* _tmp3_ = NULL;
	guint index = 0U;
	Book* _tmp4_ = NULL;
	Page* _tmp5_ = NULL;
	guint _tmp6_ = 0U;
	guint _tmp7_ = 0U;
#line 1151 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1151 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1153 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->book_view;
#line 1153 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = book_view_get_selected_page (_tmp0_);
#line 1153 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 1153 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = _page_ref0 (_tmp2_);
#line 1153 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	page = _tmp3_;
#line 1154 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = self->priv->_book;
#line 1154 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = page;
#line 1154 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp6_ = book_get_page_index (_tmp4_, _tmp5_);
#line 1154 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	index = _tmp6_;
#line 1155 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp7_ = index;
#line 1155 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp7_ > ((guint) 0)) {
#line 5435 "ui.c"
		Book* _tmp8_ = NULL;
		Page* _tmp9_ = NULL;
		guint _tmp10_ = 0U;
#line 1156 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp8_ = self->priv->_book;
#line 1156 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp9_ = page;
#line 1156 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp10_ = index;
#line 1156 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		book_move_page (_tmp8_, _tmp9_, _tmp10_ - 1);
#line 5447 "ui.c"
	}
#line 1151 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_page_unref0 (page);
#line 5451 "ui.c"
}


static void _user_interface_page_move_left_menuitem_activate_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_page_move_left_menuitem_activate_cb ((UserInterface*) self, _sender);
#line 5458 "ui.c"
}


static void user_interface_page_move_right_menuitem_activate_cb (UserInterface* self, GtkWidget* widget) {
	Page* page = NULL;
	BookView* _tmp0_ = NULL;
	Page* _tmp1_ = NULL;
	Page* _tmp2_ = NULL;
	Page* _tmp3_ = NULL;
	guint index = 0U;
	Book* _tmp4_ = NULL;
	Page* _tmp5_ = NULL;
	guint _tmp6_ = 0U;
	guint _tmp7_ = 0U;
	Book* _tmp8_ = NULL;
	guint _tmp9_ = 0U;
	guint _tmp10_ = 0U;
#line 1160 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1160 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1162 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->book_view;
#line 1162 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = book_view_get_selected_page (_tmp0_);
#line 1162 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 1162 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = _page_ref0 (_tmp2_);
#line 1162 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	page = _tmp3_;
#line 1163 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = self->priv->_book;
#line 1163 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = page;
#line 1163 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp6_ = book_get_page_index (_tmp4_, _tmp5_);
#line 1163 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	index = _tmp6_;
#line 1164 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp7_ = index;
#line 1164 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp8_ = self->priv->_book;
#line 1164 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp9_ = book_get_n_pages (_tmp8_);
#line 1164 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp10_ = _tmp9_;
#line 1164 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp7_ < (_tmp10_ - 1)) {
#line 5508 "ui.c"
		Book* _tmp11_ = NULL;
		Page* _tmp12_ = NULL;
		Book* _tmp13_ = NULL;
		Page* _tmp14_ = NULL;
		guint _tmp15_ = 0U;
#line 1165 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp11_ = self->priv->_book;
#line 1165 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp12_ = page;
#line 1165 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp13_ = self->priv->_book;
#line 1165 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp14_ = page;
#line 1165 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp15_ = book_get_page_index (_tmp13_, _tmp14_);
#line 1165 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		book_move_page (_tmp11_, _tmp12_, _tmp15_ + 1);
#line 5526 "ui.c"
	}
#line 1160 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_page_unref0 (page);
#line 5530 "ui.c"
}


static void _user_interface_page_move_right_menuitem_activate_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_page_move_right_menuitem_activate_cb ((UserInterface*) self, _sender);
#line 5537 "ui.c"
}


static void user_interface_page_delete_menuitem_activate_cb (UserInterface* self, GtkWidget* widget) {
	BookView* _tmp0_ = NULL;
	Book* _tmp1_ = NULL;
	Book* _tmp2_ = NULL;
	BookView* _tmp3_ = NULL;
	Page* _tmp4_ = NULL;
	Page* _tmp5_ = NULL;
#line 1169 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1169 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1171 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->book_view;
#line 1171 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = book_view_get_book (_tmp0_);
#line 1171 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 1171 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = self->priv->book_view;
#line 1171 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = book_view_get_selected_page (_tmp3_);
#line 1171 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = _tmp4_;
#line 1171 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	book_delete_page (_tmp2_, _tmp5_);
#line 5566 "ui.c"
}


static void _user_interface_page_delete_menuitem_activate_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_page_delete_menuitem_activate_cb ((UserInterface*) self, _sender);
#line 5573 "ui.c"
}


static Block1Data* block1_data_ref (Block1Data* _data1_) {
#line 1174 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_atomic_int_inc (&_data1_->_ref_count_);
#line 1174 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return _data1_;
#line 5582 "ui.c"
}


static void block1_data_unref (void * _userdata_) {
	Block1Data* _data1_;
	_data1_ = (Block1Data*) _userdata_;
#line 1174 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (g_atomic_int_dec_and_test (&_data1_->_ref_count_)) {
#line 5591 "ui.c"
		UserInterface* self;
#line 1174 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		self = _data1_->self;
#line 1174 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_object_unref0 (_data1_->dialog);
#line 1174 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_object_unref0 (self);
#line 1174 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_slice_free (Block1Data, _data1_);
#line 5601 "ui.c"
	}
}


static gboolean __lambda4_ (Block1Data* _data1_, GdkEventKey* e) {
	UserInterface* self;
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	GdkEventKey* _tmp1_ = NULL;
	GdkModifierType _tmp2_ = 0;
#line 1183 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self = _data1_->self;
#line 1183 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (e != NULL, FALSE);
#line 1185 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = e;
#line 1185 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_->state;
#line 1185 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp2_ == 0) {
#line 5622 "ui.c"
		GdkEventKey* _tmp3_ = NULL;
		guint _tmp4_ = 0U;
#line 1185 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp3_ = e;
#line 1185 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp4_ = _tmp3_->keyval;
#line 1185 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp0_ = _tmp4_ == ((guint) GDK_KEY_Escape);
#line 5631 "ui.c"
	} else {
#line 1185 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp0_ = FALSE;
#line 5635 "ui.c"
	}
#line 1185 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp0_) {
#line 1187 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_widget_destroy ((GtkWidget*) _data1_->dialog);
#line 1188 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		result = TRUE;
#line 1188 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return result;
#line 5645 "ui.c"
	}
#line 1191 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = FALSE;
#line 1191 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 5651 "ui.c"
}


static gboolean ___lambda4__gtk_widget_key_press_event (GtkWidget* _sender, GdkEventKey* event, gpointer self) {
	gboolean result;
	result = __lambda4_ (self, event);
#line 1183 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 5660 "ui.c"
}


static void __lambda5_ (Block1Data* _data1_) {
	UserInterface* self;
	Book* _tmp0_ = NULL;
#line 1205 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self = _data1_->self;
#line 1207 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->_book;
#line 1207 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	book_combine_sides (_tmp0_);
#line 1208 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_destroy ((GtkWidget*) _data1_->dialog);
#line 5675 "ui.c"
}


static void ___lambda5__gtk_button_clicked (GtkButton* _sender, gpointer self) {
#line 1205 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	__lambda5_ (self);
#line 5682 "ui.c"
}


static void __lambda6_ (Block1Data* _data1_) {
	UserInterface* self;
	Book* _tmp0_ = NULL;
#line 1215 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self = _data1_->self;
#line 1217 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->_book;
#line 1217 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	book_combine_sides_reverse (_tmp0_);
#line 1218 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_destroy ((GtkWidget*) _data1_->dialog);
#line 5697 "ui.c"
}


static void ___lambda6__gtk_button_clicked (GtkButton* _sender, gpointer self) {
#line 1215 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	__lambda6_ (self);
#line 5704 "ui.c"
}


static void __lambda7_ (Block1Data* _data1_) {
	UserInterface* self;
	Book* _tmp0_ = NULL;
#line 1225 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self = _data1_->self;
#line 1227 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->_book;
#line 1227 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	book_reverse (_tmp0_);
#line 1228 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_destroy ((GtkWidget*) _data1_->dialog);
#line 5719 "ui.c"
}


static void ___lambda7__gtk_button_clicked (GtkButton* _sender, gpointer self) {
#line 1225 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	__lambda7_ (self);
#line 5726 "ui.c"
}


static void __lambda8_ (Block1Data* _data1_) {
	UserInterface* self;
#line 1235 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self = _data1_->self;
#line 1237 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_destroy ((GtkWidget*) _data1_->dialog);
#line 5736 "ui.c"
}


static void ___lambda8__gtk_button_clicked (GtkButton* _sender, gpointer self) {
#line 1235 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	__lambda8_ (self);
#line 5743 "ui.c"
}


static void user_interface_reorder_document (UserInterface* self) {
	Block1Data* _data1_;
	GtkWindow* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	GtkGrid* g = NULL;
	GtkGrid* _tmp2_ = NULL;
	GtkButton* b = NULL;
	const gchar* _tmp3_ = NULL;
	GtkButton* _tmp4_ = NULL;
	GtkButton* _tmp5_ = NULL;
	GtkButton* _tmp6_ = NULL;
	GtkButton* _tmp7_ = NULL;
	const gchar* _tmp8_ = NULL;
	GtkButton* _tmp9_ = NULL;
	GtkButton* _tmp10_ = NULL;
	GtkButton* _tmp11_ = NULL;
	GtkButton* _tmp12_ = NULL;
	const gchar* _tmp13_ = NULL;
	GtkButton* _tmp14_ = NULL;
	GtkButton* _tmp15_ = NULL;
	GtkButton* _tmp16_ = NULL;
	GtkButton* _tmp17_ = NULL;
	const gchar* _tmp18_ = NULL;
	GtkButton* _tmp19_ = NULL;
	GtkButton* _tmp20_ = NULL;
	GtkButton* _tmp21_ = NULL;
	GtkButton* _tmp22_ = NULL;
#line 1174 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1174 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_data1_ = g_slice_new0 (Block1Data);
#line 1174 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_data1_->_ref_count_ = 1;
#line 1174 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_data1_->self = g_object_ref (self);
#line 1176 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = (GtkWindow*) gtk_window_new (GTK_WINDOW_TOPLEVEL);
#line 1176 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp0_);
#line 1176 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_data1_->dialog = _tmp0_;
#line 1177 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_window_set_type_hint (_data1_->dialog, GDK_WINDOW_TYPE_HINT_DIALOG);
#line 1178 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_window_set_modal (_data1_->dialog, TRUE);
#line 1179 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_container_set_border_width ((GtkContainer*) _data1_->dialog, (guint) 12);
#line 1181 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = _ ("Reorder Pages");
#line 1181 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_window_set_title (_data1_->dialog, _tmp1_);
#line 1182 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_window_set_transient_for (_data1_->dialog, (GtkWindow*) self);
#line 1183 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_data ((GtkWidget*) _data1_->dialog, "key-press-event", (GCallback) ___lambda4__gtk_widget_key_press_event, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
#line 1193 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) _data1_->dialog, TRUE);
#line 1195 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = (GtkGrid*) gtk_grid_new ();
#line 1195 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp2_);
#line 1195 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g = _tmp2_;
#line 1196 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_grid_set_row_homogeneous (g, TRUE);
#line 1197 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_grid_set_row_spacing (g, 6);
#line 1198 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_grid_set_column_homogeneous (g, TRUE);
#line 1199 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_grid_set_column_spacing (g, 6);
#line 1200 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) g, TRUE);
#line 1201 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_container_add ((GtkContainer*) _data1_->dialog, (GtkWidget*) g);
#line 1204 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = _ ("Combine sides");
#line 1204 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = user_interface_make_reorder_button (self, _tmp3_, "F1F2F3B1B2B3-F1B1F2B2F3B3");
#line 1204 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	b = _tmp4_;
#line 1205 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = b;
#line 1205 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_data (_tmp5_, "clicked", (GCallback) ___lambda5__gtk_button_clicked, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
#line 1210 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp6_ = b;
#line 1210 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp6_, TRUE);
#line 1211 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp7_ = b;
#line 1211 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_grid_attach (g, (GtkWidget*) _tmp7_, 0, 0, 1, 1);
#line 1214 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp8_ = _ ("Combine sides (reverse)");
#line 1214 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp9_ = user_interface_make_reorder_button (self, _tmp8_, "F1F2F3B3B2B1-F1B1F2B2F3B3");
#line 1214 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (b);
#line 1214 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	b = _tmp9_;
#line 1215 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp10_ = b;
#line 1215 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_data (_tmp10_, "clicked", (GCallback) ___lambda6__gtk_button_clicked, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
#line 1220 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp11_ = b;
#line 1220 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp11_, TRUE);
#line 1221 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp12_ = b;
#line 1221 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_grid_attach (g, (GtkWidget*) _tmp12_, 1, 0, 1, 1);
#line 1224 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp13_ = _ ("Reverse");
#line 1224 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp14_ = user_interface_make_reorder_button (self, _tmp13_, "C1C2C3C4C5C6-C6C5C4C3C2C1");
#line 1224 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (b);
#line 1224 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	b = _tmp14_;
#line 1225 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp15_ = b;
#line 1225 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_data (_tmp15_, "clicked", (GCallback) ___lambda7__gtk_button_clicked, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
#line 1230 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp16_ = b;
#line 1230 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp16_, TRUE);
#line 1231 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp17_ = b;
#line 1231 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_grid_attach (g, (GtkWidget*) _tmp17_, 0, 2, 1, 1);
#line 1234 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp18_ = _ ("Keep unchanged");
#line 1234 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp19_ = user_interface_make_reorder_button (self, _tmp18_, "C1C2C3C4C5C6-C1C2C3C4C5C6");
#line 1234 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (b);
#line 1234 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	b = _tmp19_;
#line 1235 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp20_ = b;
#line 1235 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_data (_tmp20_, "clicked", (GCallback) ___lambda8__gtk_button_clicked, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
#line 1239 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp21_ = b;
#line 1239 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp21_, TRUE);
#line 1240 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp22_ = b;
#line 1240 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_grid_attach (g, (GtkWidget*) _tmp22_, 1, 2, 1, 1);
#line 1242 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_window_present (_data1_->dialog);
#line 1174 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (b);
#line 1174 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (g);
#line 1174 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	block1_data_unref (_data1_);
#line 1174 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_data1_ = NULL;
#line 5910 "ui.c"
}


void user_interface_reorder_document_activate_cb (UserInterface* self) {
#line 1245 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1247 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_reorder_document (self);
#line 5919 "ui.c"
}


static void user_interface_reorder_menuitem_activate_cb (UserInterface* self, GtkWidget* widget) {
#line 1251 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1251 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1253 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_reorder_document (self);
#line 5930 "ui.c"
}


static void _user_interface_reorder_menuitem_activate_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_reorder_menuitem_activate_cb ((UserInterface*) self, _sender);
#line 5937 "ui.c"
}


static GtkButton* user_interface_make_reorder_button (UserInterface* self, const gchar* text, const gchar* items) {
	GtkButton* result = NULL;
	GtkButton* b = NULL;
	GtkButton* _tmp0_ = NULL;
	GtkBox* vbox = NULL;
	GtkBox* _tmp1_ = NULL;
	GtkLabel* label = NULL;
	const gchar* _tmp2_ = NULL;
	GtkLabel* _tmp3_ = NULL;
	GtkBox* rb = NULL;
	const gchar* _tmp4_ = NULL;
	GtkBox* _tmp5_ = NULL;
#line 1256 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 1256 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (text != NULL, NULL);
#line 1256 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (items != NULL, NULL);
#line 1258 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = (GtkButton*) gtk_button_new ();
#line 1258 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp0_);
#line 1258 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	b = _tmp0_;
#line 1260 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_VERTICAL, 6);
#line 1260 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp1_);
#line 1260 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	vbox = _tmp1_;
#line 1261 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) vbox, TRUE);
#line 1262 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_container_add ((GtkContainer*) b, (GtkWidget*) vbox);
#line 1264 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = text;
#line 1264 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = (GtkLabel*) gtk_label_new (_tmp2_);
#line 1264 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp3_);
#line 1264 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	label = _tmp3_;
#line 1265 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) label, TRUE);
#line 1266 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_box_pack_start (vbox, (GtkWidget*) label, TRUE, TRUE, (guint) 0);
#line 1268 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = items;
#line 1268 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = user_interface_make_reorder_box (self, _tmp4_);
#line 1268 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	rb = _tmp5_;
#line 1269 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) rb, TRUE);
#line 1270 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_box_pack_start (vbox, (GtkWidget*) rb, TRUE, TRUE, (guint) 0);
#line 1272 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = b;
#line 1272 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (rb);
#line 1272 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (label);
#line 1272 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (vbox);
#line 1272 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 6007 "ui.c"
}


static gchar string_get (const gchar* self, glong index) {
	gchar result = '\0';
	glong _tmp0_ = 0L;
	gchar _tmp1_ = '\0';
#line 996 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, '\0');
#line 997 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp0_ = index;
#line 997 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	_tmp1_ = ((gchar*) self)[_tmp0_];
#line 997 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	result = _tmp1_;
#line 997 "/usr/share/vala-0.24/vapi/glib-2.0.vapi"
	return result;
#line 6025 "ui.c"
}


static GtkBox* user_interface_make_reorder_box (UserInterface* self, const gchar* items) {
	GtkBox* result = NULL;
	GtkBox* box = NULL;
	GtkBox* _tmp0_ = NULL;
	GtkBox* _tmp1_ = NULL;
	GtkBox* page_box = NULL;
#line 1275 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 1275 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (items != NULL, NULL);
#line 1277 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_HORIZONTAL, 6);
#line 1277 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp0_);
#line 1277 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	box = _tmp0_;
#line 1278 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = box;
#line 1278 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp1_, TRUE);
#line 1280 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	page_box = NULL;
#line 6051 "ui.c"
	{
		gint i = 0;
#line 1281 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		i = 0;
#line 6056 "ui.c"
		{
			gboolean _tmp2_ = FALSE;
#line 1281 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp2_ = TRUE;
#line 1281 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			while (TRUE) {
#line 6063 "ui.c"
				const gchar* _tmp4_ = NULL;
				gint _tmp5_ = 0;
				gchar _tmp6_ = '\0';
				const gchar* _tmp7_ = NULL;
				gint _tmp8_ = 0;
				gchar _tmp9_ = '\0';
				gchar side = '\0';
				const gchar* _tmp14_ = NULL;
				gint _tmp15_ = 0;
				gchar _tmp16_ = '\0';
				gint _tmp17_ = 0;
				const gchar* _tmp18_ = NULL;
				gint _tmp19_ = 0;
				gchar _tmp20_ = '\0';
				GtkBox* _tmp21_ = NULL;
				gdouble r = 0.0;
				gdouble g = 0.0;
				gdouble b = 0.0;
				gchar _tmp26_ = '\0';
				gdouble _tmp33_ = 0.0;
				gdouble _tmp34_ = 0.0;
				gdouble _tmp35_ = 0.0;
				gdouble _tmp36_ = 0.0;
				gdouble _tmp37_ = 0.0;
				gdouble _tmp38_ = 0.0;
				PageIcon* icon = NULL;
				const gchar* _tmp39_ = NULL;
				gint _tmp40_ = 0;
				gchar _tmp41_ = '\0';
				gchar* _tmp42_ = NULL;
				gchar* _tmp43_ = NULL;
				gdouble _tmp44_ = 0.0;
				gdouble _tmp45_ = 0.0;
				gdouble _tmp46_ = 0.0;
				PageIcon* _tmp47_ = NULL;
				PageIcon* _tmp48_ = NULL;
				PageIcon* _tmp49_ = NULL;
				GtkBox* _tmp50_ = NULL;
				PageIcon* _tmp51_ = NULL;
#line 1281 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				if (!_tmp2_) {
#line 6105 "ui.c"
					gint _tmp3_ = 0;
#line 1281 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp3_ = i;
#line 1281 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					i = _tmp3_ + 1;
#line 6111 "ui.c"
				}
#line 1281 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp2_ = FALSE;
#line 1281 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp4_ = items;
#line 1281 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp5_ = i;
#line 1281 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp6_ = string_get (_tmp4_, (glong) _tmp5_);
#line 1281 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				if (!(_tmp6_ != '\0')) {
#line 1281 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					break;
#line 6125 "ui.c"
				}
#line 1283 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp7_ = items;
#line 1283 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp8_ = i;
#line 1283 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp9_ = string_get (_tmp7_, (glong) _tmp8_);
#line 1283 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				if (_tmp9_ == '-') {
#line 6135 "ui.c"
					GtkArrow* a = NULL;
					GtkArrow* _tmp10_ = NULL;
					GtkArrow* _tmp11_ = NULL;
					GtkBox* _tmp12_ = NULL;
					GtkArrow* _tmp13_ = NULL;
#line 1285 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp10_ = (GtkArrow*) gtk_arrow_new (GTK_ARROW_RIGHT, GTK_SHADOW_NONE);
#line 1285 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					g_object_ref_sink (_tmp10_);
#line 1285 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					a = _tmp10_;
#line 1286 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp11_ = a;
#line 1286 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					gtk_widget_set_visible ((GtkWidget*) _tmp11_, TRUE);
#line 1287 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp12_ = box;
#line 1287 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp13_ = a;
#line 1287 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					gtk_box_pack_start (_tmp12_, (GtkWidget*) _tmp13_, FALSE, FALSE, (guint) 0);
#line 1288 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_g_object_unref0 (page_box);
#line 1288 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					page_box = NULL;
#line 1289 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_g_object_unref0 (a);
#line 1289 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					continue;
#line 6165 "ui.c"
				}
#line 1293 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp14_ = items;
#line 1293 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp15_ = i;
#line 1293 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp16_ = string_get (_tmp14_, (glong) _tmp15_);
#line 1293 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				side = _tmp16_;
#line 1294 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp17_ = i;
#line 1294 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				i = _tmp17_ + 1;
#line 1295 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp18_ = items;
#line 1295 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp19_ = i;
#line 1295 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp20_ = string_get (_tmp18_, (glong) _tmp19_);
#line 1295 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				if (_tmp20_ == '\0') {
#line 1296 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					break;
#line 6189 "ui.c"
				}
#line 1298 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp21_ = page_box;
#line 1298 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				if (_tmp21_ == NULL) {
#line 6195 "ui.c"
					GtkBox* _tmp22_ = NULL;
					GtkBox* _tmp23_ = NULL;
					GtkBox* _tmp24_ = NULL;
					GtkBox* _tmp25_ = NULL;
#line 1300 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp22_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_HORIZONTAL, 3);
#line 1300 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					g_object_ref_sink (_tmp22_);
#line 1300 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_g_object_unref0 (page_box);
#line 1300 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					page_box = _tmp22_;
#line 1301 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp23_ = page_box;
#line 1301 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					gtk_widget_set_visible ((GtkWidget*) _tmp23_, TRUE);
#line 1302 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp24_ = box;
#line 1302 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp25_ = page_box;
#line 1302 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					gtk_box_pack_start (_tmp24_, (GtkWidget*) _tmp25_, FALSE, FALSE, (guint) 0);
#line 6218 "ui.c"
				}
#line 1306 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				r = 1.0;
#line 1307 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				g = 1.0;
#line 1308 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				b = 1.0;
#line 1309 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp26_ = side;
#line 1309 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				switch (_tmp26_) {
#line 1309 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					case 'F':
#line 6232 "ui.c"
					{
#line 1313 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						r = 0x75 / 255.0;
#line 1314 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						g = 0x50 / 255.0;
#line 1315 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						b = 0x7B / 255.0;
#line 1316 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						break;
#line 6242 "ui.c"
					}
#line 1309 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					case 'B':
#line 6246 "ui.c"
					{
#line 1319 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						r = 0xF5 / 255.0;
#line 1320 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						g = 0x79 / 255.0;
#line 1321 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						b = 0.0;
#line 1322 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						break;
#line 6256 "ui.c"
					}
#line 1309 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					case 'C':
#line 6260 "ui.c"
					{
						gdouble p = 0.0;
						const gchar* _tmp27_ = NULL;
						gint _tmp28_ = 0;
						gchar _tmp29_ = '\0';
						gdouble _tmp30_ = 0.0;
						gdouble _tmp31_ = 0.0;
						gdouble _tmp32_ = 0.0;
#line 1325 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						_tmp27_ = items;
#line 1325 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						_tmp28_ = i;
#line 1325 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						_tmp29_ = string_get (_tmp27_, (glong) _tmp28_);
#line 1325 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						p = (_tmp29_ - '1') / 5.0;
#line 1326 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						_tmp30_ = p;
#line 1326 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						_tmp31_ = p;
#line 1326 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						r = ((0xED / 255.0) * (1 - _tmp30_)) + (0xCC * _tmp31_);
#line 1327 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						_tmp32_ = p;
#line 1327 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						g = (0xD4 / 255.0) * (1 - _tmp32_);
#line 1328 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						b = (gdouble) 0;
#line 1329 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						break;
#line 6291 "ui.c"
					}
					default:
#line 1309 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					break;
#line 6296 "ui.c"
				}
#line 1333 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp33_ = r;
#line 1333 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp34_ = r;
#line 1333 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				r = _tmp33_ + ((1.0 - _tmp34_) * 0.7);
#line 1334 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp35_ = g;
#line 1334 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp36_ = g;
#line 1334 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				g = _tmp35_ + ((1.0 - _tmp36_) * 0.7);
#line 1335 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp37_ = b;
#line 1335 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp38_ = b;
#line 1335 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				b = _tmp37_ + ((1.0 - _tmp38_) * 0.7);
#line 1337 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp39_ = items;
#line 1337 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp40_ = i;
#line 1337 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp41_ = string_get (_tmp39_, (glong) _tmp40_);
#line 1337 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp42_ = g_strdup_printf ("%c", (gint) _tmp41_);
#line 1337 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp43_ = _tmp42_;
#line 1337 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp44_ = r;
#line 1337 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp45_ = g;
#line 1337 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp46_ = b;
#line 1337 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp47_ = page_icon_new (_tmp43_, _tmp44_, _tmp45_, _tmp46_);
#line 1337 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				g_object_ref_sink (_tmp47_);
#line 1337 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp48_ = _tmp47_;
#line 1337 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_g_free0 (_tmp43_);
#line 1337 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				icon = _tmp48_;
#line 1338 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp49_ = icon;
#line 1338 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				gtk_widget_set_visible ((GtkWidget*) _tmp49_, TRUE);
#line 1339 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp50_ = page_box;
#line 1339 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp51_ = icon;
#line 1339 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				gtk_box_pack_start (_tmp50_, (GtkWidget*) _tmp51_, FALSE, FALSE, (guint) 0);
#line 1281 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_g_object_unref0 (icon);
#line 6354 "ui.c"
			}
		}
	}
#line 1342 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = box;
#line 1342 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (page_box);
#line 1342 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 6364 "ui.c"
}


static void user_interface_save_file_button_clicked_cb (UserInterface* self, GtkWidget* widget) {
#line 1346 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1346 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1348 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_save_document (self, FALSE);
#line 6375 "ui.c"
}


static void _user_interface_save_file_button_clicked_cb_gtk_button_clicked (GtkButton* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_save_file_button_clicked_cb ((UserInterface*) self, _sender);
#line 6382 "ui.c"
}


void user_interface_save_document_activate_cb (UserInterface* self) {
#line 1351 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1353 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_save_document (self, FALSE);
#line 6391 "ui.c"
}


static void user_interface_copy_to_clipboard_button_clicked_cb (UserInterface* self, GtkWidget* widget) {
	Page* page = NULL;
	BookView* _tmp0_ = NULL;
	Page* _tmp1_ = NULL;
	Page* _tmp2_ = NULL;
	Page* _tmp3_ = NULL;
	Page* _tmp4_ = NULL;
#line 1357 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1357 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1359 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->book_view;
#line 1359 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = book_view_get_selected_page (_tmp0_);
#line 1359 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 1359 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = _page_ref0 (_tmp2_);
#line 1359 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	page = _tmp3_;
#line 1360 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = page;
#line 1360 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp4_ != NULL) {
#line 6420 "ui.c"
		Page* _tmp5_ = NULL;
#line 1361 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp5_ = page;
#line 1361 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		page_copy_to_clipboard (_tmp5_, (GtkWindow*) self);
#line 6426 "ui.c"
	}
#line 1357 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_page_unref0 (page);
#line 6430 "ui.c"
}


static void _user_interface_copy_to_clipboard_button_clicked_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_copy_to_clipboard_button_clicked_cb ((UserInterface*) self, _sender);
#line 6437 "ui.c"
}


static void user_interface_save_as_file_button_clicked_cb (UserInterface* self, GtkWidget* widget) {
#line 1365 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1365 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1367 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_save_document (self, TRUE);
#line 6448 "ui.c"
}


static void _user_interface_save_as_file_button_clicked_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_save_as_file_button_clicked_cb ((UserInterface*) self, _sender);
#line 6455 "ui.c"
}


void user_interface_save_as_document_activate_cb (UserInterface* self) {
#line 1370 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1372 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_save_document (self, TRUE);
#line 6464 "ui.c"
}


static gpointer _cairo_reference0 (gpointer self) {
#line 1379 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return self ? cairo_reference (self) : NULL;
#line 6471 "ui.c"
}


static void user_interface_draw_page (UserInterface* self, GtkPrintOperation* operation, GtkPrintContext* print_context, gint page_number) {
	cairo_t* context = NULL;
	GtkPrintContext* _tmp0_ = NULL;
	cairo_t* _tmp1_ = NULL;
	cairo_t* _tmp2_ = NULL;
	Page* page = NULL;
	Book* _tmp3_ = NULL;
	gint _tmp4_ = 0;
	Page* _tmp5_ = NULL;
	gboolean is_landscape = FALSE;
	GtkPrintContext* _tmp6_ = NULL;
	gdouble _tmp7_ = 0.0;
	GtkPrintContext* _tmp8_ = NULL;
	gdouble _tmp9_ = 0.0;
	Page* _tmp10_ = NULL;
	gboolean _tmp11_ = FALSE;
	gboolean _tmp12_ = FALSE;
	gboolean _tmp13_ = FALSE;
	cairo_t* _tmp18_ = NULL;
	GtkPrintContext* _tmp19_ = NULL;
	gdouble _tmp20_ = 0.0;
	Page* _tmp21_ = NULL;
	gint _tmp22_ = 0;
	gint _tmp23_ = 0;
	GtkPrintContext* _tmp24_ = NULL;
	gdouble _tmp25_ = 0.0;
	Page* _tmp26_ = NULL;
	gint _tmp27_ = 0;
	gint _tmp28_ = 0;
	GdkPixbuf* image = NULL;
	Page* _tmp29_ = NULL;
	GdkPixbuf* _tmp30_ = NULL;
	cairo_t* _tmp31_ = NULL;
	cairo_t* _tmp32_ = NULL;
#line 1375 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1375 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (operation != NULL);
#line 1375 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (print_context != NULL);
#line 1379 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = print_context;
#line 1379 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = gtk_print_context_get_cairo_context (_tmp0_);
#line 1379 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _cairo_reference0 (_tmp1_);
#line 1379 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	context = _tmp2_;
#line 1380 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = self->priv->_book;
#line 1380 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = page_number;
#line 1380 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = book_get_page (_tmp3_, _tmp4_);
#line 1380 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	page = _tmp5_;
#line 1383 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	is_landscape = FALSE;
#line 1384 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp6_ = print_context;
#line 1384 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp7_ = gtk_print_context_get_width (_tmp6_);
#line 1384 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp8_ = print_context;
#line 1384 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp9_ = gtk_print_context_get_height (_tmp8_);
#line 1384 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp7_ > _tmp9_) {
#line 1385 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		is_landscape = TRUE;
#line 6545 "ui.c"
	}
#line 1386 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp10_ = page;
#line 1386 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp11_ = page_get_is_landscape (_tmp10_);
#line 1386 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp12_ = _tmp11_;
#line 1386 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp13_ = is_landscape;
#line 1386 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp12_ != _tmp13_) {
#line 6557 "ui.c"
		cairo_t* _tmp14_ = NULL;
		GtkPrintContext* _tmp15_ = NULL;
		gdouble _tmp16_ = 0.0;
		cairo_t* _tmp17_ = NULL;
#line 1388 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp14_ = context;
#line 1388 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp15_ = print_context;
#line 1388 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp16_ = gtk_print_context_get_width (_tmp15_);
#line 1388 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		cairo_translate (_tmp14_, _tmp16_, (gdouble) 0);
#line 1389 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp17_ = context;
#line 1389 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		cairo_rotate (_tmp17_, G_PI_2);
#line 6574 "ui.c"
	}
#line 1392 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp18_ = context;
#line 1392 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp19_ = print_context;
#line 1392 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp20_ = gtk_print_context_get_dpi_x (_tmp19_);
#line 1392 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp21_ = page;
#line 1392 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp22_ = page_get_dpi (_tmp21_);
#line 1392 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp23_ = _tmp22_;
#line 1392 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp24_ = print_context;
#line 1392 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp25_ = gtk_print_context_get_dpi_y (_tmp24_);
#line 1392 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp26_ = page;
#line 1392 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp27_ = page_get_dpi (_tmp26_);
#line 1392 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp28_ = _tmp27_;
#line 1392 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	cairo_scale (_tmp18_, _tmp20_ / _tmp23_, _tmp25_ / _tmp28_);
#line 1395 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp29_ = page;
#line 1395 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp30_ = page_get_image (_tmp29_, TRUE);
#line 1395 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	image = _tmp30_;
#line 1396 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp31_ = context;
#line 1396 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gdk_cairo_set_source_pixbuf (_tmp31_, image, (gdouble) 0, (gdouble) 0);
#line 1397 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp32_ = context;
#line 1397 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	cairo_paint (_tmp32_);
#line 1375 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (image);
#line 1375 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_page_unref0 (page);
#line 1375 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_cairo_destroy0 (context);
#line 6620 "ui.c"
}


static void user_interface_email_button_clicked_cb (UserInterface* self, GtkWidget* widget) {
	const gchar* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	gint _tmp2_ = 0;
#line 1401 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1401 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1403 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->document_hint;
#line 1403 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = user_interface_get_quality (self);
#line 1403 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 1403 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_emit_by_name (self, "email", _tmp0_, _tmp2_);
#line 6640 "ui.c"
}


static void _user_interface_email_button_clicked_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_email_button_clicked_cb ((UserInterface*) self, _sender);
#line 6647 "ui.c"
}


void user_interface_email_document_activate_cb (UserInterface* self) {
	const gchar* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	gint _tmp2_ = 0;
#line 1406 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1408 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->document_hint;
#line 1408 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = user_interface_get_quality (self);
#line 1408 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 1408 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_emit_by_name (self, "email", _tmp0_, _tmp2_);
#line 6665 "ui.c"
}


static void _user_interface_draw_page_gtk_print_operation_draw_page (GtkPrintOperation* _sender, GtkPrintContext* context, gint page_nr, gpointer self) {
#line 1415 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_draw_page ((UserInterface*) self, _sender, context, page_nr);
#line 6672 "ui.c"
}


static void user_interface_print_document (UserInterface* self) {
	GtkPrintOperation* print = NULL;
	GtkPrintOperation* _tmp0_ = NULL;
	Book* _tmp1_ = NULL;
	guint _tmp2_ = 0U;
	guint _tmp3_ = 0U;
	guint _tmp6_ = 0U;
	GError * _inner_error_ = NULL;
#line 1411 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1413 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = gtk_print_operation_new ();
#line 1413 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	print = _tmp0_;
#line 1414 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = self->priv->_book;
#line 1414 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = book_get_n_pages (_tmp1_);
#line 1414 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = _tmp2_;
#line 1414 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_set (print, "n-pages", (gint) _tmp3_, NULL);
#line 1415 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_object (print, "draw-page", (GCallback) _user_interface_draw_page_gtk_print_operation_draw_page, self, 0);
#line 6700 "ui.c"
	{
#line 1419 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_print_operation_run (print, GTK_PRINT_OPERATION_ACTION_PRINT_DIALOG, (GtkWindow*) self, &_inner_error_);
#line 1419 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (_inner_error_ != NULL) {
#line 6706 "ui.c"
			goto __catch19_g_error;
		}
	}
	goto __finally19;
	__catch19_g_error:
	{
		GError* e = NULL;
		GError* _tmp4_ = NULL;
		const gchar* _tmp5_ = NULL;
#line 1417 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		e = _inner_error_;
#line 1417 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_inner_error_ = NULL;
#line 1423 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp4_ = e;
#line 1423 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp5_ = _tmp4_->message;
#line 1423 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_warning ("ui.vala:1423: Error printing: %s", _tmp5_);
#line 1417 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_error_free0 (e);
#line 6728 "ui.c"
	}
	__finally19:
#line 1417 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_inner_error_ != NULL) {
#line 1417 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_object_unref0 (print);
#line 1417 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 1417 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_clear_error (&_inner_error_);
#line 1417 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return;
#line 6741 "ui.c"
	}
#line 1426 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_parse_name ("draw-page", GTK_TYPE_PRINT_OPERATION, &_tmp6_, NULL, FALSE);
#line 1426 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_handlers_disconnect_matched (print, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp6_, 0, NULL, (GCallback) _user_interface_draw_page_gtk_print_operation_draw_page, self);
#line 1411 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (print);
#line 6749 "ui.c"
}


static void user_interface_print_button_clicked_cb (UserInterface* self, GtkWidget* widget) {
#line 1430 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1430 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1432 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_print_document (self);
#line 6760 "ui.c"
}


static void _user_interface_print_button_clicked_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_print_button_clicked_cb ((UserInterface*) self, _sender);
#line 6767 "ui.c"
}


void user_interface_print_document_activate_cb (UserInterface* self) {
#line 1435 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1437 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_print_document (self);
#line 6776 "ui.c"
}


static void user_interface_launch_help (UserInterface* self) {
	GError * _inner_error_ = NULL;
#line 1440 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 6784 "ui.c"
	{
		GdkScreen* _tmp0_ = NULL;
		GdkScreen* _tmp1_ = NULL;
		guint32 _tmp2_ = 0U;
#line 1444 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp0_ = gtk_window_get_screen ((GtkWindow*) self);
#line 1444 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp1_ = _tmp0_;
#line 1444 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp2_ = gtk_get_current_event_time ();
#line 1444 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_show_uri (_tmp1_, "help:simple-scan", _tmp2_, &_inner_error_);
#line 1444 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (_inner_error_ != NULL) {
#line 6799 "ui.c"
			goto __catch20_g_error;
		}
	}
	goto __finally20;
	__catch20_g_error:
	{
		GError* e = NULL;
		const gchar* _tmp3_ = NULL;
		GError* _tmp4_ = NULL;
		const gchar* _tmp5_ = NULL;
#line 1442 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		e = _inner_error_;
#line 1442 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_inner_error_ = NULL;
#line 1448 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp3_ = _ ("Unable to open help file");
#line 1448 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp4_ = e;
#line 1448 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp5_ = _tmp4_->message;
#line 1448 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_show_error_dialog (self, _tmp3_, _tmp5_);
#line 1442 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_error_free0 (e);
#line 6824 "ui.c"
	}
	__finally20:
#line 1442 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_inner_error_ != NULL) {
#line 1442 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 1442 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_clear_error (&_inner_error_);
#line 1442 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return;
#line 6835 "ui.c"
	}
}


static void user_interface_help_contents_menuitem_activate_cb (UserInterface* self, GtkWidget* widget) {
#line 1455 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1455 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1457 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_launch_help (self);
#line 6847 "ui.c"
}


static void _user_interface_help_contents_menuitem_activate_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_help_contents_menuitem_activate_cb ((UserInterface*) self, _sender);
#line 6854 "ui.c"
}


void user_interface_help_contents_activate_cb (UserInterface* self) {
#line 1460 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1462 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_launch_help (self);
#line 6863 "ui.c"
}


static void user_interface_show_about (UserInterface* self) {
	gchar** authors = NULL;
	gchar* _tmp0_ = NULL;
	gchar** _tmp1_ = NULL;
	gint authors_length1 = 0;
	gint _authors_size_ = 0;
	gchar* license = NULL;
	const gchar* _tmp2_ = NULL;
	gchar* _tmp3_ = NULL;
	gchar* title = NULL;
	const gchar* _tmp4_ = NULL;
	gchar* _tmp5_ = NULL;
	gchar* description = NULL;
	const gchar* _tmp6_ = NULL;
	gchar* _tmp7_ = NULL;
	const gchar* _tmp8_ = NULL;
#line 1465 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1467 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = g_strdup ("Robert Ancell <robert.ancell@canonical.com>");
#line 1467 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = g_new0 (gchar*, 1 + 1);
#line 1467 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_[0] = _tmp0_;
#line 1467 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	authors = _tmp1_;
#line 1467 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	authors_length1 = 1;
#line 1467 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_authors_size_ = authors_length1;
#line 1470 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _ ("This program is free software: you can redistribute it and/or modify\n" \
"it under the terms of the GNU General Public License as published by\n" \
"the Free Software Foundation, either version 3 of the License, or\n" \
"(at your option) any later version.\n" \
"\n" \
"This program is distributed in the hope that it will be useful,\n" \
"but WITHOUT ANY WARRANTY; without even the implied warranty of\n" \
"MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n" \
"GNU General Public License for more details.\n" \
"\n" \
"You should have received a copy of the GNU General Public License\n" \
"along with this program.  If not, see <http://www.gnu.org/licenses/>.");
#line 1470 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = g_strdup (_tmp2_);
#line 1470 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	license = _tmp3_;
#line 1473 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = _ ("About Simple Scan");
#line 1473 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = g_strdup (_tmp4_);
#line 1473 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	title = _tmp5_;
#line 1476 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp6_ = _ ("Simple document scanning tool");
#line 1476 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp7_ = g_strdup (_tmp6_);
#line 1476 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	description = _tmp7_;
#line 1478 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp8_ = _ ("translator-credits");
#line 1478 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_show_about_dialog ((GtkWindow*) self, "title", title, "program-name", "Simple Scan", "version", VERSION, "comments", description, "logo-icon-name", "scanner", "authors", authors, "translator-credits", _tmp8_, "website", "https://launchpad.net/simple-scan", "copyright", "Copyright  2009-2011 Canonical Ltd.", "license", license, "wrap-license", TRUE, NULL, NULL);
#line 1465 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (description);
#line 1465 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (title);
#line 1465 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (license);
#line 1465 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	authors = (_vala_array_free (authors, authors_length1, (GDestroyNotify) g_free), NULL);
#line 6927 "ui.c"
}


static void user_interface_about_menuitem_activate_cb (UserInterface* self, GtkWidget* widget) {
#line 1494 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1494 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1496 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_show_about (self);
#line 6938 "ui.c"
}


static void _user_interface_about_menuitem_activate_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_about_menuitem_activate_cb ((UserInterface*) self, _sender);
#line 6945 "ui.c"
}


void user_interface_about_activate_cb (UserInterface* self) {
#line 1499 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1501 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_show_about (self);
#line 6954 "ui.c"
}


static gboolean user_interface_on_quit (UserInterface* self) {
	gboolean result = FALSE;
	const gchar* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	gboolean _tmp2_ = FALSE;
	guint _tmp3_ = 0U;
	AutosaveManager* _tmp4_ = NULL;
#line 1504 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 1506 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = _ ("Save document before quitting?");
#line 1506 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = _ ("Quit without Saving");
#line 1506 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = user_interface_prompt_to_save (self, _tmp0_, _tmp1_);
#line 1506 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (!_tmp2_) {
#line 1510 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		result = FALSE;
#line 1510 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return result;
#line 6979 "ui.c"
	}
#line 1512 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_destroy ((GtkWidget*) self);
#line 1514 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = self->priv->save_state_timeout;
#line 1514 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp3_ != ((guint) 0)) {
#line 1515 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_save_state (self, TRUE);
#line 6989 "ui.c"
	}
#line 1517 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = self->priv->autosave_manager;
#line 1517 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	autosave_manager_cleanup (_tmp4_);
#line 1519 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = TRUE;
#line 1519 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 6999 "ui.c"
}


static void user_interface_quit_menuitem_activate_cb (UserInterface* self, GtkWidget* widget) {
#line 1523 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1523 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1525 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_on_quit (self);
#line 7010 "ui.c"
}


static void _user_interface_quit_menuitem_activate_cb_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_quit_menuitem_activate_cb ((UserInterface*) self, _sender);
#line 7017 "ui.c"
}


void user_interface_quit_activate_cb (UserInterface* self) {
#line 1528 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1530 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_on_quit (self);
#line 7026 "ui.c"
}


static gboolean user_interface_simple_scan_window_configure_event_cb (UserInterface* self, GtkWidget* widget, GdkEventConfigure* event) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
#line 1534 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 1534 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (widget != NULL, FALSE);
#line 1534 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 1536 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->window_is_maximized;
#line 1536 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (!_tmp0_) {
#line 7043 "ui.c"
		GdkEventConfigure* _tmp1_ = NULL;
		gint _tmp2_ = 0;
		GdkEventConfigure* _tmp3_ = NULL;
		gint _tmp4_ = 0;
#line 1538 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp1_ = event;
#line 1538 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp2_ = _tmp1_->width;
#line 1538 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		self->priv->window_width = _tmp2_;
#line 1539 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp3_ = event;
#line 1539 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp4_ = _tmp3_->height;
#line 1539 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		self->priv->window_height = _tmp4_;
#line 1540 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_save_state (self, FALSE);
#line 7062 "ui.c"
	}
#line 1543 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = FALSE;
#line 1543 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 7068 "ui.c"
}


static gboolean _user_interface_simple_scan_window_configure_event_cb_gtk_widget_configure_event (GtkWidget* _sender, GdkEventConfigure* event, gpointer self) {
	gboolean result;
	result = user_interface_simple_scan_window_configure_event_cb ((UserInterface*) self, _sender, event);
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 7077 "ui.c"
}


static void user_interface_info_bar_response_cb (UserInterface* self, GtkInfoBar* widget, gint response_id) {
	gint _tmp0_ = 0;
#line 1546 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1546 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (widget != NULL);
#line 1548 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = response_id;
#line 1548 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp0_ == 1) {
#line 7091 "ui.c"
		GtkComboBox* _tmp1_ = NULL;
		GtkDialog* _tmp2_ = NULL;
#line 1550 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp1_ = self->priv->device_combo;
#line 1550 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_widget_grab_focus ((GtkWidget*) _tmp1_);
#line 1551 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp2_ = self->priv->preferences_dialog;
#line 1551 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_window_present ((GtkWindow*) _tmp2_);
#line 7102 "ui.c"
	} else {
#line 1555 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		self->priv->have_error = FALSE;
#line 1556 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (self->priv->error_title);
#line 1556 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		self->priv->error_title = NULL;
#line 1557 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (self->priv->error_text);
#line 1557 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		self->priv->error_text = NULL;
#line 1558 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_update_info_bar (self);
#line 7116 "ui.c"
	}
}


static gboolean user_interface_simple_scan_window_window_state_event_cb (UserInterface* self, GtkWidget* widget, GdkEventWindowState* event) {
	gboolean result = FALSE;
	GdkEventWindowState* _tmp0_ = NULL;
	GdkWindowState _tmp1_ = 0;
#line 1563 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 1563 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (widget != NULL, FALSE);
#line 1563 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 1565 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = event;
#line 1565 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = _tmp0_->changed_mask;
#line 1565 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if ((_tmp1_ & GDK_WINDOW_STATE_MAXIMIZED) != 0) {
#line 7137 "ui.c"
		GdkEventWindowState* _tmp2_ = NULL;
		GdkWindowState _tmp3_ = 0;
#line 1567 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp2_ = event;
#line 1567 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp3_ = _tmp2_->new_window_state;
#line 1567 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		self->priv->window_is_maximized = (_tmp3_ & GDK_WINDOW_STATE_MAXIMIZED) != 0;
#line 1568 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_save_state (self, FALSE);
#line 7148 "ui.c"
	}
#line 1570 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = FALSE;
#line 1570 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 7154 "ui.c"
}


static gboolean _user_interface_simple_scan_window_window_state_event_cb_gtk_widget_window_state_event (GtkWidget* _sender, GdkEventWindowState* event, gpointer self) {
	gboolean result;
	result = user_interface_simple_scan_window_window_state_event_cb ((UserInterface*) self, _sender, event);
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 7163 "ui.c"
}


static gboolean user_interface_window_delete_event_cb (UserInterface* self, GtkWidget* widget, GdkEventAny* event) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
#line 1574 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 1574 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (widget != NULL, FALSE);
#line 1574 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 1576 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = user_interface_on_quit (self);
#line 1576 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = !_tmp0_;
#line 1576 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 7182 "ui.c"
}


static gboolean _user_interface_window_delete_event_cb_gtk_widget_delete_event (GtkWidget* _sender, GdkEventAny* event, gpointer self) {
	gboolean result;
	result = user_interface_window_delete_event_cb ((UserInterface*) self, _sender, event);
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 7191 "ui.c"
}


static void user_interface_page_size_changed_cb (UserInterface* self, Page* page) {
	Page* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	gint _tmp2_ = 0;
	Page* _tmp3_ = NULL;
	gint _tmp4_ = 0;
	gint _tmp5_ = 0;
	Page* _tmp6_ = NULL;
	gint _tmp7_ = 0;
	gint _tmp8_ = 0;
#line 1579 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1579 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (page != NULL);
#line 1581 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = page;
#line 1581 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = page_get_width (_tmp0_);
#line 1581 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 1581 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->default_page_width = _tmp2_;
#line 1582 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = page;
#line 1582 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = page_get_height (_tmp3_);
#line 1582 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = _tmp4_;
#line 1582 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->default_page_height = _tmp5_;
#line 1583 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp6_ = page;
#line 1583 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp7_ = page_get_dpi (_tmp6_);
#line 1583 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp8_ = _tmp7_;
#line 1583 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->default_page_dpi = _tmp8_;
#line 1584 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_save_state (self, FALSE);
#line 7235 "ui.c"
}


static void user_interface_page_scan_direction_changed_cb (UserInterface* self, Page* page) {
	Page* _tmp0_ = NULL;
	ScanDirection _tmp1_ = 0;
	ScanDirection _tmp2_ = 0;
#line 1587 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1587 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (page != NULL);
#line 1589 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = page;
#line 1589 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = page_get_scan_direction (_tmp0_);
#line 1589 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 1589 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->default_page_scan_direction = _tmp2_;
#line 1590 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_save_state (self, FALSE);
#line 7257 "ui.c"
}


static void _user_interface_page_size_changed_cb_page_size_changed (Page* _sender, gpointer self) {
#line 1597 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_page_size_changed_cb ((UserInterface*) self, _sender);
#line 7264 "ui.c"
}


static void _user_interface_page_scan_direction_changed_cb_page_scan_direction_changed (Page* _sender, gpointer self) {
#line 1598 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_page_scan_direction_changed_cb ((UserInterface*) self, _sender);
#line 7271 "ui.c"
}


static void user_interface_page_added_cb (UserInterface* self, Book* book, Page* page) {
	Page* _tmp0_ = NULL;
	Page* _tmp1_ = NULL;
	ScanDirection _tmp2_ = 0;
	ScanDirection _tmp3_ = 0;
	Page* _tmp4_ = NULL;
	Page* _tmp5_ = NULL;
#line 1593 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1593 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (book != NULL);
#line 1593 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (page != NULL);
#line 1595 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = page;
#line 1595 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_page_size_changed_cb (self, _tmp0_);
#line 1596 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = page;
#line 1596 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = page_get_scan_direction (_tmp1_);
#line 1596 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = _tmp2_;
#line 1596 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->default_page_scan_direction = _tmp3_;
#line 1597 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = page;
#line 1597 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_object (_tmp4_, "size-changed", (GCallback) _user_interface_page_size_changed_cb_page_size_changed, self, 0);
#line 1598 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = page;
#line 1598 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_object (_tmp5_, "scan-direction-changed", (GCallback) _user_interface_page_scan_direction_changed_cb_page_scan_direction_changed, self, 0);
#line 1600 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_update_page_menu (self);
#line 7310 "ui.c"
}


static void user_interface_reordered_cb (UserInterface* self, Book* book) {
#line 1603 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1603 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (book != NULL);
#line 1605 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_update_page_menu (self);
#line 7321 "ui.c"
}


static void user_interface_page_removed_cb (UserInterface* self, Book* book, Page* page) {
	Page* _tmp0_ = NULL;
	guint _tmp1_ = 0U;
	Page* _tmp2_ = NULL;
	guint _tmp3_ = 0U;
	Book* _tmp4_ = NULL;
	guint _tmp5_ = 0U;
	guint _tmp6_ = 0U;
#line 1608 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1608 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (book != NULL);
#line 1608 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (page != NULL);
#line 1610 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = page;
#line 1610 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_parse_name ("size-changed", TYPE_PAGE, &_tmp1_, NULL, FALSE);
#line 1610 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_handlers_disconnect_matched (_tmp0_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp1_, 0, NULL, (GCallback) _user_interface_page_size_changed_cb_page_size_changed, self);
#line 1611 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = page;
#line 1611 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_parse_name ("scan-direction-changed", TYPE_PAGE, &_tmp3_, NULL, FALSE);
#line 1611 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_handlers_disconnect_matched (_tmp2_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp3_, 0, NULL, (GCallback) _user_interface_page_scan_direction_changed_cb_page_scan_direction_changed, self);
#line 1614 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = book;
#line 1614 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = book_get_n_pages (_tmp4_);
#line 1614 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp6_ = _tmp5_;
#line 1614 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp6_ == ((guint) 1)) {
#line 1615 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_add_default_page (self);
#line 7361 "ui.c"
	}
#line 1617 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_update_page_menu (self);
#line 7365 "ui.c"
}


static void user_interface_set_dpi_combo (UserInterface* self, GtkComboBox* combo, gint default_dpi, gint current_dpi) {
	GtkCellRendererText* renderer = NULL;
	GtkCellRendererText* _tmp0_ = NULL;
	GtkComboBox* _tmp1_ = NULL;
	GtkCellRendererText* _tmp2_ = NULL;
	GtkComboBox* _tmp3_ = NULL;
	GtkCellRendererText* _tmp4_ = NULL;
	GtkListStore* model = NULL;
	GtkComboBox* _tmp5_ = NULL;
	GtkTreeModel* _tmp6_ = NULL;
	GtkTreeModel* _tmp7_ = NULL;
	GtkListStore* _tmp8_ = NULL;
	gint* scan_resolutions = NULL;
	gint* _tmp9_ = NULL;
	gint scan_resolutions_length1 = 0;
	gint _scan_resolutions_size_ = 0;
	gint* _tmp10_ = NULL;
	gint _tmp10__length1 = 0;
#line 1620 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1620 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (combo != NULL);
#line 1622 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = (GtkCellRendererText*) gtk_cell_renderer_text_new ();
#line 1622 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp0_);
#line 1622 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	renderer = _tmp0_;
#line 1623 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = combo;
#line 1623 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = renderer;
#line 1623 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_cell_layout_pack_start ((GtkCellLayout*) _tmp1_, (GtkCellRenderer*) _tmp2_, TRUE);
#line 1624 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = combo;
#line 1624 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = renderer;
#line 1624 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_cell_layout_add_attribute ((GtkCellLayout*) _tmp3_, (GtkCellRenderer*) _tmp4_, "text", 1);
#line 1626 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = combo;
#line 1626 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp6_ = gtk_combo_box_get_model (_tmp5_);
#line 1626 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp7_ = _tmp6_;
#line 1626 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp8_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp7_, GTK_TYPE_LIST_STORE) ? ((GtkListStore*) _tmp7_) : NULL);
#line 1626 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	model = _tmp8_;
#line 1627 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp9_ = g_new0 (gint, 6);
#line 1627 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp9_[0] = 75;
#line 1627 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp9_[1] = 150;
#line 1627 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp9_[2] = 300;
#line 1627 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp9_[3] = 600;
#line 1627 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp9_[4] = 1200;
#line 1627 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp9_[5] = 2400;
#line 1627 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	scan_resolutions = _tmp9_;
#line 1627 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	scan_resolutions_length1 = 6;
#line 1627 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_scan_resolutions_size_ = scan_resolutions_length1;
#line 1628 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp10_ = scan_resolutions;
#line 1628 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp10__length1 = scan_resolutions_length1;
#line 7443 "ui.c"
	{
		gint* dpi_collection = NULL;
		gint dpi_collection_length1 = 0;
		gint _dpi_collection_size_ = 0;
		gint dpi_it = 0;
#line 1628 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		dpi_collection = _tmp10_;
#line 1628 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		dpi_collection_length1 = _tmp10__length1;
#line 1628 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		for (dpi_it = 0; dpi_it < _tmp10__length1; dpi_it = dpi_it + 1) {
#line 7455 "ui.c"
			gint dpi = 0;
#line 1628 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			dpi = dpi_collection[dpi_it];
#line 7459 "ui.c"
			{
				gchar* label = NULL;
				gint _tmp11_ = 0;
				gint _tmp12_ = 0;
				GtkTreeIter iter = {0};
				GtkListStore* _tmp27_ = NULL;
				GtkTreeIter _tmp28_ = {0};
				GtkListStore* _tmp29_ = NULL;
				GtkTreeIter _tmp30_ = {0};
				gint _tmp31_ = 0;
				const gchar* _tmp32_ = NULL;
				gint _tmp33_ = 0;
				gint _tmp34_ = 0;
#line 1631 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp11_ = dpi;
#line 1631 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp12_ = default_dpi;
#line 1631 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				if (_tmp11_ == _tmp12_) {
#line 7479 "ui.c"
					const gchar* _tmp13_ = NULL;
					gint _tmp14_ = 0;
					gchar* _tmp15_ = NULL;
#line 1633 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp13_ = _ ("%d dpi (default)");
#line 1633 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp14_ = dpi;
#line 1633 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp15_ = g_strdup_printf (_tmp13_, _tmp14_);
#line 1633 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_g_free0 (label);
#line 1633 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					label = _tmp15_;
#line 7493 "ui.c"
				} else {
					gint _tmp16_ = 0;
#line 1634 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp16_ = dpi;
#line 1634 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					if (_tmp16_ == 75) {
#line 7500 "ui.c"
						const gchar* _tmp17_ = NULL;
						gint _tmp18_ = 0;
						gchar* _tmp19_ = NULL;
#line 1636 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						_tmp17_ = _ ("%d dpi (draft)");
#line 1636 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						_tmp18_ = dpi;
#line 1636 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						_tmp19_ = g_strdup_printf (_tmp17_, _tmp18_);
#line 1636 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						_g_free0 (label);
#line 1636 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						label = _tmp19_;
#line 7514 "ui.c"
					} else {
						gint _tmp20_ = 0;
#line 1637 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						_tmp20_ = dpi;
#line 1637 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
						if (_tmp20_ == 1200) {
#line 7521 "ui.c"
							const gchar* _tmp21_ = NULL;
							gint _tmp22_ = 0;
							gchar* _tmp23_ = NULL;
#line 1639 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp21_ = _ ("%d dpi (high resolution)");
#line 1639 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp22_ = dpi;
#line 1639 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp23_ = g_strdup_printf (_tmp21_, _tmp22_);
#line 1639 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_g_free0 (label);
#line 1639 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							label = _tmp23_;
#line 7535 "ui.c"
						} else {
							const gchar* _tmp24_ = NULL;
							gint _tmp25_ = 0;
							gchar* _tmp26_ = NULL;
#line 1642 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp24_ = _ ("%d dpi");
#line 1642 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp25_ = dpi;
#line 1642 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_tmp26_ = g_strdup_printf (_tmp24_, _tmp25_);
#line 1642 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							_g_free0 (label);
#line 1642 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
							label = _tmp26_;
#line 7550 "ui.c"
						}
					}
				}
#line 1645 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp27_ = model;
#line 1645 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				gtk_list_store_append (_tmp27_, &_tmp28_);
#line 1645 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				iter = _tmp28_;
#line 1646 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp29_ = model;
#line 1646 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp30_ = iter;
#line 1646 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp31_ = dpi;
#line 1646 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp32_ = label;
#line 1646 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				gtk_list_store_set (_tmp29_, &_tmp30_, 0, _tmp31_, 1, _tmp32_, -1, -1);
#line 1648 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp33_ = dpi;
#line 1648 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_tmp34_ = current_dpi;
#line 1648 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				if (_tmp33_ == _tmp34_) {
#line 7576 "ui.c"
					GtkComboBox* _tmp35_ = NULL;
					GtkTreeIter _tmp36_ = {0};
#line 1649 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp35_ = combo;
#line 1649 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					_tmp36_ = iter;
#line 1649 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
					gtk_combo_box_set_active_iter (_tmp35_, &_tmp36_);
#line 7585 "ui.c"
				}
#line 1628 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				_g_free0 (label);
#line 7589 "ui.c"
			}
		}
	}
#line 1620 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	scan_resolutions = (g_free (scan_resolutions), NULL);
#line 1620 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (model);
#line 1620 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (renderer);
#line 7599 "ui.c"
}


static void user_interface_needs_saving_cb (UserInterface* self, Book* book) {
	GtkMenuItem* _tmp0_ = NULL;
	Book* _tmp1_ = NULL;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	GtkButton* _tmp4_ = NULL;
	Book* _tmp5_ = NULL;
	gboolean _tmp6_ = FALSE;
	gboolean _tmp7_ = FALSE;
	GtkToolButton* _tmp8_ = NULL;
	Book* _tmp9_ = NULL;
	gboolean _tmp10_ = FALSE;
	gboolean _tmp11_ = FALSE;
	Book* _tmp12_ = NULL;
	gboolean _tmp13_ = FALSE;
	gboolean _tmp14_ = FALSE;
	GtkMenuItem* _tmp16_ = NULL;
#line 1653 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1653 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (book != NULL);
#line 1655 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->save_menuitem;
#line 1655 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = book;
#line 1655 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = book_get_needs_saving (_tmp1_);
#line 1655 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = _tmp2_;
#line 1655 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_sensitive ((GtkWidget*) _tmp0_, _tmp3_);
#line 1656 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = self->priv->save_button;
#line 1656 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = book;
#line 1656 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp6_ = book_get_needs_saving (_tmp5_);
#line 1656 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp7_ = _tmp6_;
#line 1656 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_sensitive ((GtkWidget*) _tmp4_, _tmp7_);
#line 1657 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp8_ = self->priv->save_toolbutton;
#line 1657 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp9_ = book;
#line 1657 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp10_ = book_get_needs_saving (_tmp9_);
#line 1657 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp11_ = _tmp10_;
#line 1657 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_sensitive ((GtkWidget*) _tmp8_, _tmp11_);
#line 1658 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp12_ = book;
#line 1658 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp13_ = book_get_needs_saving (_tmp12_);
#line 1658 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp14_ = _tmp13_;
#line 1658 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp14_) {
#line 7662 "ui.c"
		GtkMenuItem* _tmp15_ = NULL;
#line 1659 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp15_ = self->priv->save_as_menuitem;
#line 1659 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_widget_set_sensitive ((GtkWidget*) _tmp15_, TRUE);
#line 7668 "ui.c"
	}
#line 1660 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp16_ = self->priv->copy_to_clipboard_menuitem;
#line 1660 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_sensitive ((GtkWidget*) _tmp16_, TRUE);
#line 7674 "ui.c"
}


static void _user_interface_info_bar_response_cb_gtk_info_bar_response (GtkInfoBar* _sender, gint response_id, gpointer self) {
#line 1730 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_info_bar_response_cb ((UserInterface*) self, _sender, response_id);
#line 7681 "ui.c"
}


static void __lambda10_ (UserInterface* self) {
	GSettings* _tmp0_ = NULL;
	gint _tmp1_ = 0;
#line 1772 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->settings;
#line 1772 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = user_interface_get_text_dpi (self);
#line 1772 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_settings_set_int (_tmp0_, "text-dpi", _tmp1_);
#line 7694 "ui.c"
}


static void ___lambda10__gtk_combo_box_changed (GtkComboBox* _sender, gpointer self) {
#line 1772 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	__lambda10_ ((UserInterface*) self);
#line 7701 "ui.c"
}


static void __lambda11_ (UserInterface* self) {
	GSettings* _tmp0_ = NULL;
	gint _tmp1_ = 0;
#line 1777 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->settings;
#line 1777 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = user_interface_get_photo_dpi (self);
#line 1777 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_settings_set_int (_tmp0_, "photo-dpi", _tmp1_);
#line 7714 "ui.c"
}


static void ___lambda11__gtk_combo_box_changed (GtkComboBox* _sender, gpointer self) {
#line 1777 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	__lambda11_ ((UserInterface*) self);
#line 7721 "ui.c"
}


static void __lambda12_ (UserInterface* self) {
	GSettings* _tmp0_ = NULL;
	ScanType _tmp1_ = 0;
#line 1787 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->settings;
#line 1787 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = user_interface_get_page_side (self);
#line 1787 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_settings_set_enum (_tmp0_, "page-side", (gint) _tmp1_);
#line 7734 "ui.c"
}


static void ___lambda12__gtk_combo_box_changed (GtkComboBox* _sender, gpointer self) {
#line 1787 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	__lambda12_ ((UserInterface*) self);
#line 7741 "ui.c"
}


static void __lambda13_ (UserInterface* self) {
	gint w = 0;
	gint h = 0;
	gint _tmp0_ = 0;
	gint _tmp1_ = 0;
	GSettings* _tmp2_ = NULL;
	GSettings* _tmp3_ = NULL;
#line 1798 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_get_paper_size (self, &_tmp0_, &_tmp1_);
#line 1798 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	w = _tmp0_;
#line 1798 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	h = _tmp1_;
#line 1799 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = self->priv->settings;
#line 1799 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_settings_set_int (_tmp2_, "paper-width", w);
#line 1800 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = self->priv->settings;
#line 1800 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_settings_set_int (_tmp3_, "paper-height", h);
#line 7766 "ui.c"
}


static void ___lambda13__gtk_combo_box_changed (GtkComboBox* _sender, gpointer self) {
#line 1795 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	__lambda13_ ((UserInterface*) self);
#line 7773 "ui.c"
}


static void __lambda14_ (UserInterface* self) {
	GSettings* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	gint _tmp2_ = 0;
#line 1811 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->settings;
#line 1811 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = user_interface_get_brightness (self);
#line 1811 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 1811 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_settings_set_int (_tmp0_, "brightness", _tmp2_);
#line 7789 "ui.c"
}


static void ___lambda14__gtk_adjustment_value_changed (GtkAdjustment* _sender, gpointer self) {
#line 1811 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	__lambda14_ ((UserInterface*) self);
#line 7796 "ui.c"
}


static void __lambda15_ (UserInterface* self) {
	GSettings* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	gint _tmp2_ = 0;
#line 1821 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->settings;
#line 1821 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = user_interface_get_contrast (self);
#line 1821 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 1821 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_settings_set_int (_tmp0_, "contrast", _tmp2_);
#line 7812 "ui.c"
}


static void ___lambda15__gtk_adjustment_value_changed (GtkAdjustment* _sender, gpointer self) {
#line 1821 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	__lambda15_ ((UserInterface*) self);
#line 7819 "ui.c"
}


static void __lambda16_ (UserInterface* self) {
	GSettings* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	gint _tmp2_ = 0;
#line 1831 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->settings;
#line 1831 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = user_interface_get_quality (self);
#line 1831 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 1831 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_settings_set_int (_tmp0_, "jpeg-quality", _tmp2_);
#line 7835 "ui.c"
}


static void ___lambda16__gtk_adjustment_value_changed (GtkAdjustment* _sender, gpointer self) {
#line 1831 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	__lambda16_ ((UserInterface*) self);
#line 7842 "ui.c"
}


static void _user_interface_page_selected_cb_book_view_page_selected (BookView* _sender, Page* page, gpointer self) {
#line 1847 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_page_selected_cb ((UserInterface*) self, _sender, page);
#line 7849 "ui.c"
}


static void _user_interface_show_page_cb_book_view_show_page (BookView* _sender, Page* page, gpointer self) {
#line 1848 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_show_page_cb ((UserInterface*) self, _sender, page);
#line 7856 "ui.c"
}


static void _user_interface_show_page_menu_cb_book_view_show_menu (BookView* _sender, gpointer self) {
#line 1849 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_show_page_menu_cb ((UserInterface*) self, _sender);
#line 7863 "ui.c"
}


static void _user_interface_book_saving_cb_book_saving (Book* _sender, gint i, gpointer self) {
#line 1868 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_book_saving_cb ((UserInterface*) self, i);
#line 7870 "ui.c"
}


static void user_interface_load (UserInterface* self) {
	GtkIconTheme* _tmp0_ = NULL;
	GtkApplication* app = NULL;
	GApplication* _tmp1_ = NULL;
	GtkApplication* _tmp2_ = NULL;
	gboolean _tmp3_ = FALSE;
	gboolean _tmp4_ = FALSE;
	GtkApplication* _tmp54_ = NULL;
	GtkInfoBar* _tmp55_ = NULL;
	GtkInfoBar* _tmp56_ = NULL;
	GtkBox* _tmp57_ = NULL;
	GtkInfoBar* _tmp58_ = NULL;
	GtkBox* hbox = NULL;
	GtkBox* _tmp59_ = NULL;
	GtkContainer* content_area = NULL;
	GtkInfoBar* _tmp60_ = NULL;
	GtkContainer* _tmp61_ = NULL;
	GtkContainer* _tmp62_ = NULL;
	GtkContainer* _tmp63_ = NULL;
	GtkBox* _tmp64_ = NULL;
	GtkBox* _tmp65_ = NULL;
	GtkImage* _tmp66_ = NULL;
	GtkBox* _tmp67_ = NULL;
	GtkImage* _tmp68_ = NULL;
	GtkImage* _tmp69_ = NULL;
	GtkLabel* _tmp70_ = NULL;
	GtkLabel* _tmp71_ = NULL;
	GtkBox* _tmp72_ = NULL;
	GtkLabel* _tmp73_ = NULL;
	GtkLabel* _tmp74_ = NULL;
	GtkInfoBar* _tmp75_ = NULL;
	const gchar* _tmp76_ = NULL;
	GtkButton* _tmp77_ = NULL;
	GtkButton* _tmp78_ = NULL;
	GtkInfoBar* _tmp79_ = NULL;
	const gchar* _tmp80_ = NULL;
	GtkButton* _tmp81_ = NULL;
	GtkButton* _tmp82_ = NULL;
	GtkTreeIter iter = {0};
	GtkListStore* _tmp83_ = NULL;
	GtkTreeIter _tmp84_ = {0};
	GtkListStore* _tmp85_ = NULL;
	GtkTreeIter _tmp86_ = {0};
	const gchar* _tmp87_ = NULL;
	GtkListStore* _tmp88_ = NULL;
	GtkTreeIter _tmp89_ = {0};
	GtkListStore* _tmp90_ = NULL;
	GtkTreeIter _tmp91_ = {0};
	GtkListStore* _tmp92_ = NULL;
	GtkTreeIter _tmp93_ = {0};
	GtkListStore* _tmp94_ = NULL;
	GtkTreeIter _tmp95_ = {0};
	GtkListStore* _tmp96_ = NULL;
	GtkTreeIter _tmp97_ = {0};
	GtkListStore* _tmp98_ = NULL;
	GtkTreeIter _tmp99_ = {0};
	GtkListStore* _tmp100_ = NULL;
	GtkTreeIter _tmp101_ = {0};
	GtkListStore* _tmp102_ = NULL;
	GtkTreeIter _tmp103_ = {0};
	GtkListStore* _tmp104_ = NULL;
	GtkTreeIter _tmp105_ = {0};
	GtkListStore* _tmp106_ = NULL;
	GtkTreeIter _tmp107_ = {0};
	GtkListStore* _tmp108_ = NULL;
	GtkTreeIter _tmp109_ = {0};
	GtkListStore* _tmp110_ = NULL;
	GtkTreeIter _tmp111_ = {0};
	gint dpi = 0;
	GSettings* _tmp112_ = NULL;
	gint _tmp113_ = 0;
	gint _tmp114_ = 0;
	GtkComboBox* _tmp115_ = NULL;
	gint _tmp116_ = 0;
	GtkComboBox* _tmp117_ = NULL;
	GSettings* _tmp118_ = NULL;
	gint _tmp119_ = 0;
	gint _tmp120_ = 0;
	GtkComboBox* _tmp121_ = NULL;
	gint _tmp122_ = 0;
	GtkComboBox* _tmp123_ = NULL;
	GtkCellRendererText* renderer = NULL;
	GtkCellRendererText* _tmp124_ = NULL;
	GtkComboBox* _tmp125_ = NULL;
	GtkCellRendererText* _tmp126_ = NULL;
	GtkComboBox* _tmp127_ = NULL;
	GtkCellRendererText* _tmp128_ = NULL;
	GtkCellRendererText* _tmp129_ = NULL;
	GtkComboBox* _tmp130_ = NULL;
	GtkCellRendererText* _tmp131_ = NULL;
	GtkComboBox* _tmp132_ = NULL;
	GtkCellRendererText* _tmp133_ = NULL;
	GSettings* _tmp134_ = NULL;
	gint _tmp135_ = 0;
	GtkComboBox* _tmp136_ = NULL;
	GtkCellRendererText* _tmp137_ = NULL;
	GtkComboBox* _tmp138_ = NULL;
	GtkCellRendererText* _tmp139_ = NULL;
	GtkComboBox* _tmp140_ = NULL;
	GtkCellRendererText* _tmp141_ = NULL;
	gint paper_width = 0;
	GSettings* _tmp142_ = NULL;
	gint _tmp143_ = 0;
	gint paper_height = 0;
	GSettings* _tmp144_ = NULL;
	gint _tmp145_ = 0;
	gint _tmp146_ = 0;
	gint _tmp147_ = 0;
	GtkComboBox* _tmp148_ = NULL;
	gdouble lower = 0.0;
	GtkAdjustment* _tmp149_ = NULL;
	gdouble _tmp150_ = 0.0;
	gdouble _tmp151_ = 0.0;
	gchar* darker_label = NULL;
	const gchar* _tmp152_ = NULL;
	gchar* _tmp153_ = NULL;
	gdouble upper = 0.0;
	GtkAdjustment* _tmp154_ = NULL;
	gdouble _tmp155_ = 0.0;
	gdouble _tmp156_ = 0.0;
	gchar* lighter_label = NULL;
	const gchar* _tmp157_ = NULL;
	gchar* _tmp158_ = NULL;
	GtkScale* _tmp159_ = NULL;
	gdouble _tmp160_ = 0.0;
	const gchar* _tmp161_ = NULL;
	GtkScale* _tmp162_ = NULL;
	GtkScale* _tmp163_ = NULL;
	gdouble _tmp164_ = 0.0;
	const gchar* _tmp165_ = NULL;
	GSettings* _tmp166_ = NULL;
	gint _tmp167_ = 0;
	GtkAdjustment* _tmp168_ = NULL;
	GtkAdjustment* _tmp169_ = NULL;
	gdouble _tmp170_ = 0.0;
	gdouble _tmp171_ = 0.0;
	gchar* less_label = NULL;
	const gchar* _tmp172_ = NULL;
	gchar* _tmp173_ = NULL;
	GtkAdjustment* _tmp174_ = NULL;
	gdouble _tmp175_ = 0.0;
	gdouble _tmp176_ = 0.0;
	gchar* more_label = NULL;
	const gchar* _tmp177_ = NULL;
	gchar* _tmp178_ = NULL;
	GtkScale* _tmp179_ = NULL;
	gdouble _tmp180_ = 0.0;
	const gchar* _tmp181_ = NULL;
	GtkScale* _tmp182_ = NULL;
	GtkScale* _tmp183_ = NULL;
	gdouble _tmp184_ = 0.0;
	const gchar* _tmp185_ = NULL;
	GSettings* _tmp186_ = NULL;
	gint _tmp187_ = 0;
	GtkAdjustment* _tmp188_ = NULL;
	GtkAdjustment* _tmp189_ = NULL;
	gdouble _tmp190_ = 0.0;
	gdouble _tmp191_ = 0.0;
	gchar* minimum_label = NULL;
	const gchar* _tmp192_ = NULL;
	gchar* _tmp193_ = NULL;
	GtkAdjustment* _tmp194_ = NULL;
	gdouble _tmp195_ = 0.0;
	gdouble _tmp196_ = 0.0;
	gchar* maximum_label = NULL;
	const gchar* _tmp197_ = NULL;
	gchar* _tmp198_ = NULL;
	GtkScale* _tmp199_ = NULL;
	gdouble _tmp200_ = 0.0;
	const gchar* _tmp201_ = NULL;
	GtkScale* _tmp202_ = NULL;
	GtkScale* _tmp203_ = NULL;
	gdouble _tmp204_ = 0.0;
	const gchar* _tmp205_ = NULL;
	GSettings* _tmp206_ = NULL;
	gint _tmp207_ = 0;
	GtkAdjustment* _tmp208_ = NULL;
	gchar* device = NULL;
	GSettings* _tmp209_ = NULL;
	gchar* _tmp210_ = NULL;
	const gchar* _tmp211_ = NULL;
	gchar* document_type = NULL;
	GSettings* _tmp217_ = NULL;
	gchar* _tmp218_ = NULL;
	const gchar* _tmp219_ = NULL;
	Book* _tmp221_ = NULL;
	BookView* _tmp222_ = NULL;
	BookView* _tmp223_ = NULL;
	GtkBox* _tmp224_ = NULL;
	BookView* _tmp225_ = NULL;
	BookView* _tmp226_ = NULL;
	BookView* _tmp227_ = NULL;
	BookView* _tmp228_ = NULL;
	BookView* _tmp229_ = NULL;
	GtkDialog* _tmp230_ = NULL;
	GtkDialog* _tmp231_ = NULL;
	gint _tmp232_ = 0;
	gint _tmp233_ = 0;
	gint _tmp234_ = 0;
	gint _tmp235_ = 0;
	gboolean _tmp236_ = FALSE;
	const gchar* _tmp237_ = NULL;
	ProgressBarDialog* _tmp238_ = NULL;
	Book* _tmp239_ = NULL;
#line 1673 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1675 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = gtk_icon_theme_get_default ();
#line 1675 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_icon_theme_append_search_path (_tmp0_, ICON_DIR);
#line 1677 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_window_set_default_icon_name ("scanner");
#line 1679 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = g_application_get_default ();
#line 1679 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp1_, GTK_TYPE_APPLICATION) ? ((GtkApplication*) _tmp1_) : NULL);
#line 1679 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	app = _tmp2_;
#line 1681 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = user_interface_get_shell_shows_menubar (self);
#line 1681 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = _tmp3_;
#line 1681 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (!_tmp4_) {
#line 8098 "ui.c"
		GtkApplication* _tmp5_ = NULL;
		GMenu* appmenu = NULL;
		GMenu* _tmp6_ = NULL;
		GMenu* section = NULL;
		GMenu* _tmp7_ = NULL;
		GMenu* _tmp8_ = NULL;
		GMenu* _tmp9_ = NULL;
		GMenu* _tmp10_ = NULL;
		const gchar* _tmp11_ = NULL;
		GMenu* _tmp12_ = NULL;
		GMenu* _tmp13_ = NULL;
		GMenu* _tmp14_ = NULL;
		GMenu* menu = NULL;
		GMenu* _tmp15_ = NULL;
		GMenu* _tmp16_ = NULL;
		const gchar* _tmp17_ = NULL;
		GMenu* _tmp18_ = NULL;
		GMenu* _tmp19_ = NULL;
		const gchar* _tmp20_ = NULL;
		GMenu* _tmp21_ = NULL;
		const gchar* _tmp22_ = NULL;
		GMenu* _tmp23_ = NULL;
		const gchar* _tmp24_ = NULL;
		GMenu* _tmp25_ = NULL;
		const gchar* _tmp26_ = NULL;
		GMenu* _tmp27_ = NULL;
		const gchar* _tmp28_ = NULL;
		GMenu* _tmp29_ = NULL;
		GMenu* _tmp30_ = NULL;
		GMenu* _tmp31_ = NULL;
		GMenu* _tmp32_ = NULL;
		const gchar* _tmp33_ = NULL;
		GMenu* _tmp34_ = NULL;
		GMenu* _tmp35_ = NULL;
		GMenu* _tmp36_ = NULL;
		GMenu* _tmp37_ = NULL;
		const gchar* _tmp38_ = NULL;
		GMenu* _tmp39_ = NULL;
		const gchar* _tmp40_ = NULL;
		GMenu* _tmp41_ = NULL;
		const gchar* _tmp42_ = NULL;
		GtkApplication* _tmp43_ = NULL;
		GMenu* _tmp44_ = NULL;
		GtkApplication* _tmp45_ = NULL;
		GtkApplication* _tmp46_ = NULL;
		GtkApplication* _tmp47_ = NULL;
		GtkApplication* _tmp48_ = NULL;
		GtkApplication* _tmp49_ = NULL;
		GtkApplication* _tmp50_ = NULL;
		GtkApplication* _tmp51_ = NULL;
#line 1683 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp5_ = app;
#line 1683 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_action_map_add_action_entries ((GActionMap*) _tmp5_, USER_INTERFACE_action_entries, G_N_ELEMENTS (USER_INTERFACE_action_entries), self);
#line 1685 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp6_ = g_menu_new ();
#line 1685 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		appmenu = _tmp6_;
#line 1686 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp7_ = g_menu_new ();
#line 1686 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		section = _tmp7_;
#line 1687 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp8_ = appmenu;
#line 1687 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp9_ = section;
#line 1687 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_menu_append_section (_tmp8_, NULL, (GMenuModel*) _tmp9_);
#line 1688 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp10_ = section;
#line 1688 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp11_ = _ ("New Document");
#line 1688 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_menu_append (_tmp10_, _tmp11_, "app.new_document");
#line 1690 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp12_ = g_menu_new ();
#line 1690 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_object_unref0 (section);
#line 1690 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		section = _tmp12_;
#line 1691 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp13_ = appmenu;
#line 1691 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp14_ = section;
#line 1691 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_menu_append_section (_tmp13_, NULL, (GMenuModel*) _tmp14_);
#line 1692 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp15_ = g_menu_new ();
#line 1692 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		menu = _tmp15_;
#line 1693 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp16_ = section;
#line 1693 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp17_ = _ ("Document");
#line 1693 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp18_ = menu;
#line 1693 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_menu_append_submenu (_tmp16_, _tmp17_, (GMenuModel*) _tmp18_);
#line 1694 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp19_ = menu;
#line 1694 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp20_ = _ ("Reorder Pages");
#line 1694 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_menu_append (_tmp19_, _tmp20_, "app.reorder");
#line 1695 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp21_ = menu;
#line 1695 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp22_ = _ ("Save");
#line 1695 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_menu_append (_tmp21_, _tmp22_, "app.save");
#line 1696 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp23_ = menu;
#line 1696 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp24_ = _ ("Save As...");
#line 1696 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_menu_append (_tmp23_, _tmp24_, "app.save_as");
#line 1697 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp25_ = menu;
#line 1697 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp26_ = _ ("Email...");
#line 1697 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_menu_append (_tmp25_, _tmp26_, "app.email");
#line 1698 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp27_ = menu;
#line 1698 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp28_ = _ ("Print...");
#line 1698 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_menu_append (_tmp27_, _tmp28_, "app.print");
#line 1700 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp29_ = g_menu_new ();
#line 1700 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_object_unref0 (section);
#line 1700 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		section = _tmp29_;
#line 1701 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp30_ = appmenu;
#line 1701 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp31_ = section;
#line 1701 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_menu_append_section (_tmp30_, NULL, (GMenuModel*) _tmp31_);
#line 1702 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp32_ = section;
#line 1702 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp33_ = _ ("Preferences");
#line 1702 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_menu_append (_tmp32_, _tmp33_, "app.preferences");
#line 1704 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp34_ = g_menu_new ();
#line 1704 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_object_unref0 (section);
#line 1704 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		section = _tmp34_;
#line 1705 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp35_ = appmenu;
#line 1705 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp36_ = section;
#line 1705 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_menu_append_section (_tmp35_, NULL, (GMenuModel*) _tmp36_);
#line 1706 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp37_ = section;
#line 1706 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp38_ = _ ("Help");
#line 1706 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_menu_append (_tmp37_, _tmp38_, "app.help");
#line 1707 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp39_ = section;
#line 1707 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp40_ = _ ("About");
#line 1707 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_menu_append (_tmp39_, _tmp40_, "app.about");
#line 1708 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp41_ = section;
#line 1708 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp42_ = _ ("Quit");
#line 1708 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_menu_append (_tmp41_, _tmp42_, "app.quit");
#line 1710 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp43_ = app;
#line 1710 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp44_ = appmenu;
#line 1710 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_application_set_app_menu (_tmp43_, (GMenuModel*) _tmp44_);
#line 1712 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp45_ = app;
#line 1712 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_application_add_accelerator (_tmp45_, "<Ctrl>N", "app.new_document", NULL);
#line 1713 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp46_ = app;
#line 1713 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_application_add_accelerator (_tmp46_, "<Ctrl>S", "app.save", NULL);
#line 1714 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp47_ = app;
#line 1714 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_application_add_accelerator (_tmp47_, "<Shift><Ctrl>S", "app.save_as", NULL);
#line 1715 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp48_ = app;
#line 1715 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_application_add_accelerator (_tmp48_, "<Ctrl>E", "app.email", NULL);
#line 1716 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp49_ = app;
#line 1716 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_application_add_accelerator (_tmp49_, "<Ctrl>P", "app.print", NULL);
#line 1717 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp50_ = app;
#line 1717 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_application_add_accelerator (_tmp50_, "F1", "app.help", NULL);
#line 1718 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp51_ = app;
#line 1718 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_application_add_accelerator (_tmp51_, "<Ctrl>Q", "app.quit", NULL);
#line 1681 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_object_unref0 (menu);
#line 1681 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_object_unref0 (section);
#line 1681 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_object_unref0 (appmenu);
#line 8315 "ui.c"
	} else {
		GtkMenuBar* _tmp52_ = NULL;
		GtkToolbar* _tmp53_ = NULL;
#line 1722 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_window_set_titlebar ((GtkWindow*) self, NULL);
#line 1723 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp52_ = self->priv->menubar;
#line 1723 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_widget_set_visible ((GtkWidget*) _tmp52_, TRUE);
#line 1724 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp53_ = self->priv->toolbar;
#line 1724 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_widget_set_visible ((GtkWidget*) _tmp53_, TRUE);
#line 8329 "ui.c"
	}
#line 1726 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp54_ = app;
#line 1726 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_application_add_window (_tmp54_, (GtkWindow*) self);
#line 1729 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp55_ = (GtkInfoBar*) gtk_info_bar_new ();
#line 1729 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp55_);
#line 1729 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->info_bar);
#line 1729 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->info_bar = _tmp55_;
#line 1730 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp56_ = self->priv->info_bar;
#line 1730 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_object (_tmp56_, "response", (GCallback) _user_interface_info_bar_response_cb_gtk_info_bar_response, self, 0);
#line 1731 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp57_ = self->priv->main_vbox;
#line 1731 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp58_ = self->priv->info_bar;
#line 1731 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_box_pack_start (_tmp57_, (GtkWidget*) _tmp58_, FALSE, TRUE, (guint) 0);
#line 1732 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp59_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_HORIZONTAL, 12);
#line 1732 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp59_);
#line 1732 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	hbox = _tmp59_;
#line 1733 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp60_ = self->priv->info_bar;
#line 1733 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp61_ = gtk_info_bar_get_content_area (_tmp60_);
#line 1733 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp62_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp61_, GTK_TYPE_CONTAINER) ? ((GtkContainer*) _tmp61_) : NULL);
#line 1733 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	content_area = _tmp62_;
#line 1734 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp63_ = content_area;
#line 1734 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp64_ = hbox;
#line 1734 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_container_add (_tmp63_, (GtkWidget*) _tmp64_);
#line 1735 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp65_ = hbox;
#line 1735 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp65_, TRUE);
#line 1737 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp66_ = (GtkImage*) gtk_image_new_from_icon_name ("dialog-warning", GTK_ICON_SIZE_DIALOG);
#line 1737 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp66_);
#line 1737 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->info_bar_image);
#line 1737 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->info_bar_image = _tmp66_;
#line 1738 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp67_ = hbox;
#line 1738 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp68_ = self->priv->info_bar_image;
#line 1738 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_box_pack_start (_tmp67_, (GtkWidget*) _tmp68_, FALSE, TRUE, (guint) 0);
#line 1739 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp69_ = self->priv->info_bar_image;
#line 1739 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp69_, TRUE);
#line 1741 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp70_ = (GtkLabel*) gtk_label_new (NULL);
#line 1741 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp70_);
#line 1741 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->info_bar_label);
#line 1741 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->info_bar_label = _tmp70_;
#line 1742 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp71_ = self->priv->info_bar_label;
#line 1742 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_misc_set_alignment ((GtkMisc*) _tmp71_, 0.0f, 0.5f);
#line 1743 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp72_ = hbox;
#line 1743 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp73_ = self->priv->info_bar_label;
#line 1743 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_box_pack_start (_tmp72_, (GtkWidget*) _tmp73_, TRUE, TRUE, (guint) 0);
#line 1744 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp74_ = self->priv->info_bar_label;
#line 1744 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp74_, TRUE);
#line 1746 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp75_ = self->priv->info_bar;
#line 1746 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp76_ = _ ("_Close");
#line 1746 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp77_ = gtk_info_bar_add_button (_tmp75_, _tmp76_, (gint) GTK_RESPONSE_CLOSE);
#line 1746 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp78_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp77_, GTK_TYPE_BUTTON) ? ((GtkButton*) _tmp77_) : NULL);
#line 1746 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->info_bar_close_button);
#line 1746 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->info_bar_close_button = _tmp78_;
#line 1747 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp79_ = self->priv->info_bar;
#line 1747 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp80_ = _ ("Change _Scanner");
#line 1747 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp81_ = gtk_info_bar_add_button (_tmp79_, _tmp80_, 1);
#line 1747 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp82_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp81_, GTK_TYPE_BUTTON) ? ((GtkButton*) _tmp81_) : NULL);
#line 1747 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->info_bar_change_scanner_button);
#line 1747 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->info_bar_change_scanner_button = _tmp82_;
#line 1751 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp83_ = self->priv->paper_size_model;
#line 1751 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_list_store_append (_tmp83_, &_tmp84_);
#line 1751 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	iter = _tmp84_;
#line 1752 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp85_ = self->priv->paper_size_model;
#line 1752 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp86_ = iter;
#line 1752 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp87_ = _ ("Automatic");
#line 1752 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_list_store_set (_tmp85_, &_tmp86_, 0, 0, 1, 0, 2, _tmp87_, -1, -1);
#line 1755 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp88_ = self->priv->paper_size_model;
#line 1755 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_list_store_append (_tmp88_, &_tmp89_);
#line 1755 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	iter = _tmp89_;
#line 1756 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp90_ = self->priv->paper_size_model;
#line 1756 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp91_ = iter;
#line 1756 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_list_store_set (_tmp90_, &_tmp91_, 0, 1050, 1, 1480, 2, "A6", -1, -1);
#line 1757 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp92_ = self->priv->paper_size_model;
#line 1757 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_list_store_append (_tmp92_, &_tmp93_);
#line 1757 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	iter = _tmp93_;
#line 1758 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp94_ = self->priv->paper_size_model;
#line 1758 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp95_ = iter;
#line 1758 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_list_store_set (_tmp94_, &_tmp95_, 0, 1480, 1, 2100, 2, "A5", -1, -1);
#line 1759 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp96_ = self->priv->paper_size_model;
#line 1759 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_list_store_append (_tmp96_, &_tmp97_);
#line 1759 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	iter = _tmp97_;
#line 1760 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp98_ = self->priv->paper_size_model;
#line 1760 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp99_ = iter;
#line 1760 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_list_store_set (_tmp98_, &_tmp99_, 0, 2100, 1, 2970, 2, "A4", -1, -1);
#line 1761 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp100_ = self->priv->paper_size_model;
#line 1761 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_list_store_append (_tmp100_, &_tmp101_);
#line 1761 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	iter = _tmp101_;
#line 1762 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp102_ = self->priv->paper_size_model;
#line 1762 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp103_ = iter;
#line 1762 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_list_store_set (_tmp102_, &_tmp103_, 0, 2159, 1, 2794, 2, "Letter", -1, -1);
#line 1763 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp104_ = self->priv->paper_size_model;
#line 1763 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_list_store_append (_tmp104_, &_tmp105_);
#line 1763 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	iter = _tmp105_;
#line 1764 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp106_ = self->priv->paper_size_model;
#line 1764 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp107_ = iter;
#line 1764 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_list_store_set (_tmp106_, &_tmp107_, 0, 2159, 1, 3556, 2, "Legal", -1, -1);
#line 1765 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp108_ = self->priv->paper_size_model;
#line 1765 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_list_store_append (_tmp108_, &_tmp109_);
#line 1765 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	iter = _tmp109_;
#line 1766 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp110_ = self->priv->paper_size_model;
#line 1766 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp111_ = iter;
#line 1766 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_list_store_set (_tmp110_, &_tmp111_, 0, 1016, 1, 1524, 2, "46", -1, -1);
#line 1768 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp112_ = self->priv->settings;
#line 1768 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp113_ = g_settings_get_int (_tmp112_, "text-dpi");
#line 1768 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	dpi = _tmp113_;
#line 1769 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp114_ = dpi;
#line 1769 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp114_ <= 0) {
#line 1770 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		dpi = USER_INTERFACE_DEFAULT_TEXT_DPI;
#line 8539 "ui.c"
	}
#line 1771 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp115_ = self->priv->text_dpi_combo;
#line 1771 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp116_ = dpi;
#line 1771 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_set_dpi_combo (self, _tmp115_, USER_INTERFACE_DEFAULT_TEXT_DPI, _tmp116_);
#line 1772 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp117_ = self->priv->text_dpi_combo;
#line 1772 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_object (_tmp117_, "changed", (GCallback) ___lambda10__gtk_combo_box_changed, self, 0);
#line 1773 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp118_ = self->priv->settings;
#line 1773 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp119_ = g_settings_get_int (_tmp118_, "photo-dpi");
#line 1773 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	dpi = _tmp119_;
#line 1774 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp120_ = dpi;
#line 1774 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp120_ <= 0) {
#line 1775 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		dpi = USER_INTERFACE_DEFAULT_PHOTO_DPI;
#line 8563 "ui.c"
	}
#line 1776 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp121_ = self->priv->photo_dpi_combo;
#line 1776 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp122_ = dpi;
#line 1776 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_set_dpi_combo (self, _tmp121_, USER_INTERFACE_DEFAULT_PHOTO_DPI, _tmp122_);
#line 1777 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp123_ = self->priv->photo_dpi_combo;
#line 1777 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_object (_tmp123_, "changed", (GCallback) ___lambda11__gtk_combo_box_changed, self, 0);
#line 1779 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp124_ = (GtkCellRendererText*) gtk_cell_renderer_text_new ();
#line 1779 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp124_);
#line 1779 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	renderer = _tmp124_;
#line 1780 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp125_ = self->priv->device_combo;
#line 1780 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp126_ = renderer;
#line 1780 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_cell_layout_pack_start ((GtkCellLayout*) _tmp125_, (GtkCellRenderer*) _tmp126_, TRUE);
#line 1781 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp127_ = self->priv->device_combo;
#line 1781 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp128_ = renderer;
#line 1781 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_cell_layout_add_attribute ((GtkCellLayout*) _tmp127_, (GtkCellRenderer*) _tmp128_, "text", 1);
#line 1783 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp129_ = (GtkCellRendererText*) gtk_cell_renderer_text_new ();
#line 1783 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp129_);
#line 1783 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (renderer);
#line 1783 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	renderer = _tmp129_;
#line 1784 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp130_ = self->priv->page_side_combo;
#line 1784 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp131_ = renderer;
#line 1784 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_cell_layout_pack_start ((GtkCellLayout*) _tmp130_, (GtkCellRenderer*) _tmp131_, TRUE);
#line 1785 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp132_ = self->priv->page_side_combo;
#line 1785 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp133_ = renderer;
#line 1785 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_cell_layout_add_attribute ((GtkCellLayout*) _tmp132_, (GtkCellRenderer*) _tmp133_, "text", 1);
#line 1786 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp134_ = self->priv->settings;
#line 1786 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp135_ = g_settings_get_enum (_tmp134_, "page-side");
#line 1786 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_set_page_side (self, (ScanType) _tmp135_);
#line 1787 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp136_ = self->priv->page_side_combo;
#line 1787 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_object (_tmp136_, "changed", (GCallback) ___lambda12__gtk_combo_box_changed, self, 0);
#line 1789 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp137_ = (GtkCellRendererText*) gtk_cell_renderer_text_new ();
#line 1789 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp137_);
#line 1789 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (renderer);
#line 1789 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	renderer = _tmp137_;
#line 1790 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp138_ = self->priv->paper_size_combo;
#line 1790 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp139_ = renderer;
#line 1790 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_cell_layout_pack_start ((GtkCellLayout*) _tmp138_, (GtkCellRenderer*) _tmp139_, TRUE);
#line 1791 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp140_ = self->priv->paper_size_combo;
#line 1791 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp141_ = renderer;
#line 1791 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_cell_layout_add_attribute ((GtkCellLayout*) _tmp140_, (GtkCellRenderer*) _tmp141_, "text", 2);
#line 1792 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp142_ = self->priv->settings;
#line 1792 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp143_ = g_settings_get_int (_tmp142_, "paper-width");
#line 1792 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	paper_width = _tmp143_;
#line 1793 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp144_ = self->priv->settings;
#line 1793 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp145_ = g_settings_get_int (_tmp144_, "paper-height");
#line 1793 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	paper_height = _tmp145_;
#line 1794 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp146_ = paper_width;
#line 1794 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp147_ = paper_height;
#line 1794 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_set_paper_size (self, _tmp146_, _tmp147_);
#line 1795 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp148_ = self->priv->paper_size_combo;
#line 1795 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_object (_tmp148_, "changed", (GCallback) ___lambda13__gtk_combo_box_changed, self, 0);
#line 1803 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp149_ = self->priv->brightness_adjustment;
#line 1803 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp150_ = gtk_adjustment_get_lower (_tmp149_);
#line 1803 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp151_ = _tmp150_;
#line 1803 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	lower = _tmp151_;
#line 1804 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp152_ = _ ("Darker");
#line 1804 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp153_ = g_strdup_printf ("<small>%s</small>", _tmp152_);
#line 1804 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	darker_label = _tmp153_;
#line 1805 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp154_ = self->priv->brightness_adjustment;
#line 1805 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp155_ = gtk_adjustment_get_upper (_tmp154_);
#line 1805 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp156_ = _tmp155_;
#line 1805 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	upper = _tmp156_;
#line 1806 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp157_ = _ ("Lighter");
#line 1806 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp158_ = g_strdup_printf ("<small>%s</small>", _tmp157_);
#line 1806 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	lighter_label = _tmp158_;
#line 1807 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp159_ = self->priv->brightness_scale;
#line 1807 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp160_ = lower;
#line 1807 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp161_ = darker_label;
#line 1807 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_scale_add_mark (_tmp159_, _tmp160_, GTK_POS_BOTTOM, _tmp161_);
#line 1808 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp162_ = self->priv->brightness_scale;
#line 1808 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_scale_add_mark (_tmp162_, (gdouble) 0, GTK_POS_BOTTOM, NULL);
#line 1809 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp163_ = self->priv->brightness_scale;
#line 1809 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp164_ = upper;
#line 1809 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp165_ = lighter_label;
#line 1809 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_scale_add_mark (_tmp163_, _tmp164_, GTK_POS_BOTTOM, _tmp165_);
#line 1810 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp166_ = self->priv->settings;
#line 1810 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp167_ = g_settings_get_int (_tmp166_, "brightness");
#line 1810 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_set_brightness (self, _tmp167_);
#line 1811 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp168_ = self->priv->brightness_adjustment;
#line 1811 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_object (_tmp168_, "value-changed", (GCallback) ___lambda14__gtk_adjustment_value_changed, self, 0);
#line 1813 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp169_ = self->priv->contrast_adjustment;
#line 1813 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp170_ = gtk_adjustment_get_lower (_tmp169_);
#line 1813 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp171_ = _tmp170_;
#line 1813 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	lower = _tmp171_;
#line 1814 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp172_ = _ ("Less");
#line 1814 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp173_ = g_strdup_printf ("<small>%s</small>", _tmp172_);
#line 1814 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	less_label = _tmp173_;
#line 1815 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp174_ = self->priv->contrast_adjustment;
#line 1815 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp175_ = gtk_adjustment_get_upper (_tmp174_);
#line 1815 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp176_ = _tmp175_;
#line 1815 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	upper = _tmp176_;
#line 1816 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp177_ = _ ("More");
#line 1816 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp178_ = g_strdup_printf ("<small>%s</small>", _tmp177_);
#line 1816 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	more_label = _tmp178_;
#line 1817 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp179_ = self->priv->contrast_scale;
#line 1817 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp180_ = lower;
#line 1817 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp181_ = less_label;
#line 1817 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_scale_add_mark (_tmp179_, _tmp180_, GTK_POS_BOTTOM, _tmp181_);
#line 1818 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp182_ = self->priv->contrast_scale;
#line 1818 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_scale_add_mark (_tmp182_, (gdouble) 0, GTK_POS_BOTTOM, NULL);
#line 1819 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp183_ = self->priv->contrast_scale;
#line 1819 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp184_ = upper;
#line 1819 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp185_ = more_label;
#line 1819 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_scale_add_mark (_tmp183_, _tmp184_, GTK_POS_BOTTOM, _tmp185_);
#line 1820 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp186_ = self->priv->settings;
#line 1820 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp187_ = g_settings_get_int (_tmp186_, "contrast");
#line 1820 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_set_contrast (self, _tmp187_);
#line 1821 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp188_ = self->priv->contrast_adjustment;
#line 1821 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_object (_tmp188_, "value-changed", (GCallback) ___lambda15__gtk_adjustment_value_changed, self, 0);
#line 1823 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp189_ = self->priv->quality_adjustment;
#line 1823 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp190_ = gtk_adjustment_get_lower (_tmp189_);
#line 1823 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp191_ = _tmp190_;
#line 1823 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	lower = _tmp191_;
#line 1824 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp192_ = _ ("Minimum");
#line 1824 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp193_ = g_strdup_printf ("<small>%s</small>", _tmp192_);
#line 1824 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	minimum_label = _tmp193_;
#line 1825 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp194_ = self->priv->quality_adjustment;
#line 1825 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp195_ = gtk_adjustment_get_upper (_tmp194_);
#line 1825 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp196_ = _tmp195_;
#line 1825 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	upper = _tmp196_;
#line 1826 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp197_ = _ ("Maximum");
#line 1826 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp198_ = g_strdup_printf ("<small>%s</small>", _tmp197_);
#line 1826 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	maximum_label = _tmp198_;
#line 1827 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp199_ = self->priv->quality_scale;
#line 1827 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp200_ = lower;
#line 1827 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp201_ = minimum_label;
#line 1827 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_scale_add_mark (_tmp199_, _tmp200_, GTK_POS_BOTTOM, _tmp201_);
#line 1828 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp202_ = self->priv->quality_scale;
#line 1828 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_scale_add_mark (_tmp202_, (gdouble) 75, GTK_POS_BOTTOM, NULL);
#line 1829 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp203_ = self->priv->quality_scale;
#line 1829 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp204_ = upper;
#line 1829 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp205_ = maximum_label;
#line 1829 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_scale_add_mark (_tmp203_, _tmp204_, GTK_POS_BOTTOM, _tmp205_);
#line 1830 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp206_ = self->priv->settings;
#line 1830 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp207_ = g_settings_get_int (_tmp206_, "jpeg-quality");
#line 1830 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_set_quality (self, _tmp207_);
#line 1831 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp208_ = self->priv->quality_adjustment;
#line 1831 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_object (_tmp208_, "value-changed", (GCallback) ___lambda16__gtk_adjustment_value_changed, self, 0);
#line 1833 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp209_ = self->priv->settings;
#line 1833 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp210_ = g_settings_get_string (_tmp209_, "selected-device");
#line 1833 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	device = _tmp210_;
#line 1834 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp211_ = device;
#line 1834 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp211_ != NULL) {
#line 8849 "ui.c"
		const gchar* _tmp212_ = NULL;
		GtkTreeIter _tmp213_ = {0};
		gboolean _tmp214_ = FALSE;
#line 1836 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp212_ = device;
#line 1836 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp214_ = user_interface_find_scan_device (self, _tmp212_, &_tmp213_);
#line 1836 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		iter = _tmp213_;
#line 1836 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (_tmp214_) {
#line 8861 "ui.c"
			GtkComboBox* _tmp215_ = NULL;
			GtkTreeIter _tmp216_ = {0};
#line 1837 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp215_ = self->priv->device_combo;
#line 1837 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp216_ = iter;
#line 1837 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			gtk_combo_box_set_active_iter (_tmp215_, &_tmp216_);
#line 8870 "ui.c"
		}
	}
#line 1840 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp217_ = self->priv->settings;
#line 1840 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp218_ = g_settings_get_string (_tmp217_, "document-type");
#line 1840 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	document_type = _tmp218_;
#line 1841 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp219_ = document_type;
#line 1841 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp219_ != NULL) {
#line 8883 "ui.c"
		const gchar* _tmp220_ = NULL;
#line 1842 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp220_ = document_type;
#line 1842 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_set_document_hint (self, _tmp220_, FALSE);
#line 8889 "ui.c"
	}
#line 1844 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp221_ = self->priv->_book;
#line 1844 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp222_ = book_view_new (_tmp221_);
#line 1844 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp222_);
#line 1844 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->book_view);
#line 1844 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->book_view = _tmp222_;
#line 1845 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp223_ = self->priv->book_view;
#line 1845 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_container_set_border_width ((GtkContainer*) _tmp223_, (guint) 18);
#line 1846 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp224_ = self->priv->main_vbox;
#line 1846 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp225_ = self->priv->book_view;
#line 1846 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_box_pack_end (_tmp224_, (GtkWidget*) _tmp225_, TRUE, TRUE, (guint) 0);
#line 1847 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp226_ = self->priv->book_view;
#line 1847 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_object (_tmp226_, "page-selected", (GCallback) _user_interface_page_selected_cb_book_view_page_selected, self, 0);
#line 1848 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp227_ = self->priv->book_view;
#line 1848 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_object (_tmp227_, "show-page", (GCallback) _user_interface_show_page_cb_book_view_show_page, self, 0);
#line 1849 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp228_ = self->priv->book_view;
#line 1849 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_object (_tmp228_, "show-menu", (GCallback) _user_interface_show_page_menu_cb_book_view_show_menu, self, 0);
#line 1850 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp229_ = self->priv->book_view;
#line 1850 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp229_, TRUE);
#line 1852 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp230_ = self->priv->authorize_dialog;
#line 1852 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_window_set_transient_for ((GtkWindow*) _tmp230_, (GtkWindow*) self);
#line 1853 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp231_ = self->priv->preferences_dialog;
#line 1853 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_window_set_transient_for ((GtkWindow*) _tmp231_, (GtkWindow*) self);
#line 1856 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_load_state (self);
#line 1859 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp232_ = self->priv->window_width;
#line 1859 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp233_ = self->priv->window_height;
#line 1859 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_debug ("ui.vala:1859: Restoring window to %dx%d pixels", _tmp232_, _tmp233_);
#line 1860 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp234_ = self->priv->window_width;
#line 1860 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp235_ = self->priv->window_height;
#line 1860 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_window_set_default_size ((GtkWindow*) self, _tmp234_, _tmp235_);
#line 1861 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp236_ = self->priv->window_is_maximized;
#line 1861 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp236_) {
#line 1863 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_debug ("ui.vala:1863: Restoring window to maximized");
#line 1864 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_window_maximize ((GtkWindow*) self);
#line 8957 "ui.c"
	}
#line 1867 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp237_ = _ ("Saving document...");
#line 1867 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp238_ = progress_bar_dialog_new ((GtkApplicationWindow*) self, _tmp237_);
#line 1867 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp238_);
#line 1867 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->progress_dialog);
#line 1867 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->progress_dialog = _tmp238_;
#line 1868 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp239_ = self->priv->_book;
#line 1868 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_connect_object (_tmp239_, "saving", (GCallback) _user_interface_book_saving_cb_book_saving, self, 0);
#line 1673 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (document_type);
#line 1673 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (device);
#line 1673 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (maximum_label);
#line 1673 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (minimum_label);
#line 1673 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (more_label);
#line 1673 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (less_label);
#line 1673 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (lighter_label);
#line 1673 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (darker_label);
#line 1673 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (renderer);
#line 1673 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (content_area);
#line 1673 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (hbox);
#line 1673 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (app);
#line 8997 "ui.c"
}


static void user_interface_load_state (UserInterface* self) {
	gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
	GKeyFile* f = NULL;
	GKeyFile* _tmp3_ = NULL;
	GKeyFile* _tmp11_ = NULL;
	gint _tmp12_ = 0;
	gint _tmp13_ = 0;
	GKeyFile* _tmp14_ = NULL;
	gint _tmp15_ = 0;
	gint _tmp16_ = 0;
	GKeyFile* _tmp17_ = NULL;
	gboolean _tmp18_ = FALSE;
	GKeyFile* _tmp19_ = NULL;
	gint _tmp20_ = 0;
	GKeyFile* _tmp21_ = NULL;
	gint _tmp22_ = 0;
	GKeyFile* _tmp23_ = NULL;
	gint _tmp24_ = 0;
	GKeyFile* _tmp25_ = NULL;
	gchar* _tmp26_ = NULL;
	gchar* _tmp27_ = NULL;
	GQuark _tmp29_ = 0U;
#line 1900 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	static GQuark _tmp28_label0 = 0;
#line 1900 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	static GQuark _tmp28_label1 = 0;
#line 1900 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	static GQuark _tmp28_label2 = 0;
#line 9031 "ui.c"
	GError * _inner_error_ = NULL;
#line 1876 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1878 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = user_interface_get_state_filename (self);
#line 1878 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = _tmp0_;
#line 1878 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 1878 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_debug ("ui.vala:1878: Loading state from %s", _tmp2_);
#line 1878 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (_tmp2_);
#line 1880 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = g_key_file_new ();
#line 1880 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	f = _tmp3_;
#line 9049 "ui.c"
	{
		GKeyFile* _tmp4_ = NULL;
		gchar* _tmp5_ = NULL;
		gchar* _tmp6_ = NULL;
		gchar* _tmp7_ = NULL;
#line 1883 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp4_ = f;
#line 1883 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp5_ = user_interface_get_state_filename (self);
#line 1883 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp6_ = _tmp5_;
#line 1883 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp7_ = _tmp6_;
#line 1883 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_key_file_load_from_file (_tmp4_, _tmp7_, G_KEY_FILE_NONE, &_inner_error_);
#line 1883 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (_tmp7_);
#line 1883 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (_inner_error_ != NULL) {
#line 9069 "ui.c"
			goto __catch21_g_error;
		}
	}
	goto __finally21;
	__catch21_g_error:
	{
		GError* e = NULL;
		GError* _tmp8_ = NULL;
#line 1881 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		e = _inner_error_;
#line 1881 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_inner_error_ = NULL;
#line 1887 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp8_ = e;
#line 1887 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (!g_error_matches (_tmp8_, G_FILE_ERROR, G_FILE_ERROR_NOENT)) {
#line 9086 "ui.c"
			GError* _tmp9_ = NULL;
			const gchar* _tmp10_ = NULL;
#line 1888 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp9_ = e;
#line 1888 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp10_ = _tmp9_->message;
#line 1888 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			g_warning ("ui.vala:1888: Failed to load state: %s", _tmp10_);
#line 9095 "ui.c"
		}
#line 1881 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_error_free0 (e);
#line 9099 "ui.c"
	}
	__finally21:
#line 1881 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_inner_error_ != NULL) {
#line 1881 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_key_file_unref0 (f);
#line 1881 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 1881 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_clear_error (&_inner_error_);
#line 1881 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return;
#line 9112 "ui.c"
	}
#line 1890 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp11_ = f;
#line 1890 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp12_ = user_interface_state_get_integer (self, _tmp11_, "window", "width", 600);
#line 1890 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->window_width = _tmp12_;
#line 1891 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp13_ = self->priv->window_width;
#line 1891 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp13_ <= 0) {
#line 1892 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		self->priv->window_width = 600;
#line 9126 "ui.c"
	}
#line 1893 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp14_ = f;
#line 1893 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp15_ = user_interface_state_get_integer (self, _tmp14_, "window", "height", 400);
#line 1893 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->window_height = _tmp15_;
#line 1894 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp16_ = self->priv->window_height;
#line 1894 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp16_ <= 0) {
#line 1895 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		self->priv->window_height = 400;
#line 9140 "ui.c"
	}
#line 1896 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp17_ = f;
#line 1896 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp18_ = user_interface_state_get_boolean (self, _tmp17_, "window", "is-maximized", FALSE);
#line 1896 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->window_is_maximized = _tmp18_;
#line 1897 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp19_ = f;
#line 1897 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp20_ = user_interface_state_get_integer (self, _tmp19_, "last-page", "width", 595);
#line 1897 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->default_page_width = _tmp20_;
#line 1898 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp21_ = f;
#line 1898 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp22_ = user_interface_state_get_integer (self, _tmp21_, "last-page", "height", 842);
#line 1898 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->default_page_height = _tmp22_;
#line 1899 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp23_ = f;
#line 1899 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp24_ = user_interface_state_get_integer (self, _tmp23_, "last-page", "dpi", 72);
#line 1899 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->default_page_dpi = _tmp24_;
#line 1900 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp25_ = f;
#line 1900 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp26_ = user_interface_state_get_string (self, _tmp25_, "last-page", "scan-direction", "top-to-bottom");
#line 1900 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp27_ = _tmp26_;
#line 1900 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp29_ = (NULL == _tmp27_) ? 0 : g_quark_from_string (_tmp27_);
#line 1900 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_free (_tmp27_);
#line 1900 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp29_ == ((0 != _tmp28_label0) ? _tmp28_label0 : (_tmp28_label0 = g_quark_from_static_string ("bottom-to-top")))) {
#line 1900 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		switch (0) {
#line 9180 "ui.c"
			default:
			{
#line 1907 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				self->priv->default_page_scan_direction = SCAN_DIRECTION_BOTTOM_TO_TOP;
#line 1908 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				break;
#line 9187 "ui.c"
			}
		}
	} else if (_tmp29_ == ((0 != _tmp28_label1) ? _tmp28_label1 : (_tmp28_label1 = g_quark_from_static_string ("left-to-right")))) {
#line 1900 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		switch (0) {
#line 9193 "ui.c"
			default:
			{
#line 1910 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				self->priv->default_page_scan_direction = SCAN_DIRECTION_LEFT_TO_RIGHT;
#line 1911 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				break;
#line 9200 "ui.c"
			}
		}
	} else if (_tmp29_ == ((0 != _tmp28_label2) ? _tmp28_label2 : (_tmp28_label2 = g_quark_from_static_string ("right-to-left")))) {
#line 1900 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		switch (0) {
#line 9206 "ui.c"
			default:
			{
#line 1913 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				self->priv->default_page_scan_direction = SCAN_DIRECTION_RIGHT_TO_LEFT;
#line 1914 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				break;
#line 9213 "ui.c"
			}
		}
	} else {
#line 1900 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		switch (0) {
#line 9219 "ui.c"
			default:
			{
#line 1904 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				self->priv->default_page_scan_direction = SCAN_DIRECTION_TOP_TO_BOTTOM;
#line 1905 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
				break;
#line 9226 "ui.c"
			}
		}
	}
#line 1876 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_key_file_unref0 (f);
#line 9232 "ui.c"
}


static gint user_interface_state_get_integer (UserInterface* self, GKeyFile* f, const gchar* group_name, const gchar* key, gint _default_) {
	gint result = 0;
	GError * _inner_error_ = NULL;
#line 1918 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, 0);
#line 1918 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (f != NULL, 0);
#line 1918 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (group_name != NULL, 0);
#line 1918 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (key != NULL, 0);
#line 9247 "ui.c"
	{
		gint _tmp0_ = 0;
		GKeyFile* _tmp1_ = NULL;
		const gchar* _tmp2_ = NULL;
		const gchar* _tmp3_ = NULL;
		gint _tmp4_ = 0;
#line 1922 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp1_ = f;
#line 1922 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp2_ = group_name;
#line 1922 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp3_ = key;
#line 1922 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp4_ = g_key_file_get_integer (_tmp1_, _tmp2_, _tmp3_, &_inner_error_);
#line 1922 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp0_ = _tmp4_;
#line 1922 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (_inner_error_ != NULL) {
#line 9266 "ui.c"
			goto __catch22_g_error;
		}
#line 1922 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		result = _tmp0_;
#line 1922 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return result;
#line 9273 "ui.c"
	}
	goto __finally22;
	__catch22_g_error:
	{
		gint _tmp5_ = 0;
#line 1920 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_clear_error (&_inner_error_);
#line 1920 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_inner_error_ = NULL;
#line 1926 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp5_ = _default_;
#line 1926 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		result = _tmp5_;
#line 1926 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return result;
#line 9289 "ui.c"
	}
	__finally22:
#line 1920 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 1920 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_clear_error (&_inner_error_);
#line 1920 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return 0;
#line 9298 "ui.c"
}


static gboolean user_interface_state_get_boolean (UserInterface* self, GKeyFile* f, const gchar* group_name, const gchar* key, gboolean _default_) {
	gboolean result = FALSE;
	GError * _inner_error_ = NULL;
#line 1930 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 1930 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (f != NULL, FALSE);
#line 1930 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (group_name != NULL, FALSE);
#line 1930 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (key != NULL, FALSE);
#line 9313 "ui.c"
	{
		gboolean _tmp0_ = FALSE;
		GKeyFile* _tmp1_ = NULL;
		const gchar* _tmp2_ = NULL;
		const gchar* _tmp3_ = NULL;
		gboolean _tmp4_ = FALSE;
#line 1934 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp1_ = f;
#line 1934 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp2_ = group_name;
#line 1934 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp3_ = key;
#line 1934 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp4_ = g_key_file_get_boolean (_tmp1_, _tmp2_, _tmp3_, &_inner_error_);
#line 1934 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp0_ = _tmp4_;
#line 1934 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (_inner_error_ != NULL) {
#line 9332 "ui.c"
			goto __catch23_g_error;
		}
#line 1934 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		result = _tmp0_;
#line 1934 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return result;
#line 9339 "ui.c"
	}
	goto __finally23;
	__catch23_g_error:
	{
		gboolean _tmp5_ = FALSE;
#line 1932 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_clear_error (&_inner_error_);
#line 1932 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_inner_error_ = NULL;
#line 1938 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp5_ = _default_;
#line 1938 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		result = _tmp5_;
#line 1938 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return result;
#line 9355 "ui.c"
	}
	__finally23:
#line 1932 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 1932 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_clear_error (&_inner_error_);
#line 1932 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return FALSE;
#line 9364 "ui.c"
}


static gchar* user_interface_state_get_string (UserInterface* self, GKeyFile* f, const gchar* group_name, const gchar* key, const gchar* _default_) {
	gchar* result = NULL;
	GError * _inner_error_ = NULL;
#line 1942 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 1942 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (f != NULL, NULL);
#line 1942 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (group_name != NULL, NULL);
#line 1942 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (key != NULL, NULL);
#line 1942 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (_default_ != NULL, NULL);
#line 9381 "ui.c"
	{
		gchar* _tmp0_ = NULL;
		GKeyFile* _tmp1_ = NULL;
		const gchar* _tmp2_ = NULL;
		const gchar* _tmp3_ = NULL;
		gchar* _tmp4_ = NULL;
		gchar* _tmp5_ = NULL;
#line 1946 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp1_ = f;
#line 1946 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp2_ = group_name;
#line 1946 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp3_ = key;
#line 1946 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp4_ = g_key_file_get_string (_tmp1_, _tmp2_, _tmp3_, &_inner_error_);
#line 1946 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp0_ = _tmp4_;
#line 1946 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (_inner_error_ != NULL) {
#line 9401 "ui.c"
			goto __catch24_g_error;
		}
#line 1946 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp5_ = _tmp0_;
#line 1946 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp0_ = NULL;
#line 1946 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		result = _tmp5_;
#line 1946 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (_tmp0_);
#line 1946 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return result;
#line 9414 "ui.c"
	}
	goto __finally24;
	__catch24_g_error:
	{
		const gchar* _tmp6_ = NULL;
		gchar* _tmp7_ = NULL;
#line 1944 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_clear_error (&_inner_error_);
#line 1944 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_inner_error_ = NULL;
#line 1950 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp6_ = _default_;
#line 1950 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp7_ = g_strdup (_tmp6_);
#line 1950 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		result = _tmp7_;
#line 1950 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return result;
#line 9433 "ui.c"
	}
	__finally24:
#line 1944 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 1944 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_clear_error (&_inner_error_);
#line 1944 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return NULL;
#line 9442 "ui.c"
}


static gboolean ___lambda9_ (UserInterface* self) {
	gboolean result = FALSE;
#line 1962 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_save_state (self, TRUE);
#line 1963 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->save_state_timeout = (guint) 0;
#line 1964 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = FALSE;
#line 1964 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 9456 "ui.c"
}


static gboolean ____lambda9__gsource_func (gpointer self) {
	gboolean result;
	result = ___lambda9_ ((UserInterface*) self);
#line 1960 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 9465 "ui.c"
}


static void user_interface_save_state (UserInterface* self, gboolean force) {
	gboolean _tmp0_ = FALSE;
	gchar* _tmp4_ = NULL;
	gchar* _tmp5_ = NULL;
	gchar* _tmp6_ = NULL;
	GKeyFile* f = NULL;
	GKeyFile* _tmp7_ = NULL;
	GKeyFile* _tmp8_ = NULL;
	gint _tmp9_ = 0;
	GKeyFile* _tmp10_ = NULL;
	gint _tmp11_ = 0;
	GKeyFile* _tmp12_ = NULL;
	gboolean _tmp13_ = FALSE;
	GKeyFile* _tmp14_ = NULL;
	gint _tmp15_ = 0;
	GKeyFile* _tmp16_ = NULL;
	gint _tmp17_ = 0;
	GKeyFile* _tmp18_ = NULL;
	gint _tmp19_ = 0;
	ScanDirection _tmp20_ = 0;
	GError * _inner_error_ = NULL;
#line 1954 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 1956 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = force;
#line 1956 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (!_tmp0_) {
#line 9496 "ui.c"
		guint _tmp1_ = 0U;
		guint _tmp3_ = 0U;
#line 1958 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp1_ = self->priv->save_state_timeout;
#line 1958 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (_tmp1_ != ((guint) 0)) {
#line 9503 "ui.c"
			guint _tmp2_ = 0U;
#line 1959 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp2_ = self->priv->save_state_timeout;
#line 1959 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			g_source_remove (_tmp2_);
#line 9509 "ui.c"
		}
#line 1960 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp3_ = g_timeout_add_full (G_PRIORITY_DEFAULT, (guint) 100, ____lambda9__gsource_func, g_object_ref (self), g_object_unref);
#line 1960 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		self->priv->save_state_timeout = _tmp3_;
#line 1966 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return;
#line 9517 "ui.c"
	}
#line 1969 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = user_interface_get_state_filename (self);
#line 1969 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = _tmp4_;
#line 1969 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp6_ = _tmp5_;
#line 1969 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_debug ("ui.vala:1969: Saving state to %s", _tmp6_);
#line 1969 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (_tmp6_);
#line 1971 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp7_ = g_key_file_new ();
#line 1971 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	f = _tmp7_;
#line 1972 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp8_ = f;
#line 1972 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp9_ = self->priv->window_width;
#line 1972 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_key_file_set_integer (_tmp8_, "window", "width", _tmp9_);
#line 1973 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp10_ = f;
#line 1973 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp11_ = self->priv->window_height;
#line 1973 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_key_file_set_integer (_tmp10_, "window", "height", _tmp11_);
#line 1974 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp12_ = f;
#line 1974 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp13_ = self->priv->window_is_maximized;
#line 1974 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_key_file_set_boolean (_tmp12_, "window", "is-maximized", _tmp13_);
#line 1975 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp14_ = f;
#line 1975 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp15_ = self->priv->default_page_width;
#line 1975 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_key_file_set_integer (_tmp14_, "last-page", "width", _tmp15_);
#line 1976 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp16_ = f;
#line 1976 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp17_ = self->priv->default_page_height;
#line 1976 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_key_file_set_integer (_tmp16_, "last-page", "height", _tmp17_);
#line 1977 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp18_ = f;
#line 1977 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp19_ = self->priv->default_page_dpi;
#line 1977 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_key_file_set_integer (_tmp18_, "last-page", "dpi", _tmp19_);
#line 1978 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp20_ = self->priv->default_page_scan_direction;
#line 1978 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	switch (_tmp20_) {
#line 1978 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case SCAN_DIRECTION_TOP_TO_BOTTOM:
#line 9575 "ui.c"
		{
			GKeyFile* _tmp21_ = NULL;
#line 1981 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp21_ = f;
#line 1981 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			g_key_file_set_value (_tmp21_, "last-page", "scan-direction", "top-to-bottom");
#line 1982 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			break;
#line 9584 "ui.c"
		}
#line 1978 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case SCAN_DIRECTION_BOTTOM_TO_TOP:
#line 9588 "ui.c"
		{
			GKeyFile* _tmp22_ = NULL;
#line 1984 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp22_ = f;
#line 1984 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			g_key_file_set_value (_tmp22_, "last-page", "scan-direction", "bottom-to-top");
#line 1985 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			break;
#line 9597 "ui.c"
		}
#line 1978 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case SCAN_DIRECTION_LEFT_TO_RIGHT:
#line 9601 "ui.c"
		{
			GKeyFile* _tmp23_ = NULL;
#line 1987 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp23_ = f;
#line 1987 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			g_key_file_set_value (_tmp23_, "last-page", "scan-direction", "left-to-right");
#line 1988 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			break;
#line 9610 "ui.c"
		}
#line 1978 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case SCAN_DIRECTION_RIGHT_TO_LEFT:
#line 9614 "ui.c"
		{
			GKeyFile* _tmp24_ = NULL;
#line 1990 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			_tmp24_ = f;
#line 1990 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			g_key_file_set_value (_tmp24_, "last-page", "scan-direction", "right-to-left");
#line 1991 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			break;
#line 9623 "ui.c"
		}
		default:
#line 1978 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 9628 "ui.c"
	}
	{
		gchar* _tmp25_ = NULL;
		gchar* _tmp26_ = NULL;
		gchar* _tmp27_ = NULL;
		GKeyFile* _tmp28_ = NULL;
		gchar* _tmp29_ = NULL;
		gchar* _tmp30_ = NULL;
#line 1995 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp25_ = user_interface_get_state_filename (self);
#line 1995 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp26_ = _tmp25_;
#line 1995 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp27_ = _tmp26_;
#line 1995 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp28_ = f;
#line 1995 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp29_ = g_key_file_to_data (_tmp28_, NULL, NULL);
#line 1995 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp30_ = _tmp29_;
#line 1995 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_file_set_contents (_tmp27_, _tmp30_, (gssize) (-1), &_inner_error_);
#line 1995 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (_tmp30_);
#line 1995 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (_tmp27_);
#line 1995 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (_inner_error_ != NULL) {
#line 9657 "ui.c"
			goto __catch25_g_error;
		}
	}
	goto __finally25;
	__catch25_g_error:
	{
		GError* e = NULL;
		GError* _tmp31_ = NULL;
		const gchar* _tmp32_ = NULL;
#line 1993 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		e = _inner_error_;
#line 1993 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_inner_error_ = NULL;
#line 1999 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp31_ = e;
#line 1999 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp32_ = _tmp31_->message;
#line 1999 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_warning ("ui.vala:1999: Failed to write state: %s", _tmp32_);
#line 1993 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_error_free0 (e);
#line 9679 "ui.c"
	}
	__finally25:
#line 1993 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_inner_error_ != NULL) {
#line 1993 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_key_file_unref0 (f);
#line 1993 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 1993 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_clear_error (&_inner_error_);
#line 1993 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return;
#line 9692 "ui.c"
	}
#line 1954 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_key_file_unref0 (f);
#line 9696 "ui.c"
}


static gboolean ___lambda17_ (UserInterface* self) {
	gboolean result = FALSE;
	ProgressBarDialog* _tmp0_ = NULL;
#line 2014 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->progress_dialog;
#line 2014 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp0_, FALSE);
#line 2015 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = FALSE;
#line 2015 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 9711 "ui.c"
}


static gboolean ____lambda17__gsource_func (gpointer self) {
	gboolean result;
	result = ___lambda17_ ((UserInterface*) self);
#line 2013 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 9720 "ui.c"
}


static void user_interface_book_saving_cb (UserInterface* self, gint page_number) {
	gint total = 0;
	Book* _tmp1_ = NULL;
	guint _tmp2_ = 0U;
	guint _tmp3_ = 0U;
	gdouble fraction = 0.0;
	gint _tmp4_ = 0;
	gint _tmp5_ = 0;
	gboolean complete = FALSE;
	gdouble _tmp6_ = 0.0;
	gboolean _tmp7_ = FALSE;
	gchar* message = NULL;
	const gchar* _tmp8_ = NULL;
	gint _tmp9_ = 0;
	gint _tmp10_ = 0;
	gchar* _tmp11_ = NULL;
	ProgressBarDialog* _tmp12_ = NULL;
	gdouble _tmp13_ = 0.0;
	ProgressBarDialog* _tmp14_ = NULL;
#line 2003 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 2006 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	while (TRUE) {
#line 9747 "ui.c"
		gboolean _tmp0_ = FALSE;
#line 2006 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp0_ = gtk_events_pending ();
#line 2006 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (!_tmp0_) {
#line 2006 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
			break;
#line 9755 "ui.c"
		}
#line 2007 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_main_iteration ();
#line 9759 "ui.c"
	}
#line 2009 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = self->priv->_book;
#line 2009 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = book_get_n_pages (_tmp1_);
#line 2009 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = _tmp2_;
#line 2009 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	total = (gint) _tmp3_;
#line 2010 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = page_number;
#line 2010 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = total;
#line 2010 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	fraction = (_tmp4_ + 1.0) / _tmp5_;
#line 2011 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp6_ = fraction;
#line 2011 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	complete = _tmp6_ == 1.0;
#line 2012 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp7_ = complete;
#line 2012 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp7_) {
#line 2013 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_timeout_add_full (G_PRIORITY_DEFAULT, (guint) 500, ____lambda17__gsource_func, g_object_ref (self), g_object_unref);
#line 9785 "ui.c"
	}
#line 2017 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp8_ = _ ("Saving page %d out of %d");
#line 2017 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp9_ = page_number;
#line 2017 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp10_ = total;
#line 2017 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp11_ = g_strdup_printf (_tmp8_, _tmp9_ + 1, _tmp10_);
#line 2017 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	message = _tmp11_;
#line 2019 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp12_ = self->priv->progress_dialog;
#line 2019 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp13_ = fraction;
#line 2019 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	progress_bar_dialog_set_fraction (_tmp12_, _tmp13_);
#line 2020 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp14_ = self->priv->progress_dialog;
#line 2020 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	progress_bar_dialog_set_message (_tmp14_, message);
#line 2003 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (message);
#line 9809 "ui.c"
}


void user_interface_show_progress_dialog (UserInterface* self) {
	ProgressBarDialog* _tmp0_ = NULL;
#line 2023 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 2025 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->progress_dialog;
#line 2025 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp0_, TRUE);
#line 9821 "ui.c"
}


void user_interface_hide_progress_dialog (UserInterface* self) {
	ProgressBarDialog* _tmp0_ = NULL;
#line 2028 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 2030 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->progress_dialog;
#line 2030 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp0_, FALSE);
#line 9833 "ui.c"
}


void user_interface_show_error (UserInterface* self, const gchar* error_title, const gchar* error_text, gboolean change_scanner_hint) {
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	const gchar* _tmp2_ = NULL;
	gchar* _tmp3_ = NULL;
	gboolean _tmp4_ = FALSE;
#line 2033 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 2033 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (error_title != NULL);
#line 2033 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (error_text != NULL);
#line 2035 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->have_error = TRUE;
#line 2036 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = error_title;
#line 2036 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = g_strdup (_tmp0_);
#line 2036 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (self->priv->error_title);
#line 2036 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->error_title = _tmp1_;
#line 2037 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = error_text;
#line 2037 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = g_strdup (_tmp2_);
#line 2037 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (self->priv->error_text);
#line 2037 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->error_text = _tmp3_;
#line 2038 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = change_scanner_hint;
#line 2038 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->error_change_scanner_hint = _tmp4_;
#line 2039 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_update_info_bar (self);
#line 9873 "ui.c"
}


void user_interface_start (UserInterface* self) {
#line 2042 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 2044 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) self, TRUE);
#line 9882 "ui.c"
}


Book* user_interface_get_book (UserInterface* self) {
	Book* result;
	Book* _tmp0_ = NULL;
#line 162 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 162 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->_book;
#line 162 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = _tmp0_;
#line 162 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 9897 "ui.c"
}


static gpointer _book_ref0 (gpointer self) {
#line 162 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return self ? book_ref (self) : NULL;
#line 9904 "ui.c"
}


static void user_interface_set_book (UserInterface* self, Book* value) {
	Book* _tmp0_ = NULL;
	Book* _tmp1_ = NULL;
#line 162 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 162 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = value;
#line 162 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = _book_ref0 (_tmp0_);
#line 162 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_book_unref0 (self->priv->_book);
#line 162 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->_book = _tmp1_;
#line 162 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_notify ((GObject *) self, "book");
#line 9923 "ui.c"
}


Page* user_interface_get_selected_page (UserInterface* self) {
	Page* result;
	BookView* _tmp0_ = NULL;
	Page* _tmp1_ = NULL;
	Page* _tmp2_ = NULL;
#line 167 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 169 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->book_view;
#line 169 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = book_view_get_selected_page (_tmp0_);
#line 169 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 169 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = _tmp2_;
#line 169 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 9944 "ui.c"
}


void user_interface_set_selected_page (UserInterface* self, Page* value) {
	BookView* _tmp0_ = NULL;
	Page* _tmp1_ = NULL;
#line 171 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 173 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->book_view;
#line 173 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = value;
#line 173 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	book_view_set_selected_page (_tmp0_, _tmp1_);
#line 171 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_notify ((GObject *) self, "selected-page");
#line 9961 "ui.c"
}


const gchar* user_interface_get_default_file_name (UserInterface* self) {
	const gchar* result;
	const gchar* _tmp0_ = NULL;
#line 188 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 188 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->_default_file_name;
#line 188 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = _tmp0_;
#line 188 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 9976 "ui.c"
}


void user_interface_set_default_file_name (UserInterface* self, const gchar* value) {
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
#line 188 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 188 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = value;
#line 188 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = g_strdup (_tmp0_);
#line 188 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (self->priv->_default_file_name);
#line 188 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->_default_file_name = _tmp1_;
#line 188 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_notify ((GObject *) self, "default-file-name");
#line 9995 "ui.c"
}


gboolean user_interface_get_scanning (UserInterface* self) {
	gboolean result;
	gboolean _tmp0_ = FALSE;
#line 192 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 192 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->scanning_;
#line 192 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = _tmp0_;
#line 192 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 10010 "ui.c"
}


void user_interface_set_scanning (UserInterface* self, gboolean value) {
	gboolean _tmp0_ = FALSE;
	GtkMenuItem* _tmp1_ = NULL;
	gboolean _tmp2_ = FALSE;
	GtkMenuItem* _tmp3_ = NULL;
	gboolean _tmp4_ = FALSE;
	GtkToolButton* _tmp5_ = NULL;
	gboolean _tmp6_ = FALSE;
	GtkButton* _tmp7_ = NULL;
	gboolean _tmp8_ = FALSE;
	GtkButton* _tmp9_ = NULL;
	gboolean _tmp10_ = FALSE;
#line 193 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 195 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = value;
#line 195 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->scanning_ = _tmp0_;
#line 196 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = self->priv->page_delete_menuitem;
#line 196 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = value;
#line 196 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_sensitive ((GtkWidget*) _tmp1_, !_tmp2_);
#line 197 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = self->priv->stop_scan_menuitem;
#line 197 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = value;
#line 197 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_sensitive ((GtkWidget*) _tmp3_, _tmp4_);
#line 198 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = self->priv->stop_toolbutton;
#line 198 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp6_ = value;
#line 198 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_sensitive ((GtkWidget*) _tmp5_, _tmp6_);
#line 199 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp7_ = self->priv->scan_button;
#line 199 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp8_ = value;
#line 199 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp7_, !_tmp8_);
#line 200 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp9_ = self->priv->stop_button;
#line 200 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp10_ = value;
#line 200 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp9_, _tmp10_);
#line 193 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_notify ((GObject *) self, "scanning");
#line 10064 "ui.c"
}


gint user_interface_get_brightness (UserInterface* self) {
	gint result;
	GtkAdjustment* _tmp0_ = NULL;
	gdouble _tmp1_ = 0.0;
	gdouble _tmp2_ = 0.0;
#line 212 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, 0);
#line 212 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->brightness_adjustment;
#line 212 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = gtk_adjustment_get_value (_tmp0_);
#line 212 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 212 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = (gint) _tmp2_;
#line 212 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 10085 "ui.c"
}


void user_interface_set_brightness (UserInterface* self, gint value) {
	GtkAdjustment* _tmp0_ = NULL;
	gint _tmp1_ = 0;
#line 213 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 213 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->brightness_adjustment;
#line 213 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = value;
#line 213 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_adjustment_set_value (_tmp0_, (gdouble) _tmp1_);
#line 213 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_notify ((GObject *) self, "brightness");
#line 10102 "ui.c"
}


gint user_interface_get_contrast (UserInterface* self) {
	gint result;
	GtkAdjustment* _tmp0_ = NULL;
	gdouble _tmp1_ = 0.0;
	gdouble _tmp2_ = 0.0;
#line 218 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, 0);
#line 218 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->contrast_adjustment;
#line 218 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = gtk_adjustment_get_value (_tmp0_);
#line 218 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 218 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = (gint) _tmp2_;
#line 218 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 10123 "ui.c"
}


void user_interface_set_contrast (UserInterface* self, gint value) {
	GtkAdjustment* _tmp0_ = NULL;
	gint _tmp1_ = 0;
#line 219 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 219 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->contrast_adjustment;
#line 219 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = value;
#line 219 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_adjustment_set_value (_tmp0_, (gdouble) _tmp1_);
#line 219 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_notify ((GObject *) self, "contrast");
#line 10140 "ui.c"
}


gint user_interface_get_quality (UserInterface* self) {
	gint result;
	GtkAdjustment* _tmp0_ = NULL;
	gdouble _tmp1_ = 0.0;
	gdouble _tmp2_ = 0.0;
#line 224 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, 0);
#line 224 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->quality_adjustment;
#line 224 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = gtk_adjustment_get_value (_tmp0_);
#line 224 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 224 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = (gint) _tmp2_;
#line 224 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 10161 "ui.c"
}


void user_interface_set_quality (UserInterface* self, gint value) {
	GtkAdjustment* _tmp0_ = NULL;
	gint _tmp1_ = 0;
#line 225 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 225 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->quality_adjustment;
#line 225 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = value;
#line 225 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_adjustment_set_value (_tmp0_, (gdouble) _tmp1_);
#line 225 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_notify ((GObject *) self, "quality");
#line 10178 "ui.c"
}


gchar* user_interface_get_selected_device (UserInterface* self) {
	gchar* result;
	GtkTreeIter iter = {0};
	GtkComboBox* _tmp0_ = NULL;
	GtkTreeIter _tmp1_ = {0};
	gboolean _tmp2_ = FALSE;
#line 230 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 234 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->device_combo;
#line 234 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = gtk_combo_box_get_active_iter (_tmp0_, &_tmp1_);
#line 234 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	iter = _tmp1_;
#line 234 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_tmp2_) {
#line 10198 "ui.c"
		gchar* device = NULL;
		GtkListStore* _tmp3_ = NULL;
		GtkTreeIter _tmp4_ = {0};
#line 237 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp3_ = self->priv->device_model;
#line 237 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp4_ = iter;
#line 237 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		gtk_tree_model_get ((GtkTreeModel*) _tmp3_, &_tmp4_, 0, &device, -1, -1);
#line 238 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		result = device;
#line 238 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return result;
#line 10212 "ui.c"
	}
#line 241 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = NULL;
#line 241 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 10218 "ui.c"
}


void user_interface_set_selected_device (UserInterface* self, const gchar* value) {
	GtkTreeIter iter = {0};
	const gchar* _tmp0_ = NULL;
	GtkTreeIter _tmp1_ = {0};
	gboolean _tmp2_ = FALSE;
	GtkComboBox* _tmp3_ = NULL;
	GtkTreeIter _tmp4_ = {0};
#line 244 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 247 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = value;
#line 247 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = user_interface_find_scan_device (self, _tmp0_, &_tmp1_);
#line 247 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	iter = _tmp1_;
#line 247 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (!_tmp2_) {
#line 248 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return;
#line 10241 "ui.c"
	}
#line 250 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = self->priv->device_combo;
#line 250 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = iter;
#line 250 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_combo_box_set_active_iter (_tmp3_, &_tmp4_);
#line 251 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->user_selected_device = TRUE;
#line 244 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_notify ((GObject *) self, "selected-device");
#line 10253 "ui.c"
}


static gboolean user_interface_get_shell_shows_menubar (UserInterface* self) {
	gboolean result;
	gboolean shell_shows_menubar = FALSE;
	GtkSettings* _tmp0_ = NULL;
#line 1665 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 1668 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = gtk_settings_get_default ();
#line 1668 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_get ((GObject*) _tmp0_, "gtk-shell-shows-menubar", &shell_shows_menubar, NULL);
#line 1669 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = shell_shows_menubar;
#line 1669 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 10271 "ui.c"
}


static gchar* user_interface_get_state_filename (UserInterface* self) {
	gchar* result;
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
#line 1873 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 1873 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = g_get_user_cache_dir ();
#line 1873 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = g_build_filename (_tmp0_, "simple-scan", "state", NULL);
#line 1873 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = _tmp1_;
#line 1873 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 10289 "ui.c"
}


static void g_cclosure_user_marshal_VOID__STRING_SCAN_OPTIONS (GClosure * closure, GValue * return_value, guint n_param_values, const GValue * param_values, gpointer invocation_hint, gpointer marshal_data) {
	typedef void (*GMarshalFunc_VOID__STRING_SCAN_OPTIONS) (gpointer data1, const char* arg_1, gpointer arg_2, gpointer data2);
	register GMarshalFunc_VOID__STRING_SCAN_OPTIONS callback;
	register GCClosure * cc;
	register gpointer data1;
	register gpointer data2;
	cc = (GCClosure *) closure;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (n_param_values == 3);
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (G_CCLOSURE_SWAP_DATA (closure)) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		data1 = closure->data;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		data2 = param_values->data[0].v_pointer;
#line 10308 "ui.c"
	} else {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		data1 = param_values->data[0].v_pointer;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		data2 = closure->data;
#line 10314 "ui.c"
	}
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	callback = (GMarshalFunc_VOID__STRING_SCAN_OPTIONS) (marshal_data ? marshal_data : cc->callback);
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	callback (data1, g_value_get_string (param_values + 1), value_get_scan_options (param_values + 2), data2);
#line 10320 "ui.c"
}


static void g_cclosure_user_marshal_VOID__STRING_INT (GClosure * closure, GValue * return_value, guint n_param_values, const GValue * param_values, gpointer invocation_hint, gpointer marshal_data) {
	typedef void (*GMarshalFunc_VOID__STRING_INT) (gpointer data1, const char* arg_1, gint arg_2, gpointer data2);
	register GMarshalFunc_VOID__STRING_INT callback;
	register GCClosure * cc;
	register gpointer data1;
	register gpointer data2;
	cc = (GCClosure *) closure;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (n_param_values == 3);
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (G_CCLOSURE_SWAP_DATA (closure)) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		data1 = closure->data;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		data2 = param_values->data[0].v_pointer;
#line 10339 "ui.c"
	} else {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		data1 = param_values->data[0].v_pointer;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		data2 = closure->data;
#line 10345 "ui.c"
	}
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	callback = (GMarshalFunc_VOID__STRING_INT) (marshal_data ? marshal_data : cc->callback);
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	callback (data1, g_value_get_string (param_values + 1), g_value_get_int (param_values + 2), data2);
#line 10351 "ui.c"
}


static void user_interface_class_init (UserInterfaceClass * klass) {
	gint UserInterface_private_offset;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	user_interface_parent_class = g_type_class_peek_parent (klass);
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_type_class_add_private (klass, sizeof (UserInterfacePrivate));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_user_interface_get_property;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_user_interface_set_property;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	G_OBJECT_CLASS (klass)->finalize = user_interface_finalize;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), USER_INTERFACE_BOOK, param_spec_book ("book", "book", "book", TYPE_BOOK, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), USER_INTERFACE_SELECTED_PAGE, param_spec_page ("selected-page", "selected-page", "selected-page", TYPE_PAGE, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), USER_INTERFACE_DEFAULT_FILE_NAME, g_param_spec_string ("default-file-name", "default-file-name", "default-file-name", NULL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), USER_INTERFACE_SCANNING, g_param_spec_boolean ("scanning", "scanning", "scanning", FALSE, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), USER_INTERFACE_BRIGHTNESS, g_param_spec_int ("brightness", "brightness", "brightness", G_MININT, G_MAXINT, 0, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), USER_INTERFACE_CONTRAST, g_param_spec_int ("contrast", "contrast", "contrast", G_MININT, G_MAXINT, 0, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), USER_INTERFACE_QUALITY, g_param_spec_int ("quality", "quality", "quality", G_MININT, G_MAXINT, 0, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), USER_INTERFACE_SELECTED_DEVICE, g_param_spec_string ("selected-device", "selected-device", "selected-device", NULL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	UserInterface_private_offset = g_type_class_get_instance_private_offset (klass);
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_set_template_from_resource (GTK_WIDGET_CLASS (klass), "/org/gnome/SimpleScan/simple-scan.ui");
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_new ("start_scan", TYPE_USER_INTERFACE, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_user_marshal_VOID__STRING_SCAN_OPTIONS, G_TYPE_NONE, 2, G_TYPE_STRING, TYPE_SCAN_OPTIONS);
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_new ("stop_scan", TYPE_USER_INTERFACE, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_new ("email", TYPE_USER_INTERFACE, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_user_marshal_VOID__STRING_INT, G_TYPE_NONE, 2, G_TYPE_STRING, G_TYPE_INT);
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "menubar", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, menubar));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "toolbar", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, toolbar));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "page_menu", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, page_menu));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "main_vbox", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, main_vbox));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "custom_crop_menuitem", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, custom_crop_menuitem));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "a4_menuitem", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, a4_menuitem));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "a5_menuitem", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, a5_menuitem));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "a6_menuitem", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, a6_menuitem));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "letter_menuitem", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, letter_menuitem));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "legal_menuitem", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, legal_menuitem));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "four_by_six_menuitem", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, four_by_six_menuitem));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "no_crop_menuitem", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, no_crop_menuitem));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "page_move_left_menuitem", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, page_move_left_menuitem));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "page_move_right_menuitem", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, page_move_right_menuitem));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "page_delete_menuitem", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, page_delete_menuitem));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "crop_rotate_menuitem", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, crop_rotate_menuitem));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "save_menuitem", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, save_menuitem));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "save_as_menuitem", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, save_as_menuitem));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "copy_to_clipboard_menuitem", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, copy_to_clipboard_menuitem));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "save_button", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, save_button));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "save_toolbutton", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, save_toolbutton));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "stop_scan_menuitem", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, stop_scan_menuitem));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "stop_toolbutton", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, stop_toolbutton));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "crop_button", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, crop_button));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "crop_toolbutton", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, crop_toolbutton));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "stop_button", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, stop_button));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "scan_button", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, scan_button));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "text_button_menuitem", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, text_button_menuitem));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "text_button_hb_menuitem", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, text_button_hb_menuitem));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "text_menuitem", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, text_menuitem));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "photo_button_menuitem", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, photo_button_menuitem));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "photo_button_hb_menuitem", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, photo_button_hb_menuitem));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "photo_menuitem", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, photo_menuitem));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "authorize_dialog", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, authorize_dialog));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "authorize_label", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, authorize_label));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "username_entry", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, username_entry));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "password_entry", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, password_entry));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "preferences_dialog", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, preferences_dialog));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "device_combo", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, device_combo));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "text_dpi_combo", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, text_dpi_combo));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "photo_dpi_combo", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, photo_dpi_combo));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "page_side_combo", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, page_side_combo));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "paper_size_combo", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, paper_size_combo));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "brightness_scale", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, brightness_scale));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "contrast_scale", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, contrast_scale));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "quality_scale", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, quality_scale));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "device_model", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, device_model));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "text_dpi_model", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, text_dpi_model));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "photo_dpi_model", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, photo_dpi_model));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "page_side_model", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, page_side_model));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "paper_size_model", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, paper_size_model));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "brightness_adjustment", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, brightness_adjustment));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "contrast_adjustment", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, contrast_adjustment));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "quality_adjustment", FALSE, UserInterface_private_offset + G_STRUCT_OFFSET (UserInterfacePrivate, quality_adjustment));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "device_combo_changed_cb", G_CALLBACK(_user_interface_device_combo_changed_cb_gtk_combo_box_changed));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "new_button_clicked_cb", G_CALLBACK(_user_interface_new_button_clicked_cb_gtk_button_clicked));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "text_menuitem_toggled_cb", G_CALLBACK(_user_interface_text_menuitem_toggled_cb_gtk_check_menu_item_toggled));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "photo_menuitem_toggled_cb", G_CALLBACK(_user_interface_photo_menuitem_toggled_cb_gtk_check_menu_item_toggled));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "scan_button_clicked_cb", G_CALLBACK(_user_interface_scan_button_clicked_cb_gtk_menu_item_activate));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "stop_scan_button_clicked_cb", G_CALLBACK(_user_interface_stop_scan_button_clicked_cb_gtk_button_clicked));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "continuous_scan_button_clicked_cb", G_CALLBACK(_user_interface_continuous_scan_button_clicked_cb_gtk_menu_item_activate));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "preferences_button_clicked_cb", G_CALLBACK(_user_interface_preferences_button_clicked_cb_gtk_menu_item_activate));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "preferences_dialog_delete_event_cb", G_CALLBACK(_user_interface_preferences_dialog_delete_event_cb_gtk_widget_delete_event));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "preferences_dialog_response_cb", G_CALLBACK(_user_interface_preferences_dialog_response_cb_gtk_dialog_response));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "rotate_left_button_clicked_cb", G_CALLBACK(_user_interface_rotate_left_button_clicked_cb_gtk_button_clicked));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "rotate_right_button_clicked_cb", G_CALLBACK(_user_interface_rotate_right_button_clicked_cb_gtk_button_clicked));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "no_crop_menuitem_toggled_cb", G_CALLBACK(_user_interface_no_crop_menuitem_toggled_cb_gtk_check_menu_item_toggled));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "custom_crop_menuitem_toggled_cb", G_CALLBACK(_user_interface_custom_crop_menuitem_toggled_cb_gtk_check_menu_item_toggled));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "crop_button_toggled_cb", G_CALLBACK(_user_interface_crop_button_toggled_cb_gtk_toggle_button_toggled));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "crop_toolbutton_toggled_cb", G_CALLBACK(_user_interface_crop_toolbutton_toggled_cb_gtk_toggle_tool_button_toggled));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "four_by_six_menuitem_toggled_cb", G_CALLBACK(_user_interface_four_by_six_menuitem_toggled_cb_gtk_check_menu_item_toggled));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "legal_menuitem_toggled_cb", G_CALLBACK(_user_interface_legal_menuitem_toggled_cb_gtk_check_menu_item_toggled));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "letter_menuitem_toggled_cb", G_CALLBACK(_user_interface_letter_menuitem_toggled_cb_gtk_check_menu_item_toggled));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "a6_menuitem_toggled_cb", G_CALLBACK(_user_interface_a6_menuitem_toggled_cb_gtk_check_menu_item_toggled));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "a5_menuitem_toggled_cb", G_CALLBACK(_user_interface_a5_menuitem_toggled_cb_gtk_check_menu_item_toggled));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "a4_menuitem_toggled_cb", G_CALLBACK(_user_interface_a4_menuitem_toggled_cb_gtk_check_menu_item_toggled));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "crop_rotate_menuitem_activate_cb", G_CALLBACK(_user_interface_crop_rotate_menuitem_activate_cb_gtk_menu_item_activate));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "page_move_left_menuitem_activate_cb", G_CALLBACK(_user_interface_page_move_left_menuitem_activate_cb_gtk_menu_item_activate));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "page_move_right_menuitem_activate_cb", G_CALLBACK(_user_interface_page_move_right_menuitem_activate_cb_gtk_menu_item_activate));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "page_delete_menuitem_activate_cb", G_CALLBACK(_user_interface_page_delete_menuitem_activate_cb_gtk_menu_item_activate));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "reorder_menuitem_activate_cb", G_CALLBACK(_user_interface_reorder_menuitem_activate_cb_gtk_menu_item_activate));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "save_file_button_clicked_cb", G_CALLBACK(_user_interface_save_file_button_clicked_cb_gtk_button_clicked));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "copy_to_clipboard_button_clicked_cb", G_CALLBACK(_user_interface_copy_to_clipboard_button_clicked_cb_gtk_menu_item_activate));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "save_as_file_button_clicked_cb", G_CALLBACK(_user_interface_save_as_file_button_clicked_cb_gtk_menu_item_activate));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "email_button_clicked_cb", G_CALLBACK(_user_interface_email_button_clicked_cb_gtk_menu_item_activate));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "print_button_clicked_cb", G_CALLBACK(_user_interface_print_button_clicked_cb_gtk_menu_item_activate));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "help_contents_menuitem_activate_cb", G_CALLBACK(_user_interface_help_contents_menuitem_activate_cb_gtk_menu_item_activate));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "about_menuitem_activate_cb", G_CALLBACK(_user_interface_about_menuitem_activate_cb_gtk_menu_item_activate));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "quit_menuitem_activate_cb", G_CALLBACK(_user_interface_quit_menuitem_activate_cb_gtk_menu_item_activate));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "simple_scan_window_configure_event_cb", G_CALLBACK(_user_interface_simple_scan_window_configure_event_cb_gtk_widget_configure_event));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "simple_scan_window_window_state_event_cb", G_CALLBACK(_user_interface_simple_scan_window_window_state_event_cb_gtk_widget_window_state_event));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_class_bind_template_callback_full (GTK_WIDGET_CLASS (klass), "window_delete_event_cb", G_CALLBACK(_user_interface_window_delete_event_cb_gtk_widget_delete_event));
#line 10577 "ui.c"
}


static void user_interface_instance_init (UserInterface * self) {
	gchar* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv = USER_INTERFACE_GET_PRIVATE (self);
#line 163 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->book_uri = NULL;
#line 186 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = g_strdup ("photo");
#line 186 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->document_hint = _tmp0_;
#line 188 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = _ ("Scanned Document.pdf");
#line 188 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = g_strdup (_tmp1_);
#line 188 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->_default_file_name = _tmp2_;
#line 189 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->scanning_ = FALSE;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_init_template (GTK_WIDGET (self));
#line 10603 "ui.c"
}


static void user_interface_finalize (GObject* obj) {
	UserInterface * self;
	Book* _tmp0_ = NULL;
	guint _tmp1_ = 0U;
	Book* _tmp2_ = NULL;
	guint _tmp3_ = 0U;
	Book* _tmp4_ = NULL;
	guint _tmp5_ = 0U;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TYPE_USER_INTERFACE, UserInterface);
#line 286 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->_book;
#line 286 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_parse_name ("page-added", TYPE_BOOK, &_tmp1_, NULL, FALSE);
#line 286 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_handlers_disconnect_matched (_tmp0_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp1_, 0, NULL, (GCallback) _user_interface_page_added_cb_book_page_added, self);
#line 287 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = self->priv->_book;
#line 287 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_parse_name ("reordered", TYPE_BOOK, &_tmp3_, NULL, FALSE);
#line 287 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_handlers_disconnect_matched (_tmp2_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp3_, 0, NULL, (GCallback) _user_interface_reordered_cb_book_reordered, self);
#line 288 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = self->priv->_book;
#line 288 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_parse_name ("page-removed", TYPE_BOOK, &_tmp5_, NULL, FALSE);
#line 288 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_signal_handlers_disconnect_matched (_tmp4_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp5_, 0, NULL, (GCallback) _user_interface_page_removed_cb_book_page_removed, self);
#line 33 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->settings);
#line 36 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->menubar);
#line 38 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->toolbar);
#line 40 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->page_menu);
#line 42 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->main_vbox);
#line 43 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->info_bar);
#line 44 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->info_bar_image);
#line 45 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->info_bar_label);
#line 46 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->info_bar_close_button);
#line 47 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->info_bar_change_scanner_button);
#line 49 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->custom_crop_menuitem);
#line 51 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->a4_menuitem);
#line 53 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->a5_menuitem);
#line 55 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->a6_menuitem);
#line 57 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->letter_menuitem);
#line 59 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->legal_menuitem);
#line 61 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->four_by_six_menuitem);
#line 63 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->no_crop_menuitem);
#line 65 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->page_move_left_menuitem);
#line 67 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->page_move_right_menuitem);
#line 69 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->page_delete_menuitem);
#line 71 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->crop_rotate_menuitem);
#line 73 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->save_menuitem);
#line 75 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->save_as_menuitem);
#line 77 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->copy_to_clipboard_menuitem);
#line 79 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->save_button);
#line 81 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->save_toolbutton);
#line 83 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->stop_scan_menuitem);
#line 85 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->stop_toolbutton);
#line 87 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->crop_button);
#line 89 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->crop_toolbutton);
#line 91 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->stop_button);
#line 93 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->scan_button);
#line 96 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->text_button_menuitem);
#line 98 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->text_button_hb_menuitem);
#line 100 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->text_menuitem);
#line 102 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->photo_button_menuitem);
#line 104 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->photo_button_hb_menuitem);
#line 106 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->photo_menuitem);
#line 109 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->authorize_dialog);
#line 111 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->authorize_label);
#line 113 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->username_entry);
#line 115 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->password_entry);
#line 118 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->preferences_dialog);
#line 120 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->device_combo);
#line 122 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->text_dpi_combo);
#line 124 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->photo_dpi_combo);
#line 126 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->page_side_combo);
#line 128 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->paper_size_combo);
#line 130 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->brightness_scale);
#line 132 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->contrast_scale);
#line 134 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->quality_scale);
#line 136 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->device_model);
#line 138 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->text_dpi_model);
#line 140 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->photo_dpi_model);
#line 142 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->page_side_model);
#line 144 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->paper_size_model);
#line 146 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->brightness_adjustment);
#line 148 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->contrast_adjustment);
#line 150 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->quality_adjustment);
#line 154 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->save_dialog);
#line 155 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->progress_dialog);
#line 158 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (self->priv->error_title);
#line 159 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (self->priv->error_text);
#line 162 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_book_unref0 (self->priv->_book);
#line 163 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (self->priv->book_uri);
#line 177 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_autosave_manager_unref0 (self->priv->autosave_manager);
#line 179 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->book_view);
#line 186 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (self->priv->document_hint);
#line 188 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (self->priv->_default_file_name);
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	G_OBJECT_CLASS (user_interface_parent_class)->finalize (obj);
#line 10777 "ui.c"
}


GType user_interface_get_type (void) {
	static volatile gsize user_interface_type_id__volatile = 0;
	if (g_once_init_enter (&user_interface_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (UserInterfaceClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) user_interface_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (UserInterface), 0, (GInstanceInitFunc) user_interface_instance_init, NULL };
		GType user_interface_type_id;
		user_interface_type_id = g_type_register_static (GTK_TYPE_APPLICATION_WINDOW, "UserInterface", &g_define_type_info, 0);
		g_once_init_leave (&user_interface_type_id__volatile, user_interface_type_id);
	}
	return user_interface_type_id__volatile;
}


static void _vala_user_interface_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	UserInterface * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, TYPE_USER_INTERFACE, UserInterface);
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	switch (property_id) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case USER_INTERFACE_BOOK:
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		value_set_book (value, user_interface_get_book (self));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case USER_INTERFACE_SELECTED_PAGE:
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		value_set_page (value, user_interface_get_selected_page (self));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case USER_INTERFACE_DEFAULT_FILE_NAME:
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_value_set_string (value, user_interface_get_default_file_name (self));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case USER_INTERFACE_SCANNING:
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_value_set_boolean (value, user_interface_get_scanning (self));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case USER_INTERFACE_BRIGHTNESS:
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_value_set_int (value, user_interface_get_brightness (self));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case USER_INTERFACE_CONTRAST:
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_value_set_int (value, user_interface_get_contrast (self));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case USER_INTERFACE_QUALITY:
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_value_set_int (value, user_interface_get_quality (self));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case USER_INTERFACE_SELECTED_DEVICE:
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_value_take_string (value, user_interface_get_selected_device (self));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 10846 "ui.c"
		default:
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 10852 "ui.c"
	}
}


static void _vala_user_interface_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	UserInterface * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, TYPE_USER_INTERFACE, UserInterface);
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	switch (property_id) {
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case USER_INTERFACE_BOOK:
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_set_book (self, value_get_book (value));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case USER_INTERFACE_SELECTED_PAGE:
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_set_selected_page (self, value_get_page (value));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case USER_INTERFACE_DEFAULT_FILE_NAME:
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_set_default_file_name (self, g_value_get_string (value));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case USER_INTERFACE_SCANNING:
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_set_scanning (self, g_value_get_boolean (value));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case USER_INTERFACE_BRIGHTNESS:
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_set_brightness (self, g_value_get_int (value));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case USER_INTERFACE_CONTRAST:
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_set_contrast (self, g_value_get_int (value));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case USER_INTERFACE_QUALITY:
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_set_quality (self, g_value_get_int (value));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case USER_INTERFACE_SELECTED_DEVICE:
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		user_interface_set_selected_device (self, g_value_get_string (value));
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 10910 "ui.c"
		default:
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 14 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 10916 "ui.c"
	}
}


ProgressBarDialog* progress_bar_dialog_construct (GType object_type, GtkApplicationWindow* parent, const gchar* title) {
	ProgressBarDialog * self = NULL;
	GtkProgressBar* _tmp0_ = NULL;
	GtkBox* hbox = NULL;
	GtkBox* _tmp1_ = NULL;
	GtkBox* vbox = NULL;
	GtkBox* _tmp2_ = NULL;
	GtkProgressBar* _tmp3_ = NULL;
	GtkProgressBar* _tmp4_ = NULL;
	GtkProgressBar* _tmp5_ = NULL;
	GtkProgressBar* _tmp6_ = NULL;
	const gchar* _tmp7_ = NULL;
	GtkApplicationWindow* _tmp8_ = NULL;
	GtkProgressBar* _tmp9_ = NULL;
#line 2064 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (parent != NULL, NULL);
#line 2064 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (title != NULL, NULL);
#line 2064 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self = (ProgressBarDialog*) g_object_new (object_type, NULL);
#line 2066 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = (GtkProgressBar*) gtk_progress_bar_new ();
#line 2066 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp0_);
#line 2066 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->bar);
#line 2066 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->bar = _tmp0_;
#line 2067 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_HORIZONTAL, 5);
#line 2067 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp1_);
#line 2067 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	hbox = _tmp1_;
#line 2068 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_VERTICAL, 5);
#line 2068 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_ref_sink (_tmp2_);
#line 2068 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	vbox = _tmp2_;
#line 2069 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_hexpand ((GtkWidget*) hbox, TRUE);
#line 2071 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = self->priv->bar;
#line 2071 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_progress_bar_set_text (_tmp3_, "");
#line 2072 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = self->priv->bar;
#line 2072 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_progress_bar_set_show_text (_tmp4_, TRUE);
#line 2073 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp5_ = self->priv->bar;
#line 2073 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_size_request ((GtkWidget*) _tmp5_, 225, 25);
#line 2074 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_size_request ((GtkWidget*) self, 250, 50);
#line 2076 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp6_ = self->priv->bar;
#line 2076 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_box_pack_start (vbox, (GtkWidget*) _tmp6_, TRUE, FALSE, (guint) 0);
#line 2077 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_box_pack_start (hbox, (GtkWidget*) vbox, TRUE, FALSE, (guint) 0);
#line 2078 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_container_add ((GtkContainer*) self, (GtkWidget*) hbox);
#line 2079 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp7_ = title;
#line 2079 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_window_set_title ((GtkWindow*) self, _tmp7_);
#line 2081 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp8_ = parent;
#line 2081 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_window_set_transient_for ((GtkWindow*) self, (GtkWindow*) _tmp8_);
#line 2082 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_window_set_position ((GtkWindow*) self, GTK_WIN_POS_CENTER_ON_PARENT);
#line 2083 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_window_set_modal ((GtkWindow*) self, TRUE);
#line 2084 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_window_set_resizable ((GtkWindow*) self, FALSE);
#line 2086 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) hbox, TRUE);
#line 2087 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) vbox, TRUE);
#line 2088 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp9_ = self->priv->bar;
#line 2088 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp9_, TRUE);
#line 2064 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (vbox);
#line 2064 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (hbox);
#line 2064 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return self;
#line 11013 "ui.c"
}


ProgressBarDialog* progress_bar_dialog_new (GtkApplicationWindow* parent, const gchar* title) {
#line 2064 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return progress_bar_dialog_construct (TYPE_PROGRESS_BAR_DIALOG, parent, title);
#line 11020 "ui.c"
}


gdouble progress_bar_dialog_get_fraction (ProgressBarDialog* self) {
	gdouble result;
	GtkProgressBar* _tmp0_ = NULL;
	gdouble _tmp1_ = 0.0;
	gdouble _tmp2_ = 0.0;
#line 2054 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, 0.0);
#line 2054 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->bar;
#line 2054 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = gtk_progress_bar_get_fraction (_tmp0_);
#line 2054 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 2054 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = _tmp2_;
#line 2054 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 11041 "ui.c"
}


void progress_bar_dialog_set_fraction (ProgressBarDialog* self, gdouble value) {
	GtkProgressBar* _tmp0_ = NULL;
	gdouble _tmp1_ = 0.0;
#line 2055 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 2055 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->bar;
#line 2055 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = value;
#line 2055 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_progress_bar_set_fraction (_tmp0_, _tmp1_);
#line 2055 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_notify ((GObject *) self, "fraction");
#line 11058 "ui.c"
}


const gchar* progress_bar_dialog_get_message (ProgressBarDialog* self) {
	const gchar* result;
	GtkProgressBar* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	const gchar* _tmp2_ = NULL;
#line 2060 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 2060 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->bar;
#line 2060 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = gtk_progress_bar_get_text (_tmp0_);
#line 2060 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = _tmp1_;
#line 2060 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = _tmp2_;
#line 2060 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 11079 "ui.c"
}


void progress_bar_dialog_set_message (ProgressBarDialog* self, const gchar* value) {
	GtkProgressBar* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
#line 2061 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_if_fail (self != NULL);
#line 2061 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = self->priv->bar;
#line 2061 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = value;
#line 2061 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	gtk_progress_bar_set_text (_tmp0_, _tmp1_);
#line 2061 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_notify ((GObject *) self, "message");
#line 11096 "ui.c"
}


static void progress_bar_dialog_class_init (ProgressBarDialogClass * klass) {
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	progress_bar_dialog_parent_class = g_type_class_peek_parent (klass);
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_type_class_add_private (klass, sizeof (ProgressBarDialogPrivate));
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_progress_bar_dialog_get_property;
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_progress_bar_dialog_set_property;
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	G_OBJECT_CLASS (klass)->finalize = progress_bar_dialog_finalize;
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), PROGRESS_BAR_DIALOG_FRACTION, g_param_spec_double ("fraction", "fraction", "fraction", -G_MAXDOUBLE, G_MAXDOUBLE, 0.0, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), PROGRESS_BAR_DIALOG_MESSAGE, g_param_spec_string ("message", "message", "message", NULL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 11115 "ui.c"
}


static void progress_bar_dialog_instance_init (ProgressBarDialog * self) {
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv = PROGRESS_BAR_DIALOG_GET_PRIVATE (self);
#line 11122 "ui.c"
}


static void progress_bar_dialog_finalize (GObject* obj) {
	ProgressBarDialog * self;
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TYPE_PROGRESS_BAR_DIALOG, ProgressBarDialog);
#line 2050 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_object_unref0 (self->priv->bar);
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	G_OBJECT_CLASS (progress_bar_dialog_parent_class)->finalize (obj);
#line 11134 "ui.c"
}


GType progress_bar_dialog_get_type (void) {
	static volatile gsize progress_bar_dialog_type_id__volatile = 0;
	if (g_once_init_enter (&progress_bar_dialog_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (ProgressBarDialogClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) progress_bar_dialog_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (ProgressBarDialog), 0, (GInstanceInitFunc) progress_bar_dialog_instance_init, NULL };
		GType progress_bar_dialog_type_id;
		progress_bar_dialog_type_id = g_type_register_static (GTK_TYPE_WINDOW, "ProgressBarDialog", &g_define_type_info, 0);
		g_once_init_leave (&progress_bar_dialog_type_id__volatile, progress_bar_dialog_type_id);
	}
	return progress_bar_dialog_type_id__volatile;
}


static void _vala_progress_bar_dialog_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	ProgressBarDialog * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, TYPE_PROGRESS_BAR_DIALOG, ProgressBarDialog);
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	switch (property_id) {
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case PROGRESS_BAR_DIALOG_FRACTION:
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_value_set_double (value, progress_bar_dialog_get_fraction (self));
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case PROGRESS_BAR_DIALOG_MESSAGE:
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_value_set_string (value, progress_bar_dialog_get_message (self));
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 11167 "ui.c"
		default:
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 11173 "ui.c"
	}
}


static void _vala_progress_bar_dialog_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	ProgressBarDialog * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, TYPE_PROGRESS_BAR_DIALOG, ProgressBarDialog);
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	switch (property_id) {
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case PROGRESS_BAR_DIALOG_FRACTION:
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		progress_bar_dialog_set_fraction (self, g_value_get_double (value));
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		case PROGRESS_BAR_DIALOG_MESSAGE:
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		progress_bar_dialog_set_message (self, g_value_get_string (value));
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 11195 "ui.c"
		default:
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 2048 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		break;
#line 11201 "ui.c"
	}
}


gchar* get_temporary_filename (const gchar* prefix, const gchar* extension) {
	gchar* result = NULL;
	gchar* filename = NULL;
	const gchar* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
	gchar* path = NULL;
	GError * _inner_error_ = NULL;
#line 2093 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (prefix != NULL, NULL);
#line 2093 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (extension != NULL, NULL);
#line 2098 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = prefix;
#line 2098 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = extension;
#line 2098 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = g_strdup_printf ("%sXXXXXX.%s", _tmp0_, _tmp1_);
#line 2098 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	filename = _tmp2_;
#line 11226 "ui.c"
	{
		gint fd = 0;
		const gchar* _tmp3_ = NULL;
		gchar* _tmp4_ = NULL;
		gint _tmp5_ = 0;
		gint _tmp6_ = 0;
#line 2102 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp3_ = filename;
#line 2102 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp5_ = g_file_open_tmp (_tmp3_, &_tmp4_, &_inner_error_);
#line 2102 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (path);
#line 2102 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		path = _tmp4_;
#line 2102 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		fd = _tmp5_;
#line 2102 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		if (_inner_error_ != NULL) {
#line 11245 "ui.c"
			goto __catch26_g_error;
		}
#line 2103 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp6_ = fd;
#line 2103 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		close (_tmp6_);
#line 11252 "ui.c"
	}
	goto __finally26;
	__catch26_g_error:
	{
		GError* e = NULL;
		GError* _tmp7_ = NULL;
		const gchar* _tmp8_ = NULL;
#line 2100 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		e = _inner_error_;
#line 2100 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_inner_error_ = NULL;
#line 2107 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp7_ = e;
#line 2107 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp8_ = _tmp7_->message;
#line 2107 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_warning ("ui.vala:2107: Error saving email attachment: %s", _tmp8_);
#line 2108 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		result = NULL;
#line 2108 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_error_free0 (e);
#line 2108 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (path);
#line 2108 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (filename);
#line 2108 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return result;
#line 11280 "ui.c"
	}
	__finally26:
#line 2100 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (_inner_error_ != NULL) {
#line 2100 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (path);
#line 2100 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_g_free0 (filename);
#line 2100 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 2100 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		g_clear_error (&_inner_error_);
#line 2100 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		return NULL;
#line 11295 "ui.c"
	}
#line 2111 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = path;
#line 2111 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (filename);
#line 2111 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 11303 "ui.c"
}


PageIcon* page_icon_construct (GType object_type, const gchar* text, gdouble r, gdouble g, gdouble b) {
	PageIcon * self = NULL;
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	gdouble _tmp2_ = 0.0;
	gdouble _tmp3_ = 0.0;
	gdouble _tmp4_ = 0.0;
#line 2122 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (text != NULL, NULL);
#line 2122 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self = (PageIcon*) g_object_new (object_type, NULL);
#line 2124 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = text;
#line 2124 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = g_strdup (_tmp0_);
#line 2124 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (self->priv->text);
#line 2124 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->text = _tmp1_;
#line 2125 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = r;
#line 2125 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->r = _tmp2_;
#line 2126 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = g;
#line 2126 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->g = _tmp3_;
#line 2127 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp4_ = b;
#line 2127 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv->b = _tmp4_;
#line 2122 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return self;
#line 11340 "ui.c"
}


PageIcon* page_icon_new (const gchar* text, gdouble r, gdouble g, gdouble b) {
#line 2122 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return page_icon_construct (TYPE_PAGE_ICON, text, r, g, b);
#line 11347 "ui.c"
}


static void page_icon_real_get_preferred_width (GtkWidget* base, gint* minimum_width, gint* natural_width) {
	PageIcon * self;
	gint _vala_minimum_width = 0;
	gint _vala_natural_width = 0;
#line 2130 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self = (PageIcon*) base;
#line 2132 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_vala_natural_width = PAGE_ICON_MINIMUM_WIDTH;
#line 2132 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_vala_minimum_width = _vala_natural_width;
#line 2130 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (minimum_width) {
#line 2130 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		*minimum_width = _vala_minimum_width;
#line 11365 "ui.c"
	}
#line 2130 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (natural_width) {
#line 2130 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		*natural_width = _vala_natural_width;
#line 11371 "ui.c"
	}
}


static void page_icon_real_get_preferred_height (GtkWidget* base, gint* minimum_height, gint* natural_height) {
	PageIcon * self;
	gint _vala_minimum_height = 0;
	gint _vala_natural_height = 0;
	gdouble _tmp0_ = 0.0;
#line 2135 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self = (PageIcon*) base;
#line 2137 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = round (PAGE_ICON_MINIMUM_WIDTH * G_SQRT2);
#line 2137 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_vala_natural_height = (gint) _tmp0_;
#line 2137 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_vala_minimum_height = _vala_natural_height;
#line 2135 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (minimum_height) {
#line 2135 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		*minimum_height = _vala_minimum_height;
#line 11393 "ui.c"
	}
#line 2135 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (natural_height) {
#line 2135 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		*natural_height = _vala_natural_height;
#line 11399 "ui.c"
	}
}


static void page_icon_real_get_preferred_height_for_width (GtkWidget* base, gint width, gint* minimum_height, gint* natural_height) {
	PageIcon * self;
	gint _vala_minimum_height = 0;
	gint _vala_natural_height = 0;
	gint _tmp0_ = 0;
#line 2140 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self = (PageIcon*) base;
#line 2142 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = width;
#line 2142 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_vala_natural_height = (gint) (_tmp0_ * G_SQRT2);
#line 2142 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_vala_minimum_height = _vala_natural_height;
#line 2140 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (minimum_height) {
#line 2140 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		*minimum_height = _vala_minimum_height;
#line 11421 "ui.c"
	}
#line 2140 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (natural_height) {
#line 2140 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		*natural_height = _vala_natural_height;
#line 11427 "ui.c"
	}
}


static void page_icon_real_get_preferred_width_for_height (GtkWidget* base, gint height, gint* minimum_width, gint* natural_width) {
	PageIcon * self;
	gint _vala_minimum_width = 0;
	gint _vala_natural_width = 0;
	gint _tmp0_ = 0;
#line 2145 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self = (PageIcon*) base;
#line 2147 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = height;
#line 2147 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_vala_natural_width = (gint) (_tmp0_ / G_SQRT2);
#line 2147 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_vala_minimum_width = _vala_natural_width;
#line 2145 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (minimum_width) {
#line 2145 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		*minimum_width = _vala_minimum_width;
#line 11449 "ui.c"
	}
#line 2145 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if (natural_width) {
#line 2145 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		*natural_width = _vala_natural_width;
#line 11455 "ui.c"
	}
}


static gboolean page_icon_real_draw (GtkWidget* base, cairo_t* c) {
	PageIcon * self;
	gboolean result = FALSE;
	gint w = 0;
	gint _tmp0_ = 0;
	gint h = 0;
	gint _tmp1_ = 0;
	gint _tmp2_ = 0;
	gint _tmp3_ = 0;
	cairo_t* _tmp8_ = NULL;
	gint _tmp9_ = 0;
	gint _tmp10_ = 0;
	gint _tmp11_ = 0;
	gint _tmp12_ = 0;
	cairo_t* _tmp13_ = NULL;
	gint _tmp14_ = 0;
	gint _tmp15_ = 0;
	cairo_t* _tmp16_ = NULL;
	gdouble _tmp17_ = 0.0;
	gdouble _tmp18_ = 0.0;
	gdouble _tmp19_ = 0.0;
	cairo_t* _tmp20_ = NULL;
	cairo_t* _tmp21_ = NULL;
	cairo_t* _tmp22_ = NULL;
	cairo_t* _tmp23_ = NULL;
	cairo_text_extents_t extents = {0};
	cairo_t* _tmp24_ = NULL;
	const gchar* _tmp25_ = NULL;
	cairo_text_extents_t _tmp26_ = {0};
	cairo_t* _tmp27_ = NULL;
	gint _tmp28_ = 0;
	cairo_text_extents_t _tmp29_ = {0};
	gdouble _tmp30_ = 0.0;
	gint _tmp31_ = 0;
	cairo_text_extents_t _tmp32_ = {0};
	gdouble _tmp33_ = 0.0;
	cairo_t* _tmp34_ = NULL;
	const gchar* _tmp35_ = NULL;
#line 2150 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self = (PageIcon*) base;
#line 2150 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_return_val_if_fail (c != NULL, FALSE);
#line 2152 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp0_ = gtk_widget_get_allocated_width ((GtkWidget*) self);
#line 2152 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	w = _tmp0_;
#line 2153 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp1_ = gtk_widget_get_allocated_height ((GtkWidget*) self);
#line 2153 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	h = _tmp1_;
#line 2154 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp2_ = w;
#line 2154 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp3_ = h;
#line 2154 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	if ((_tmp2_ * G_SQRT2) > ((gdouble) _tmp3_)) {
#line 11516 "ui.c"
		gint _tmp4_ = 0;
		gdouble _tmp5_ = 0.0;
#line 2155 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp4_ = h;
#line 2155 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp5_ = round (_tmp4_ / G_SQRT2);
#line 2155 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		w = (gint) _tmp5_;
#line 11525 "ui.c"
	} else {
		gint _tmp6_ = 0;
		gdouble _tmp7_ = 0.0;
#line 2157 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp6_ = w;
#line 2157 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		_tmp7_ = round (_tmp6_ * G_SQRT2);
#line 2157 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
		h = (gint) _tmp7_;
#line 11535 "ui.c"
	}
#line 2159 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp8_ = c;
#line 2159 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp9_ = gtk_widget_get_allocated_width ((GtkWidget*) self);
#line 2159 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp10_ = w;
#line 2159 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp11_ = gtk_widget_get_allocated_height ((GtkWidget*) self);
#line 2159 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp12_ = h;
#line 2159 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	cairo_translate (_tmp8_, (gdouble) ((_tmp9_ - _tmp10_) / 2), (gdouble) ((_tmp11_ - _tmp12_) / 2));
#line 2161 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp13_ = c;
#line 2161 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp14_ = w;
#line 2161 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp15_ = h;
#line 2161 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	cairo_rectangle (_tmp13_, 0.5, 0.5, (gdouble) (_tmp14_ - 1), (gdouble) (_tmp15_ - 1));
#line 2163 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp16_ = c;
#line 2163 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp17_ = self->priv->r;
#line 2163 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp18_ = self->priv->g;
#line 2163 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp19_ = self->priv->b;
#line 2163 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	cairo_set_source_rgb (_tmp16_, _tmp17_, _tmp18_, _tmp19_);
#line 2164 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp20_ = c;
#line 2164 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	cairo_fill_preserve (_tmp20_);
#line 2166 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp21_ = c;
#line 2166 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	cairo_set_line_width (_tmp21_, 1.0);
#line 2167 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp22_ = c;
#line 2167 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	cairo_set_source_rgb (_tmp22_, 0.0, 0.0, 0.0);
#line 2168 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp23_ = c;
#line 2168 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	cairo_stroke (_tmp23_);
#line 2171 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp24_ = c;
#line 2171 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp25_ = self->priv->text;
#line 2171 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	cairo_text_extents (_tmp24_, _tmp25_, &_tmp26_);
#line 2171 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	extents = _tmp26_;
#line 2172 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp27_ = c;
#line 2172 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp28_ = w;
#line 2172 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp29_ = extents;
#line 2172 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp30_ = _tmp29_.width;
#line 2172 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp31_ = h;
#line 2172 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp32_ = extents;
#line 2172 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp33_ = _tmp32_.height;
#line 2172 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	cairo_translate (_tmp27_, ((_tmp28_ - _tmp30_) * 0.5) - 0.5, ((_tmp31_ + _tmp33_) * 0.5) - 0.5);
#line 2173 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp34_ = c;
#line 2173 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_tmp35_ = self->priv->text;
#line 2173 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	cairo_show_text (_tmp34_, _tmp35_);
#line 2175 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	result = TRUE;
#line 2175 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	return result;
#line 11617 "ui.c"
}


static void page_icon_class_init (PageIconClass * klass) {
#line 2114 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	page_icon_parent_class = g_type_class_peek_parent (klass);
#line 2114 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	g_type_class_add_private (klass, sizeof (PageIconPrivate));
#line 2114 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	GTK_WIDGET_CLASS (klass)->get_preferred_width = page_icon_real_get_preferred_width;
#line 2114 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	GTK_WIDGET_CLASS (klass)->get_preferred_height = page_icon_real_get_preferred_height;
#line 2114 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	GTK_WIDGET_CLASS (klass)->get_preferred_height_for_width = page_icon_real_get_preferred_height_for_width;
#line 2114 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	GTK_WIDGET_CLASS (klass)->get_preferred_width_for_height = page_icon_real_get_preferred_width_for_height;
#line 2114 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	GTK_WIDGET_CLASS (klass)->draw = page_icon_real_draw;
#line 2114 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	G_OBJECT_CLASS (klass)->finalize = page_icon_finalize;
#line 11638 "ui.c"
}


static void page_icon_instance_init (PageIcon * self) {
#line 2114 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self->priv = PAGE_ICON_GET_PRIVATE (self);
#line 11645 "ui.c"
}


static void page_icon_finalize (GObject* obj) {
	PageIcon * self;
#line 2114 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TYPE_PAGE_ICON, PageIcon);
#line 2116 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	_g_free0 (self->priv->text);
#line 2114 "/home/bob/bzr/simple-scan/trunk/src/ui.vala"
	G_OBJECT_CLASS (page_icon_parent_class)->finalize (obj);
#line 11657 "ui.c"
}


GType page_icon_get_type (void) {
	static volatile gsize page_icon_type_id__volatile = 0;
	if (g_once_init_enter (&page_icon_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (PageIconClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) page_icon_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (PageIcon), 0, (GInstanceInitFunc) page_icon_instance_init, NULL };
		GType page_icon_type_id;
		page_icon_type_id = g_type_register_static (GTK_TYPE_DRAWING_AREA, "PageIcon", &g_define_type_info, 0);
		g_once_init_leave (&page_icon_type_id__volatile, page_icon_type_id);
	}
	return page_icon_type_id__volatile;
}


static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}



